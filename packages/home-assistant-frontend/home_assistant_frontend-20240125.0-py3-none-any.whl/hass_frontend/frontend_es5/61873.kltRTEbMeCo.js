/*! For license information please see 61873.kltRTEbMeCo.js.LICENSE.txt */
"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[61873,55424],{72043:function(t,e,r){r.d(e,{A:function(){return c},v:function(){return u}});var n=r(23158),o=r(25101),i=r(66477),a=function(t,e,r,i){var a=r((0,n.Z)(t,e),i);return a instanceof Date?(0,o.Z)(a,e):a},c=function(t,e,r,n,o){return r.time_zone===i.c_.server?a(t,n.time_zone,e,o):e(t,o)},u=function(t,e,r,n,o){return r.time_zone===i.c_.server?a(t,n.time_zone,e,o):e(t,o)}},92306:function(t,e,r){r.d(e,{v:function(){return o}});var n=r(40039),o=(r(36513),function(t,e){var r,o={},i=(0,n.Z)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=e(a);c in o?o[c].push(a):o[c]=[a]}}catch(u){i.e(u)}finally{i.f()}return o})},73366:function(t,e,r){r.d(e,{M:function(){return _}});var n,o,i,a=r(88962),c=r(33368),u=r(71650),s=r(68308),l=r(82390),f=r(69205),h=r(91808),p=r(34541),d=r(47838),y=(r(97393),r(61092)),v=r(96762),g=r(68144),m=r(95260),_=(0,h.Z)([(0,m.Mo)("ha-list-item")],(function(t,e){var r=function(e){function r(){var e;(0,u.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=(0,s.Z)(this,r,[].concat(o)),t((0,l.Z)(e)),e}return(0,f.Z)(r,e),(0,c.Z)(r)}(e);return{F:r,d:[{kind:"method",key:"renderRipple",value:function(){return this.noninteractive?"":(0,p.Z)((0,d.Z)(r.prototype),"renderRipple",this).call(this)}},{kind:"get",static:!0,key:"styles",value:function(){return[v.W,(0,g.iv)(n||(n=(0,a.Z)([":host{padding-left:var(--mdc-list-side-padding-left,var(--mdc-list-side-padding,20px));padding-right:var(--mdc-list-side-padding-right,var(--mdc-list-side-padding,20px))}:host([graphic=avatar]:not([twoLine])),:host([graphic=icon]:not([twoLine])){height:48px}span.material-icons:first-of-type{margin-inline-start:0px!important;margin-inline-end:var(--mdc-list-item-graphic-margin,16px)!important;direction:var(--direction)!important}span.material-icons:last-of-type{margin-inline-start:auto!important;margin-inline-end:0px!important;direction:var(--direction)!important}.mdc-deprecated-list-item__meta{display:var(--mdc-list-item-meta-display);align-items:center;flex-shrink:0}:host([graphic=icon]:not([twoline])) .mdc-deprecated-list-item__graphic{margin-inline-end:var(--mdc-list-item-graphic-margin,20px)!important}:host([multiline-secondary]){height:auto}:host([multiline-secondary]) .mdc-deprecated-list-item__text{padding:8px 0}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text{text-overflow:initial;white-space:normal;overflow:auto;display:inline-block;margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text{margin-top:10px}:host([multiline-secondary]) .mdc-deprecated-list-item__secondary-text::before{display:none}:host([multiline-secondary]) .mdc-deprecated-list-item__primary-text::before{display:none}:host([disabled]){color:var(--disabled-text-color)}:host([noninteractive]){pointer-events:unset}"]))),"rtl"===document.dir?(0,g.iv)(o||(o=(0,a.Z)(["span.material-icons:first-of-type,span.material-icons:last-of-type{direction:rtl!important}"]))):(0,g.iv)(i||(i=(0,a.Z)([""])))]}}]}}),y.K)},36226:function(t,e,r){var n,o=r(88962),i=r(33368),a=r(71650),c=r(68308),u=r(82390),s=r(69205),l=r(91808),f=(r(97393),r(67625)),h=r(71711),p=r(68144),d=r(95260);(0,l.Z)([(0,d.Mo)("ha-top-app-bar-fixed")],(function(t,e){var r=function(e){function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=(0,c.Z)(this,r,[].concat(o)),t((0,u.Z)(e)),e}return(0,s.Z)(r,e),(0,i.Z)(r)}(e);return{F:r,d:[{kind:"field",static:!0,key:"styles",value:function(){return[h.W,(0,p.iv)(n||(n=(0,o.Z)([".mdc-top-app-bar__row{height:var(--header-height);border-bottom:var(--app-header-border-bottom)}.mdc-top-app-bar--fixed-adjust{padding-top:var(--header-height)}.mdc-top-app-bar{--mdc-typography-headline6-font-weight:400;color:var(--app-header-text-color,var(--mdc-theme-on-primary,#fff));background-color:var(--app-header-background-color,var(--mdc-theme-primary))}"])))]}}]}}),f.s)},81582:function(t,e,r){r.d(e,{DJ:function(){return a},LZ:function(){return o},Nn:function(){return f},Ny:function(){return h},Pk:function(){return d},Q4:function(){return i},RQ:function(){return u},SO:function(){return s},T0:function(){return p},iJ:function(){return l},pB:function(){return c}});var n=r(53709),o=(r(85717),r(37313),["migration_error","setup_error","setup_retry"]),i=["not_loaded","loaded","setup_error","setup_retry"],a=function(t,e,r){var n={type:"config_entries/subscribe"};return r&&r.type&&(n.type_filter=r.type),t.connection.subscribeMessage((function(t){return e(t)}),n)},c=function(t,e){var r={};return e&&(e.type&&(r.type_filter=e.type),e.domain&&(r.domain=e.domain)),t.callWS(Object.assign({type:"config_entries/get"},r))},u=function(t,e){return t.callWS({type:"config_entries/get_single",entry_id:e})},s=function(t,e,r){return t.callWS(Object.assign({type:"config_entries/update",entry_id:e},r))},l=function(t,e){return t.callApi("DELETE","config/config_entries/entry/".concat(e))},f=function(t,e){return t.callApi("POST","config/config_entries/entry/".concat(e,"/reload"))},h=function(t,e){return t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:"user"})},p=function(t,e){return t.callWS({type:"config_entries/disable",entry_id:e,disabled_by:null})},d=function(t,e){var r=(0,n.Z)(t),o=function(t){var r=e[t.domain];return"helper"===(null==r?void 0:r.integration_type)?-1:1};return r.sort((function(t,e){return o(e)-o(t)}))}},55424:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:O(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",y="suspendedYield",v="executing",g="completed",m={};function _(){}function b(){}function w(){}var x={};f(x,u,(function(){return this}));var k=Object.getPrototypeOf,Z=k&&k(k(C([])));Z&&Z!==r&&i.call(Z,u)&&(x=Z);var L=w.prototype=_.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function O(e,r,n){var o=d;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},E(j.prototype),f(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(L),f(L,l,"Generator"),f(L,u,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}r.a(t,function(){var t,n=(t=o().mark((function t(n,i){var a,c,u,s,l,f,h,p,d,y,v,g,m,_,b,w,x,k,Z,L,E,j,O,S,T,P,A,C,N,G,W,D,F,I,M,z,B,K,U,H,J,V,Y,Q,R,q,$;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.d(e,{Bm:function(){return S},Cj:function(){return G},G9:function(){return Q},Jj:function(){return z},KU:function(){return N},P:function(){return C},UB:function(){return J},ZC:function(){return F},_Z:function(){return I},b:function(){return q},gy:function(){return D},iK:function(){return P},jB:function(){return V},kJ:function(){return $},o1:function(){return T},rl:function(){return A},vE:function(){return R},xZ:function(){return W},yH:function(){return B}}),a=r(53709),c=r(68990),u=r(40039),s=r(99312),l=r(81043),r(85717),r(40271),r(60163),r(36513),r(51358),r(46798),r(47084),r(5239),r(98490),r(10733),r(97393),r(9849),r(50289),r(94167),r(88640),r(51467),f=r(24112),h=r(74774),p=r(63390),d=r(32182),y=r(38588),v=r(79021),g=r(39244),m=r(59429),_=r(93752),b=r(59699),w=r(97330),x=r(72043),k=r(49684),Z=r(92306),L=r(81582),E=r(38014),!(j=n([k])).then){t.next=63;break}return t.next=59,j;case 59:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=64;break;case 63:t.t0=j;case 64:k=t.t0[0],O=[],S=function(){return{stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},T=function(){return{stat_energy_to:"",stat_compensation:null,entity_energy_price:null,number_energy_price:null}},P=function(){return{type:"grid",flow_from:[],flow_to:[],cost_adjustment_day:0}},A=function(){return{type:"solar",stat_energy_from:"",config_entry_solar_forecast:null}},C=function(){return{type:"battery",stat_energy_from:"",stat_energy_to:""}},N=function(){return{type:"gas",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},G=function(){return{type:"water",stat_energy_from:"",stat_cost:null,entity_energy_price:null,number_energy_price:null}},W=function(t){return t.callWS({type:"energy/info"})},D=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadBackendTranslation("issues","energy");case 2:return t.abrupt("return",e.callWS({type:"energy/validate"}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F=function(t){return t.callWS({type:"energy/get_prefs"})},I=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e,r){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.callWS(Object.assign({type:"energy/save_prefs"},r)),U(e),t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),M=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e,r,n,o,i){var a,c=arguments;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>5&&void 0!==c[5]?c[5]:"hour",t.abrupt("return",e.callWS({type:"energy/fossil_energy_consumption",start_time:r.toISOString(),end_time:null==i?void 0:i.toISOString(),energy_statistic_ids:n,co2_statistic_id:o,period:a}));case 2:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),z=function(t){return(0,Z.v)(t.energy_sources,(function(t){return t.type}))},B=function(t,e,r){var n,o=[],i=(0,u.Z)(t.energy_sources);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(!r||r.includes(a.type))if("solar"!==a.type)if("gas"!==a.type&&"water"!==a.type)if("battery"!==a.type){var c,s=(0,u.Z)(a.flow_from);try{for(s.s();!(c=s.n()).done;){var l=c.value;o.push(l.stat_energy_from),l.stat_cost&&o.push(l.stat_cost);var f=e.cost_sensors[l.stat_energy_from];f&&o.push(f)}}catch(g){s.e(g)}finally{s.f()}var h,p=(0,u.Z)(a.flow_to);try{for(p.s();!(h=p.n()).done;){var d=h.value;o.push(d.stat_energy_to),d.stat_compensation&&o.push(d.stat_compensation);var y=e.cost_sensors[d.stat_energy_to];y&&o.push(y)}}catch(g){p.e(g)}finally{p.f()}}else o.push(a.stat_energy_from),o.push(a.stat_energy_to);else{o.push(a.stat_energy_from),a.stat_cost&&o.push(a.stat_cost);var v=e.cost_sensors[a.stat_energy_from];v&&o.push(v)}else o.push(a.stat_energy_from)}}catch(g){i.e(g)}finally{i.f()}return o},K=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e,r,n,o,i){var l,m,_,b,w,k,Z,j,O,S,T,P,A,C,N,G,D,F,I,z,K,U,H,J,V,Y,Q,R,q,$,X,tt,et,rt,nt,ot,it,at,ct,ut,st,lt,ft,ht,pt,dt,yt;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([(0,L.pB)(e,{domain:"co2signal"}),W(e)]);case 2:if(l=t.sent,m=(0,c.Z)(l,2),_=m[0],b=m[1],!(w=_.length?_[0]:void 0)){t.next=21;break}Z=0,j=Object.values(e.entities);case 9:if(!(Z<j.length)){t.next=21;break}if("co2signal"===(O=j[Z]).platform){t.next=13;break}return t.abrupt("continue",18);case 13:if((S=e.states[O.entity_id])&&"%"===S.attributes.unit_of_measurement){t.next=16;break}return t.abrupt("continue",18);case 16:return k=S.entity_id,t.abrupt("break",21);case 18:Z++,t.next=9;break;case 21:T=[],P=(0,u.Z)(r.energy_sources);try{for(P.s();!(A=P.n()).done;)if("grid"===(C=A.value).type){N=(0,u.Z)(C.flow_from);try{for(N.s();!(G=N.n()).done;)D=G.value,T.push(D.stat_energy_from)}catch(s){N.e(s)}finally{N.f()}}}catch(s){P.e(s)}finally{P.f()}return F=B(r,b,["grid","solar","battery","gas"]),I=B(r,b,["water"]),z=[].concat((0,a.Z)(F),(0,a.Z)(I)),K=(0,f.Z)(o||new Date,n),U=K>35?"month":K>2?"day":"hour",H=e.config.unit_system.length||"",J={energy:"kWh",volume:"km"===H?"m³":"ft³"},V={volume:"km"===H?"L":"gal"},Y=F.length?(0,E.dL)(e,n,o,F,U,J,["change"]):{},Q=I.length?(0,E.dL)(e,n,o,I,U,V,["change"]):{},X={},tt={},i&&(q=(0,x.v)(n,h.Z,e.locale,e.config)&&(0,x.v)(o||new Date,p.Z,e.locale,e.config)?(0,x.A)(n,d.Z,e.locale,e.config,-(0,x.v)(o||new Date,y.Z,e.locale,e.config,n)-1):(0,x.A)(n,v.Z,e.locale,e.config,-1*(K+1)),$=(0,g.Z)(n,-1),F.length&&(X=(0,E.dL)(e,q,$,F,U,J,["change"])),I.length&&(tt=(0,E.dL)(e,q,$,I,U,V,["change"]))),void 0!==k&&(et=M(e,n,T,k,o,K>35?"month":K>2?"day":"hour"),i&&(rt=M(e,q,T,k,$,K>35?"month":K>2?"day":"hour"))),nt={},ot=z.length?(0,E.Py)(e,z):[],t.next=42,Promise.all([Y,Q,X,tt,ot,et,rt]);case 42:return it=t.sent,at=(0,c.Z)(it,7),ct=at[0],ut=at[1],st=at[2],lt=at[3],ft=at[4],ht=at[5],pt=at[6],dt=Object.assign(Object.assign({},ct),ut),i&&(R=Object.assign(Object.assign({},st),lt)),z.length&&ft.forEach((function(t){nt[t.statistic_id]=t})),yt={start:n,end:o,startCompare:q,endCompare:$,info:b,prefs:r,stats:dt,statsMetadata:nt,statsCompare:R,co2SignalConfigEntry:w,co2SignalEntity:k,fossilEnergyConsumption:ht,fossilEnergyConsumptionCompare:pt},t.abrupt("return",yt);case 56:case"end":return t.stop()}}),t)})));return function(e,r,n,o,i){return t.apply(this,arguments)}}(),U=function(t){O.forEach((function(e){var r=J(t,{key:e});r.clearPrefs(),r._active&&r.refresh()}))},H=function(t){if(t._refreshTimeout&&clearTimeout(t._refreshTimeout),t._active&&(!t.end||t.end>new Date)){var e=new Date;e.getMinutes()>=20&&e.setHours(e.getHours()+1),e.setMinutes(20,0,0),t._refreshTimeout=window.setTimeout((function(){return t.refresh()}),e.getTime()-Date.now())}},J=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="_energy";if(e.key){if(!e.key.startsWith("energy_"))throw new Error("Key need to start with energy_");r="_".concat(e.key)}if(t.connection[r])return t.connection[r];O.push(e.key);var n=(0,w._)(t.connection,r,(0,l.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.prefs){e.next=4;break}return e.next=3,F(t);case 3:n.prefs=e.sent;case 4:return H(n),e.abrupt("return",K(t,n.prefs,n.start,n.end,n.compare));case 6:case"end":return e.stop()}}),e)})))),o=n.subscribe;n.subscribe=function(t){var e=o(t);return n._active++,void 0===n._refreshTimeout&&H(n),function(){n._active--,n._active<1&&(clearTimeout(n._refreshTimeout),n._refreshTimeout=void 0),e()}},n._active=0,n.prefs=e.prefs;var i=new Date,a=(0,k.Zs)(i,t.locale,t.config).split(":")[0];n.start=(0,x.A)("0"===a?(0,v.Z)(i,-1):i,m.Z,t.locale,t.config),n.end=(0,x.A)("0"===a?(0,v.Z)(i,-1):i,_.Z,t.locale,t.config);var c=function e(){n._updatePeriodTimeout=window.setTimeout((function(){n.start=(0,x.A)(new Date,m.Z,t.locale,t.config),n.end=(0,x.A)(new Date,_.Z,t.locale,t.config),e()}),(0,b.Z)((0,x.A)(i,_.Z,t.locale,t.config),1).getTime()-Date.now())};return c(),n.clearPrefs=function(){n.prefs=void 0},n.setPeriod=function(e,r){var o;n.start=e,n.end=r,n.start.getTime()!==(0,x.A)(new Date,m.Z,t.locale,t.config).getTime()||(null===(o=n.end)||void 0===o?void 0:o.getTime())!==(0,x.A)(new Date,_.Z,t.locale,t.config).getTime()||n._updatePeriodTimeout?n._updatePeriodTimeout&&(clearTimeout(n._updatePeriodTimeout),n._updatePeriodTimeout=void 0):c()},n.setCompare=function(t){n.compare=t},n},V=function(t){return t.callWS({type:"energy/solar_forecast"})},Y=["volume","energy"],Q=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=(0,u.Z)(t.energy_sources);try{for(o.s();!(e=o.n()).done;){var i=e.value;if("gas"===i.type&&(!n||n!==i.stat_energy_from)){var a=r[i.stat_energy_from];if(Y.includes(null==a?void 0:a.unit_class))return a.unit_class}}}catch(c){o.e(c)}finally{o.f()}},R=function(t,e){var r=Q(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});if(void 0!==r)return"energy"===r?"kWh":"km"===t.config.unit_system.length?"m³":"ft³"},q=function(t){return"km"===t.config.unit_system.length?"L":"gal"},$="/docs/energy/faq/#troubleshooting-missing-entities",i(),t.next=96;break;case 93:t.prev=93,t.t2=t.catch(0),i(t.t2);case 96:case"end":return t.stop()}}),t,null,[[0,93]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())},40003:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){o=function(){return e};var t,e={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",s=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,i=Object.create(o.prototype),c=new A(n||[]);return a(i,"_invoke",{value:O(t,r,c)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var d="suspendedStart",y="suspendedYield",v="executing",g="completed",m={};function _(){}function b(){}function w(){}var x={};f(x,u,(function(){return this}));var k=Object.getPrototypeOf,Z=k&&k(k(C([])));Z&&Z!==r&&i.call(Z,u)&&(x=Z);var L=w.prototype=_.prototype=Object.create(x);function E(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(o,a,c,u){var s=p(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==n(f)&&i.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;a(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function O(e,r,n){var o=d;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=S(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var s=p(e,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function S(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,S(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=p(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function r(){for(;++o<e.length;)if(i.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(n(e)+" is not iterable")}return b.prototype=w,a(L,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,l,"GeneratorFunction")),t.prototype=Object.create(L),t},e.awrap=function(t){return{__await:t}},E(j.prototype),f(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new j(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(L),f(L,l,"Generator"),f(L,u,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),s=i.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(s){return void r(s)}c.done?e(u):Promise.resolve(u).then(n,o)}r.a(t,function(){var t,n=(t=o().mark((function t(n,a){var c,u,s,l,f,h,p,d,y,v,g,m,_,b,w,x,k,Z,L,E,j,O,S;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r.r(e),c=r(99312),u=r(81043),s=r(88962),l=r(33368),f=r(71650),h=r(68308),p=r(82390),d=r(69205),y=r(91808),r(97393),r(85717),v=r(68144),g=r(95260),r(48932),r(73366),r(36226),m=r(11654),_=r(23754),b=r(10009),w=r(83849),!(x=n([_,b])).then){t.next=32;break}return t.next=28,x;case 28:t.t1=t.sent,t.t0=(0,t.t1)(),t.next=33;break;case 32:t.t0=x;case 33:k=t.t0,Z=i(k,2),_=Z[0],b=Z[1],S={views:[{strategy:{type:"energy"}}]},(0,y.Z)([(0,g.Mo)("ha-panel-energy")],(function(t,e){var r=function(e){function r(){var e;(0,f.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=(0,h.Z)(this,r,[].concat(o)),t((0,p.Z)(e)),e}return(0,d.Z)(r,e),(0,l.Z)(r)}(e);return{F:r,d:[{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean,reflect:!0})],key:"narrow",value:function(){return!1}},{kind:"field",decorators:[(0,g.SB)()],key:"_viewIndex",value:function(){return 0}},{kind:"field",decorators:[(0,g.SB)()],key:"_lovelace",value:void 0},{kind:"method",key:"willUpdate",value:function(t){if(this.hasUpdated||this.hass.loadFragmentTranslation("lovelace"),t.has("hass")){var e=t.get("hass");(null==e?void 0:e.locale)!==this.hass.locale&&this._setLovelace(),e&&e.localize!==this.hass.localize&&this._reloadView()}}},{kind:"method",key:"render",value:function(){var t;return(0,v.dy)(L||(L=(0,s.Z)([' <div class="header"> <div class="toolbar"> <ha-menu-button slot="navigationIcon" .hass="','" .narrow="','"></ha-menu-button> ',' <hui-energy-period-selector .hass="','" collectionKey="energy_dashboard"> ',' </hui-energy-period-selector> </div> </div> <hui-view id="view" .hass="','" .narrow="','" .lovelace="','" .index="','" @reload-energy-panel="','"></hui-view> '])),this.hass,this.narrow,this.narrow?v.Ld:(0,v.dy)(E||(E=(0,s.Z)(['<div class="main-title"> '," </div>"])),this.hass.localize("panel.energy")),this.hass,null!==(t=this.hass.user)&&void 0!==t&&t.is_admin?(0,v.dy)(j||(j=(0,s.Z)([' <ha-list-item slot="overflow-menu" graphic="icon" @request-selected="','"> <ha-svg-icon slot="graphic" .path="','"> </ha-svg-icon> '," </ha-list-item> "])),this._navigateConfig,"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",this.hass.localize("ui.panel.energy.configure")):v.Ld,this.hass,this.narrow,this._lovelace,this._viewIndex,this._reloadView)}},{kind:"method",key:"_setLovelace",value:function(){var t,e;this._lovelace={config:S,rawConfig:S,editMode:!1,urlPath:"energy",mode:"generated",locale:this.hass.locale,enableFullEditMode:function(){},saveConfig:(e=(0,u.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)}),deleteConfig:(t=(0,u.Z)((0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",void 0);case 1:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),setEditMode:function(){}}}},{kind:"method",key:"_navigateConfig",value:function(t){t.stopPropagation(),(0,w.c)("/config/energy?historyBack=1")}},{kind:"method",key:"_reloadView",value:function(){var t=this._lovelace.config;this._lovelace=Object.assign(Object.assign({},this._lovelace),{},{config:Object.assign(Object.assign({},t),{},{views:[Object.assign({},t.views[0])]})})}},{kind:"get",static:!0,key:"styles",value:function(){return[m.Qx,(0,v.iv)(O||(O=(0,s.Z)([":host hui-energy-period-selector{width:100%;padding-left:32px;padding-inline-start:32px;--disabled-text-color:rgba(var(--rgb-text-primary-color), 0.5);direction:var(--direction);--date-range-picker-max-height:calc(100vh - 80px)}:host([narrow]) hui-energy-period-selector{padding-left:0px;padding-inline-start:0px}:host{-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none}.header{background-color:var(--app-header-background-color);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);position:fixed;top:0;width:var(--mdc-top-app-bar-width,100%);padding-top:env(safe-area-inset-top);z-index:4;transition:box-shadow .2s linear;display:flex;flex-direction:row}:host([scrolled]) .header{box-shadow:var(--mdc-top-app-bar-fixed-box-shadow,0px 2px 4px -1px rgba(0,0,0,.2),0px 4px 5px 0px rgba(0,0,0,.14),0px 1px 10px 0px rgba(0,0,0,.12))}.toolbar{height:var(--header-height);display:flex;flex:1;align-items:center;font-size:20px;padding:0px 12px;font-weight:400;box-sizing:border-box}@media (max-width:599px){.toolbar{padding:0 4px}}.main-title{margin:0 0 0 24px;line-height:20px;flex-grow:1}#view{position:relative;display:flex;padding-top:calc(var(--header-height) + env(safe-area-inset-top));min-height:100vh;box-sizing:border-box;padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right);padding-bottom:env(safe-area-inset-bottom)}hui-view{background:var(--lovelace-background,var(--primary-background-color))}#view>*{flex:1 1 100%;max-width:100%}"])))]}}]}}),v.oi),a(),t.next=46;break;case 43:t.prev=43,t.t2=t.catch(0),a(t.t2);case 46:case"end":return t.stop()}}),t,null,[[0,43]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t,e){return n.apply(this,arguments)}}())}}]);
//# sourceMappingURL=61873.kltRTEbMeCo.js.map