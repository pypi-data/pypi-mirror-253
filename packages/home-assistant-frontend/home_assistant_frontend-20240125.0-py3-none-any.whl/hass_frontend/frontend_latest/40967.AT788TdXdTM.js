export const id=40967;export const ids=[40967];export const modules={31206:(e,t,s)=>{s.r(t),s.d(t,{HaCircularProgress:()=>l});var i=s(17463),o=s(34541),r=s(47838),n=(s(34131),s(22129)),a=s(68144),d=s(79932);let l=(0,i.Z)([(0,d.Mo)("ha-circular-progress")],(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"field",decorators:[(0,d.Cb)({attribute:"aria-label",type:String})],key:"ariaLabel",value:()=>"Loading"},{kind:"field",decorators:[(0,d.Cb)()],key:"size",value:()=>"medium"},{kind:"method",key:"updated",value:function(e){if((0,o.Z)((0,r.Z)(s.prototype),"updated",this).call(this,e),e.has("size"))switch(this.size){case"tiny":this.style.setProperty("--md-circular-progress-size","16px");break;case"small":this.style.setProperty("--md-circular-progress-size","28px");break;case"medium":this.style.setProperty("--md-circular-progress-size","48px");break;case"large":this.style.setProperty("--md-circular-progress-size","68px")}}},{kind:"get",static:!0,key:"styles",value:function(){return[...(0,o.Z)((0,r.Z)(s),"styles",this),a.iv`:host{--md-sys-color-primary:var(--primary-color);--md-circular-progress-size:48px}`]}}]}}),n.B)},65253:(e,t,s)=>{s.d(t,{CE:()=>o,FH:()=>b,Nq:()=>a,Pb:()=>i,fm:()=>l,h8:()=>d,r4:()=>n,uh:()=>r});const i="system-admin",o="system-users",r=async e=>e.callWS({type:"config/auth/list"}),n=async(e,t,s,i)=>e.callWS({type:"config/auth/create",name:t,group_ids:s,local_only:i}),a=async(e,t,s)=>e.callWS({...s,type:"config/auth/update",user_id:t}),d=async(e,t)=>e.callWS({type:"config/auth/delete",user_id:t}),l=e=>e?e.trim().split(" ").slice(0,3).map((e=>e.substring(0,1))).join(""):"?",c=32143==s.j?"M12 2C6.47 2 2 6.5 2 12C2 17.5 6.5 22 12 22S22 17.5 22 12 17.5 2 12 2M12 20C7.58 20 4 16.42 4 12C4 7.58 7.58 4 12 4S20 7.58 20 12C20 16.42 16.42 20 12 20M8 14L7 8L10 10L12 7L14 10L17 8L16 14H8M8.56 16C8.22 16 8 15.78 8 15.44V15H16V15.44C16 15.78 15.78 16 15.44 16H8.56Z":null,h=32143==s.j?"M11,7H15V9H11V11H13A2,2 0 0,1 15,13V15A2,2 0 0,1 13,17H9V15H13V13H11A2,2 0 0,1 9,11V9A2,2 0 0,1 11,7M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z":null,u=32143==s.j?"M12 20C7.6 20 4 16.4 4 12S7.6 4 12 4 20 7.6 20 12 16.4 20 12 20M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M11 14H13V17H16V12H18L12 7L6 12H8V17H11V14":null,k=32143==s.j?"M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z":null,b=(e,t,s)=>{const i=[],o=t=>e.localize(`ui.panel.config.users.${t}`);return t.is_owner&&i.push([c,o("is_owner")]),s&&t.system_generated&&i.push([h,o("is_system")]),t.local_only&&i.push([u,o("is_local")]),t.is_active||i.push([k,o("is_not_active")]),i}},97740:(e,t,s)=>{s.a(e,(async(e,t)=>{try{var i=s(17463),o=s(34541),r=s(47838),n=s(68144),a=s(79932),d=s(7323),l=s(22311),c=s(8330),h=(s(31206),s(57266)),u=s(97389),k=s(65253),b=s(44198),g=e([b]);b=(g.then?(await g)():g)[0];const y=(e,t)=>new Date(e.getTime()-1e3*t).getTime()/1e3,_=(e,t)=>(void 0!==e||void 0!==t)&&(!e||!t||e.length!==t.length||e.some((e=>!t.includes(e)))||t.some((t=>!e.includes(t))));(0,i.Z)([(0,a.Mo)("ha-logbook")],(function(e,t){class s extends t{constructor(...t){super(...t),e(this)}}return{F:s,d:[{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"time",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"entityIds",value:void 0},{kind:"field",decorators:[(0,a.Cb)({attribute:!1})],key:"deviceIds",value:void 0},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"narrow",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,reflect:!0})],key:"virtualize",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,attribute:"no-icon"})],key:"noIcon",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,attribute:"no-name"})],key:"noName",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,attribute:"show-indicator"})],key:"showIndicator",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean,attribute:"relative-time"})],key:"relativeTime",value:()=>!1},{kind:"field",decorators:[(0,a.Cb)({type:Boolean})],key:"showMoreLink",value:()=>!0},{kind:"field",decorators:[(0,a.SB)()],key:"_logbookEntries",value:void 0},{kind:"field",decorators:[(0,a.SB)()],key:"_traceContexts",value:()=>({})},{kind:"field",decorators:[(0,a.SB)()],key:"_userIdToName",value:()=>({})},{kind:"field",decorators:[(0,a.SB)()],key:"_error",value:void 0},{kind:"field",key:"_subscribed",value:void 0},{kind:"field",key:"_liveUpdatesEnabled",value:()=>!0},{kind:"field",key:"_pendingStreamMessages",value:()=>[]},{kind:"field",key:"_throttleGetLogbookEntries",value(){return(0,c.P)((()=>this._getLogBookData()),1e3)}},{kind:"method",key:"render",value:function(){return(0,d.p)(this.hass,"logbook")?this._error?n.dy`<div class="no-entries"> ${`${this.hass.localize("ui.components.logbook.retrieval_error")}: ${this._error}`} </div>`:void 0===this._logbookEntries?n.dy` <div class="progress-wrapper"> <ha-circular-progress indeterminate></ha-circular-progress> </div> `:0===this._logbookEntries.length?n.dy`<div class="no-entries"> ${this.hass.localize("ui.components.logbook.entries_not_found")} </div>`:n.dy` <ha-logbook-renderer .hass="${this.hass}" .narrow="${this.narrow}" .virtualize="${this.virtualize}" .noIcon="${this.noIcon}" .noName="${this.noName}" .showIndicator="${this.showIndicator}" .relativeTime="${this.relativeTime}" .entries="${this._logbookEntries}" .traceContexts="${this._traceContexts}" .userIdToName="${this._userIdToName}" @hass-logbook-live="${this._handleLogbookLive}"></ha-logbook-renderer> `:n.Ld}},{kind:"method",key:"refresh",value:async function(e=!1){(e||!this._subscribed&&void 0!==this._logbookEntries)&&(this._throttleGetLogbookEntries.cancel(),this._updateTraceContexts.cancel(),this._updateUsers.cancel(),await this._unsubscribeSetLoading(),e?this._getLogBookData():this._throttleGetLogbookEntries())}},{kind:"method",key:"shouldUpdate",value:function(e){if(1!==e.size||!e.has("hass"))return!0;const t=e.get("hass");return!t||t.localize!==this.hass.localize}},{kind:"method",key:"willUpdate",value:function(e){let t=e.has("time");for(const s of["entityIds","deviceIds"]){if(!e.has(s))continue;const i=e.get(s),o=this[s];if(_(i,o)){t=!0;break}}t&&this.refresh(!0)}},{kind:"method",key:"_handleLogbookLive",value:function(e){e.detail.enable&&!this._liveUpdatesEnabled&&(this._pendingStreamMessages.forEach((e=>this._processStreamMessage(e))),this._pendingStreamMessages=[]),this._liveUpdatesEnabled=e.detail.enable}},{kind:"get",key:"_filterAlwaysEmptyResults",value:function(){const e=this.entityIds,t=this.deviceIds;return Boolean(e||t)&&(!e||0===e.length)&&(!t||0===t.length)}},{kind:"method",key:"_unsubscribe",value:async function(){if(this._subscribed){const e=await this._subscribed;if(e)try{await e()}catch(e){}this._subscribed=void 0}}},{kind:"method",key:"connectedCallback",value:function(){(0,o.Z)((0,r.Z)(s.prototype),"connectedCallback",this).call(this),this.hasUpdated&&this._subscribeLogbookPeriod(this._calculateLogbookPeriod())}},{kind:"method",key:"disconnectedCallback",value:function(){(0,o.Z)((0,r.Z)(s.prototype),"disconnectedCallback",this).call(this),this._unsubscribeSetLoading()}},{kind:"method",key:"_unsubscribeSetLoading",value:async function(){await this._unsubscribe(),this._logbookEntries=void 0,this._pendingStreamMessages=[]}},{kind:"method",key:"_unsubscribeNoResults",value:async function(){await this._unsubscribe(),this._logbookEntries=[],this._pendingStreamMessages=[]}},{kind:"method",key:"_calculateLogbookPeriod",value:function(){const e=new Date;if("range"in this.time)return{now:e,startTime:this.time.range[0],endTime:this.time.range[1],purgeBeforePythonTime:void 0};if("recent"in this.time){const t=y(e,this.time.recent);return{now:e,startTime:new Date(1e3*t),endTime:new Date(e.getTime()+31536e6),purgeBeforePythonTime:y(e,this.time.recent)}}throw new Error("Unexpected time specified")}},{kind:"method",key:"_subscribeLogbookPeriod",value:function(e){return this._subscribed||(this._subscribed=(0,h.Yc)(this.hass,(e=>{this._subscribed&&this._processOrQueueStreamMessage(e)}),e.startTime.toISOString(),e.endTime.toISOString(),this.entityIds,this.deviceIds).catch((e=>{this._subscribed=void 0,this._error=e}))),!0}},{kind:"method",key:"_getLogBookData",value:async function(){var e;if(this._error=void 0,this._filterAlwaysEmptyResults)return void this._unsubscribeNoResults();const t=this._calculateLogbookPeriod();t.startTime>t.now?this._unsubscribeNoResults():(this._updateUsers(),null!==(e=this.hass.user)&&void 0!==e&&e.is_admin&&this._updateTraceContexts(),this._subscribeLogbookPeriod(t))}},{kind:"field",key:"_nonExpiredRecords",value(){return e=>this._logbookEntries?e?this._logbookEntries.filter((t=>t.when>e)):this._logbookEntries:[]}},{kind:"field",key:"_processOrQueueStreamMessage",value(){return e=>{this._liveUpdatesEnabled?this._processStreamMessage(e):this._pendingStreamMessages.push(e)}}},{kind:"field",key:"_processStreamMessage",value(){return e=>{const t="recent"in this.time?y(new Date,this.time.recent):void 0,s=[...e.events].reverse();if(!this._logbookEntries||!this._logbookEntries.length)return void(this._logbookEntries=s);if(!s.length)return;const i=this._nonExpiredRecords(t);i.length?s[s.length-1].when>i[0].when?this._logbookEntries=s.concat(i):i[i.length-1].when>s[0].when?this._logbookEntries=i.concat(s):this._logbookEntries=i.concat(s).sort(((e,t)=>t.when-e.when)):this._logbookEntries=s}}},{kind:"field",key:"_updateTraceContexts",value(){return(0,c.P)((async()=>{this._traceContexts=await(0,u.U_)(this.hass)}),6e4)}},{kind:"field",key:"_updateUsers",value(){return(0,c.P)((async()=>{var e;const t={},s=(null===(e=this.hass.user)||void 0===e?void 0:e.is_admin)&&(0,k.uh)(this.hass);for(const e of Object.values(this.hass.states))e.attributes.user_id&&"person"===(0,l.N)(e)&&(t[e.attributes.user_id]=e.attributes.friendly_name);if(s){const e=await s;for(const s of e)s.id in t||(t[s.id]=s.name)}this._userIdToName=t}),6e4)}},{kind:"get",static:!0,key:"styles",value:function(){return[n.iv`:host{display:block}:host([virtualize]){height:100%}.no-entries{text-align:center;padding:16px;color:var(--secondary-text-color)}.progress-wrapper{display:flex;justify-content:center;height:100%;align-items:center}`]}}]}}),n.oi);t()}catch(e){t(e)}}))},11254:(e,t,s)=>{s.d(t,{RU:()=>o,X1:()=>i,u4:()=>r,zC:()=>n});const i=e=>`https://brands.home-assistant.io/${e.brand?"brands/":""}${e.useFallback?"_/":""}${e.domain}/${e.darkOptimized?"dark_":""}${e.type}.png`,o=e=>`https://brands.home-assistant.io/hardware/${e.category}/${e.darkOptimized?"dark_":""}${e.manufacturer}${e.model?`_${e.model}`:""}.png`,r=e=>e.split("/")[4],n=e=>e.startsWith("https://brands.home-assistant.io/")}};
//# sourceMappingURL=40967.AT788TdXdTM.js.map