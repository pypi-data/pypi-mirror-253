import{S as fe,i as ce,s as ue,k as T,a as X,q as de,e as I,l as z,m as M,h as k,c as x,r as he,n as D,_ as b,p as W,b as P,U as A,Y as be,v as U,d as v,f as Y,g as p,u as _e,O as ve,P as ke,$ as we,a0 as te,y as H,z as K,A as O,B as q,H as Se,V as $e,Z as ye}from"./index.31767f9c.js";import{aa as Ve,as as Ee,am as N,Z as Pe,an as Ie,aA as Fe,aP as Ne,$ as Ae,az as De,aH as Le,d as Re,bT as Ce,aQ as Te,bU as ze,bV as Me,ah as Ue}from"./Commands.17f665bc.js";import{C as Ye,a as He}from"./ChevronUp.baa1201b.js";import{s as le}from"./notificationsStore.680ffd53.js";function ne(r,e,l){const t=r.slice();return t[2]=e[l],t}function Ke(r){let e,l;return e=new Ye({}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Oe(r){let e,l;return e=new He({}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function ae(r){var o;let e,l=(r[0].formattedValue||((o=r[0].children)!=null&&o.length?"":"n/a"))+"",t,n;return{c(){e=T("div"),t=de(l),this.h()},l(i){e=z(i,"DIV",{title:!0,class:!0});var s=M(e);t=he(s,l),s.forEach(k),this.h()},h(){var i,s;D(e,"title",n=(i=r[0].value)==null?void 0:i.toString()),D(e,"class","truncated text-right svelte-1woyz4e"),b(e,"italic",!r[0].formattedValue&&!((s=r[0].children)!=null&&s.length))},m(i,s){P(i,e,s),A(e,t)},p(i,s){var a,f,c;s&1&&l!==(l=(i[0].formattedValue||((a=i[0].children)!=null&&a.length?"":"n/a"))+"")&&_e(t,l),s&1&&n!==(n=(f=i[0].value)==null?void 0:f.toString())&&D(e,"title",n),s&1&&b(e,"italic",!i[0].formattedValue&&!((c=i[0].children)!=null&&c.length))},d(i){i&&k(e)}}}function ie(r){let e,l=[],t=new Map,n,o,i=r[0].children;const s=a=>Ve(a[2].path);for(let a=0;a<i.length;a+=1){let f=ne(r,i,a),c=s(f);t.set(c,l[a]=re(c,f))}return{c(){e=T("div");for(let a=0;a<l.length;a+=1)l[a].c();this.h()},l(a){e=z(a,"DIV",{});var f=M(e);for(let c=0;c<l.length;c+=1)l[c].l(f);f.forEach(k),this.h()},h(){b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal)},m(a,f){P(a,e,f);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(e,null);o=!0},p(a,f){f&1&&(i=a[0].children,U(),l=ve(l,f,s,1,a,i,t,e,ke,re,null,ne),Y()),(!o||f&1)&&b(e,"bg-blue-100",a[0].isSignal),(!o||f&1)&&b(e,"bg-emerald-100",a[0].isPreviewSignal)},i(a){if(!o){for(let f=0;f<i.length;f+=1)p(l[f]);a&&we(()=>{o&&(n||(n=te(e,le,{},!0)),n.run(1))}),o=!0}},o(a){for(let f=0;f<l.length;f+=1)v(l[f]);a&&(n||(n=te(e,le,{},!1)),n.run(0)),o=!1},d(a){a&&k(e);for(let f=0;f<l.length;f+=1)l[f].d();a&&n&&n.end()}}}function re(r,e){let l,t,n;return t=new ge({props:{node:e[2]}}),{key:r,first:null,c(){l=I(),H(t.$$.fragment),this.h()},l(o){l=I(),K(t.$$.fragment,o),this.h()},h(){this.first=l},m(o,i){P(o,l,i),O(t,o,i),n=!0},p(o,i){e=o;const s={};i&1&&(s.node=e[2]),t.$set(s)},i(o){n||(p(t.$$.fragment,o),n=!0)},o(o){v(t.$$.fragment,o),n=!1},d(o){o&&k(l),q(t,o)}}}function qe(r){var Z;let e,l,t,n,o,i,s=r[0].fieldName+"",a,f,c,d,g,S,y;const L=[Oe,Ke],w=[];function B(u,h){return u[0].expanded?0:1}t=B(r),n=w[t]=L[t](r);let m=(r[0].formattedValue||!((Z=r[0].children)!=null&&Z.length))&&ae(r),_=r[0].children&&r[0].expanded&&ie(r);return{c(){e=T("div"),l=T("button"),n.c(),o=X(),i=T("div"),a=de(s),f=X(),m&&m.c(),c=X(),_&&_.c(),d=I(),this.h()},l(u){e=z(u,"DIV",{class:!0});var h=M(e);l=z(h,"BUTTON",{class:!0});var $=M(l);n.l($),$.forEach(k),o=x(h),i=z(h,"DIV",{class:!0});var V=M(i);a=he(V,s),V.forEach(k),f=x(h),m&&m.l(h),h.forEach(k),c=x(u),_&&_.l(u),d=I(),this.h()},h(){var u;D(l,"class","p-1"),b(l,"invisible",!((u=r[0].children)!=null&&u.length)),D(i,"class","truncated font-mono font-medium text-neutral-500 svelte-1woyz4e"),W(i,"min-width","10ch"),D(e,"class","flex items-center gap-x-1 pr-2 text-xs"),b(e,"bg-blue-100",r[0].isSignal),b(e,"bg-emerald-100",r[0].isPreviewSignal),b(e,"bg-teal-100",r[0].isLabel),W(e,"padding-left",.25+(r[0].path.length-1)*.5+"rem"),W(e,"line-height","1.7rem")},m(u,h){P(u,e,h),A(e,l),w[t].m(l,null),A(e,o),A(e,i),A(i,a),A(e,f),m&&m.m(e,null),P(u,c,h),_&&_.m(u,h),P(u,d,h),g=!0,S||(y=be(l,"click",r[1]),S=!0)},p(u,[h]){var V,R;let $=t;t=B(u),t!==$&&(U(),v(w[$],1,1,()=>{w[$]=null}),Y(),n=w[t],n||(n=w[t]=L[t](u),n.c()),p(n,1),n.m(l,null)),(!g||h&1)&&b(l,"invisible",!((V=u[0].children)!=null&&V.length)),(!g||h&1)&&s!==(s=u[0].fieldName+"")&&_e(a,s),u[0].formattedValue||!((R=u[0].children)!=null&&R.length)?m?m.p(u,h):(m=ae(u),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!g||h&1)&&b(e,"bg-blue-100",u[0].isSignal),(!g||h&1)&&b(e,"bg-emerald-100",u[0].isPreviewSignal),(!g||h&1)&&b(e,"bg-teal-100",u[0].isLabel),h&1&&W(e,"padding-left",.25+(u[0].path.length-1)*.5+"rem"),u[0].children&&u[0].expanded?_?(_.p(u,h),h&1&&p(_,1)):(_=ie(u),_.c(),p(_,1),_.m(d.parentNode,d)):_&&(U(),v(_,1,1,()=>{_=null}),Y())},i(u){g||(p(n),p(_),g=!0)},o(u){v(n),v(_),g=!1},d(u){u&&k(e),w[t].d(),m&&m.d(),u&&k(c),_&&_.d(u),u&&k(d),S=!1,y()}}}function me(r){r.expanded=!0,r.children&&r.children.forEach(me)}function Be(r,e,l){let{node:t}=e;const n=()=>{l(0,t.expanded=!t.expanded,t),t.isSignal&&t.expanded&&me(t),l(0,t)};return r.$$set=o=>{"node"in o&&l(0,t=o.node)},[t,n]}class ge extends fe{constructor(e){super(),ce(this,e,Be,qe,ue,{node:0})}}function se(r,e,l){const t=r.slice();return t[7]=e[l],t}function Ze(r){let e,l;return e=new Re({props:{lines:3,paragraph:!0,class:"w-full"}}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p:$e,i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function je(r){let e,l,t=r[0].children||[],n=[];for(let i=0;i<t.length;i+=1)n[i]=oe(se(r,t,i));const o=i=>v(n[i],1,1,()=>{n[i]=null});return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=I()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=I()},m(i,s){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(i,s);P(i,e,s),l=!0},p(i,s){if(s&1){t=i[0].children||[];let a;for(a=0;a<t.length;a+=1){const f=se(i,t,a);n[a]?(n[a].p(f,s),p(n[a],1)):(n[a]=oe(f),n[a].c(),p(n[a],1),n[a].m(e.parentNode,e))}for(U(),a=t.length;a<n.length;a+=1)o(a);Y()}},i(i){if(!l){for(let s=0;s<t.length;s+=1)p(n[s]);l=!0}},o(i){n=n.filter(Boolean);for(let s=0;s<n.length;s+=1)v(n[s]);l=!1},d(i){ye(n,i),i&&k(e)}}}function oe(r){let e,l;return e=new ge({props:{node:r[7]}}),{c(){H(e.$$.fragment)},l(t){K(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&1&&(o.node=t[7]),e.$set(o)},i(t){l||(p(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){q(e,t)}}}function Qe(r){let e,l,t,n;const o=[je,Ze],i=[];function s(a,f){return a[0]?0:1}return e=s(r),l=i[e]=o[e](r),{c(){l.c(),t=I()},l(a){l.l(a),t=I()},m(a,f){i[e].m(a,f),P(a,t,f),n=!0},p(a,[f]){let c=e;e=s(a),e===c?i[e].p(a,f):(U(),v(i[c],1,1,()=>{i[c]=null}),Y(),l=i[e],l?l.p(a,f):(l=i[e]=o[e](a),l.c()),p(l,1),l.m(t.parentNode,t))},i(a){n||(p(l),n=!0)},o(a){v(l),n=!1},d(a){i[e].d(a),a&&k(t)}}}function We(r,e,l){let t,n,{row:o=void 0}=e,{selectRowsSchema:i=void 0}=e,{highlightedFields:s}=e;const a=Ee();Se(r,a,c=>l(5,n=c));function f(c){var u,h,$,V,R;const d=N.field(c),g=N.path(c);let S=N.value(c),y=N.span(c);if(((u=d==null?void 0:d.dtype)==null?void 0:u.type)==="string_span"&&(y=y||S,y!=null)){const E=[];for(let F=g.length-1;F>=0;F--){const G=g.slice(0,F),j=Pe(i.schema,G);let C=null;if(((h=j.map)==null?void 0:h.input_path)!=null?C=j.map.input_path:(($=j.dtype)==null?void 0:$.type)==="string"&&(C=G),C!=null){const J=o!=null?Ie(o,C):null;if(J){const Q=N.value(J);if(Q){E.push(Q.slice(y.start,y.end));break}}}}S=E}const L=((V=n.data)==null?void 0:V.some(E=>{var F;return E.name===((F=d==null?void 0:d.signal)==null?void 0:F.signal_name)}))||!1,w=d?Fe(d):!1,B=d?Ne(d):!1;let m;L||w&&(d==null?void 0:d.dtype)==null||((R=d==null?void 0:d.dtype)==null?void 0:R.type)==="embedding"||(d==null?void 0:d.repeated_field)!=null?m="":S==null?m=null:m=Ae(S);function _(E){const{[Ce]:F,[Te]:G,[ze]:j,[Me]:C,[Ue]:J,...Q}=E;return Object.values(Q).filter(pe=>{var ee;return((ee=N.field(pe))==null?void 0:ee.label)==null})}const Z=s.some(E=>De(E.path,g));return{children:Array.isArray(c)?c.map(f):_(c).map(f),fieldName:g[g.length-1],field:d,path:g,expanded:Z,isSignal:w,isLabel:B,isPreviewSignal:i!=null?Le(i,g):!1,isEmbeddingSignal:L,value:S,formattedValue:m}}return r.$$set=c=>{"row"in c&&l(2,o=c.row),"selectRowsSchema"in c&&l(3,i=c.selectRowsSchema),"highlightedFields"in c&&l(4,s=c.highlightedFields)},r.$$.update=()=>{r.$$.dirty&4&&l(0,t=o!=null?f(o):null)},[t,a,o,i,s]}class et extends fe{constructor(e){super(),ce(this,e,We,Qe,ue,{row:2,selectRowsSchema:3,highlightedFields:4})}}export{et as I};
