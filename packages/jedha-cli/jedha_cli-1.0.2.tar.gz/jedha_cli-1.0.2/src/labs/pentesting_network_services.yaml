version: "3"

services:
  pentest-network-ftp:
    container_name: pentest-network-ftp
    image: jedha/lab-pentest-network-ftp
    ports:
      - "21:21"
    networks:
      lab-network:
        ipv4_address: 10.10.30.2

  pentest-network-proxychains:
    container_name: pentest-network-proxychains
    image: jedha/lab-pentest-network-proxychains
    ports:
      - "22:22"
      - "80:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.3

  pentest-network-ssh:
    container_name: pentest-network-ssh
    image: jedha/lab-pentest-network-ssh
    ports:
      - "22:22"
    networks:
      lab-network:
        ipv4_address: 10.10.30.5

  pentest-network-telnet:
    container_name: pentest-network-telnet
    image: jedha/lab-pentest-network-telnet
    hostname: JEDHA{Qu1te_0ld_But_St1ll_3xists}
    ports:
      - "23:23"
    networks:
      lab-network:
        ipv4_address: 10.10.30.113

  pentest-network-nginx:
    container_name: pentest-network-nginx
    image: jedha/lab-pentest-network-nginx
    ports:
      - "80:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.207

  pentest-network-nginx-2:
    container_name: pentest-network-nginx-2
    image: jedha/lab-pentest-network-nginx-2
    ports:
      - "81:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.138

  pentest-network-apache:
    container_name: pentest-network-apache
    image: jedha/lab-pentest-network-apache
    ports:
      - "8000:80"
    networks:
      lab-network:
        ipv4_address: 10.10.30.50

  pentest-network-squid:
    container_name: pentest-network-squid
    image: jedha/lab-pentest-network-squid
    ports:
      - "3128:3128"
    hostname: JEDHA{Why_N0t_ProxY}
    networks:
      lab-network:
        ipv4_address: 10.10.30.55

  pentest-network-smb:
    container_name: pentest-network-smb
    image: jedha/lab-pentest-network-smb
    tty: true
    ports:
      - "139:139"
      - "445:445"
    networks:
      lab-network:
        ipv4_address: 10.10.30.150

  pentest-network-mysql:
    container_name: pentest-network-mysql
    image: jedha/lab-pentest-network-mysql
    command: --default-authentication-plugin=mysql_native_password
    ports:
      - "3306:3306"
    networks:
      lab-network:
        ipv4_address: 10.10.30.201
    environment:
      MYSQL_ALLOW_EMPTY_PASSWORD: 1

networks:
  lab-network:
    driver: bridge
    ipam:
      driver: default
      config:
        - subnet: 10.10.30.0/24
