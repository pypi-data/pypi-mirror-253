Metadata-Version: 2.1
Name: unKR
Version: 0.2.0
Summary: An Open Source Library for uncertain Knowledge Reasoning
Home-page: https://github.com/CodeSlogan/unKR
Author: SEUKGE
Author-email: slchen@seu.edu.cn
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pytorch-lightning (==1.5.10)
Requires-Dist: PyYAML
Requires-Dist: wandb
Requires-Dist: IPython
Requires-Dist: gensim

## unKR
uncertain Knowledge Graph

## ç¬¬ä¸€é˜¶æ®µï¼šå¤ç°UKGE

1. æ•°æ®å¤„ç†
2. æ¨¡å‹æ„å»º
3. æ•´åˆè·‘é€š



## ç¬¬äºŒé˜¶æ®µï¼šå¤ç°å…¶ä»–æ¨¡å‹
| # | Model | Paper                                                                                                                                                                                                                         | ğŸ®ğŸ´ | Notes |
| :-- | :-- |:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------| :-- |:-----|
| 1. | UKGE | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | zst |      |
| 2. | PASSLEAF | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | zst |      |
| 3. | BEUrRE | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | lyc | ğŸ§ˆ   |
| 4. | FocesE | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | lyc |      |
| 5. | UKGsE | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | lw |      |
| 6. | GTransE | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | lw |      |
| 7. | GMUC | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                         | csl |   ğŸ’¡   |
| 8. | GMUC+ | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | csl |    ğŸ’¡  |
| 9. | UPGAT | [To be continue...](https://github.com/CodeSlogan/unKR)                                                                                                                                                                       | xjy |      |


### æ¨¡å‹å®ç°è¿›åº¦åŠé—®é¢˜
è®°å½•å®ç°å…¶å®ƒæ¨¡å‹æ—¶ï¼Œé‡åˆ°çš„æš‚æ—¶æ— æ³•è§£å†³çš„é—®é¢˜ï¼Œä»¥ä¾¿ç»„å†…å¤æŸ¥
â€¦â€¦

#### BEUrRE
1. å¯ä»¥å†è®¨è®ºä¸€ä¸‹BaseLitModelé‡Œå…³äºæŒ‡æ ‡çš„é€»è¾‘ï¼Œæ¯ä¸ªæ¨¡å‹ä¸éœ€è¦æ‰€æœ‰æŒ‡æ ‡éƒ½æµ‹é‡ï¼Œä¾‹å¦‚è€—æ—¶çš„NDCGå¯ä»¥é»˜è®¤å…³é—­ã€‚
2. Pyrcharmä¼šè‡ªåŠ¨è¯†åˆ«srcä¸ºæºæ–‡ä»¶ï¼Œå› æ­¤èƒ½æ‰¾åˆ°src.unKRï¼Œä½¿ç”¨å…¶ä»–ç¼–è¯‘å™¨æˆ–æœåŠ¡å™¨åˆ™æ— æ³•è¯†åˆ«ï¼Œå› æ­¤å¯ä»¥è€ƒè™‘å°†unKRç§»å‡ºæ›¿ä»£srcæ–‡ä»¶å¤¹ï¼Ÿ
3. ä¸ºä»€ä¹ˆè®­ç»ƒä¸­ä¼šå‡ºç°Hit@10æŒ‡æ ‡ä¸Šå‡ï¼Œä½†MAEå’ŒMSEæŒ‡æ ‡åŒæ—¶ä¹Ÿåœ¨ä¸Šå‡çš„æƒ…å†µï¼Ÿ

#### GMUC & GMUCp
1. ~~MSEï¼ŒMAEç½®ä¿¡åº¦é¢„æµ‹ç»“æœè¾¾åˆ°è®ºæ–‡æ°´å¹³ï¼Œä½†æ˜¯é“¾è·¯é¢„æµ‹çš„mrrï¼Œhits@1ç­‰æŒ‡æ ‡å¼‚å¸¸ï¼Œä¸åŸæ–‡å·®è·è¾ƒå¤§~~
2. ~~GMUCpæºç ä¸­çš„losså¯ä»¥é™åˆ°1ä»¥ä¸‹ï¼Œä½†åœ¨æœ¬æ¡†æ¶ä¸­å§‹ç»ˆå¡åœ¨4ç‚¹å¤šï¼Œæš‚æœªæ‰¾åˆ°åŸå› ï¼Œå› æ­¤å¯¼è‡´é“¾è·¯é¢„æµ‹æ•ˆæœå·®~~
3. ~~GMUCpè¶Šè®­ç»ƒï¼Œæ•ˆæœåè€Œè¶Šå·®ï¼Œåˆå§‹çš„ä»…è®­ç»ƒä¸€ä¸ªepochï¼Œhits10èƒ½è¾¾åˆ°0.2å·¦å³ï¼Œè€Œè®­ç»ƒäº†600epochï¼Œé¢„æµ‹ç»“æœä¸åˆ°0.1~~

æ€»ç»“ï¼šåœ¨è¯¥æ¡†æ¶ä¸‹è®­ç»ƒæ¨¡å‹ï¼Œé¡»é€‚å½“è°ƒå°å­¦ä¹ ç‡ï¼Œæ–¹èƒ½å¾—åˆ°ä¸è®ºæ–‡ä¸­æ¥è¿‘çš„ç»“æœã€‚
#### PASSELAF
~~1. è®ºæ–‡æŒ‡æ ‡çš„æ•°é‡çº§å­˜ç–‘~~
~~2. RotatEåŠ è¿›æ¥åçš„è¡¨ç°æ˜æ˜¾ç›¸æ¯”å¦å¤–ä¸¤ä¸ªæŒ‡æ ‡è€Œè¨€è¾ƒå·®ï¼Œåç»­éœ€æŸ¥æ˜åŸå› ~~

#### GeneratePSL
æ­¤éƒ¨åˆ†ä»¥linqså›¢é˜Ÿå¼€å‘çš„PSLç¨‹åºä¸ºæ ¸å¿ƒï¼Œä¸ºunKRç”¨æˆ·æä¾›äº†ä¸€ä¸ªé€‚ç”¨äºæˆ‘ä»¬æ•°æ®æ ¼å¼çš„PSLæ¥å£ï¼Œå¹¶å…è®¸ç”¨æˆ·è‡ªå®šä¹‰å…³ç³»ä¸è°“è¯ï¼Œä¸è¿‡ç›®å‰ä¸Šä¼ çš„ç¤ºä¾‹ä¸­ï¼Œå—å†…å­˜é™åˆ¶ï¼Œobsç•¥å°äºå®é™…å€¼ï¼Œç”Ÿæˆçš„softlogicä¹Ÿè¾ƒå°ï¼Œä½†æ˜¯å·²èƒ½å®Œæ•´åœ°è¿è¡Œæ•´ä¸ªæµç¨‹ï¼Œåç»­ä¼šè·‘å‡ºæ¥ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ã€‚

## ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹ç»“æœ

### NL27k

|                   |   é“¾    | æ¥      | é¢„       | æµ‹         |        |           |        |        | ç½®ä¿¡åº¦    |   é¢„æµ‹   |
|:-----------------:|:------:|--------|---------|-----------|--------|-----------|--------|--------|--------|:------:|
|        æ¨¡å‹         | Hits@1 | Hits@5 | Hits@10 | MR        | MRR    | WMR       | WMRR   | nDCG   | MSE    |  MAE   |
|       UKGE        | 0.3650 | 0.5390 | 0.6110  | 155.9530  | 0.4510 | 134.0200  | 0.4810 | 0.7538 | 0.0310 | 0.0720 |
|     UKGE_PSL      | 0.4350 | 0.6270 | 0.7050  | 154.2640  | 0.5280 | 131.4950  | 0.5610 | 0.8267 | 0.0290 | 0.0680 |
| PASSLEAF_DistMult | 0.3240 | 0.5040 | 0.5840  | 256.2660  | 0.4110 | 222.6580  | 0.4630 | 0.7393 | 0.0220 | 0.0530 |
| PASSLEAF_ComplEx  | 0.3280 | 0.5060 | 0.5850  | 267.5960  | 0.4150 | 232.4220  | 0.4660 | 0.7450 | 0.0230 | 0.0520 |
|  PASSLEAF_RotatE  | 0.5620 | 0.7540 | 0.8010  | 128.8960  | 0.6510 | 111.2940  | 0.6970 | 0.8983 | 0.0330 | 0.0820 |
|      BEUrRE       | 0.2430 | 0.5210 | 0.5990  | 597.7600  | 0.2890 | 466.1090  | 0.3179 | 0.7083 | 0.0872 | 0.2179 |
| FocusE(DistMult)  | 0.7459 | 0.8919 | 0.9419  | 408.2340  | 0.8180 | 366.8210  | 0.8429 | 0.9332 | /      |   /    |
|       UKGsE       | 0.0030 | 0.0110 | 0.0230  | 1822.4110 | 0.0120 | 1018.4010  | 0.0410 | 0.3201 | 0.1100 | 0.2630 |
|      GTransE      | 0.1740 | 0.3920 | 0.4620  | 1230.9091 | 0.2790 | 1159.0580 | 0.3000 | 0.6026 | /      |   /    |
|       GMUC        | 0.3589 | 0.5189 | 0.5960  | 67.2689   | 0.4399 | 67.1389   | 0.4420 | 0.6349 | 0.0280 | 0.1209 |
|       GMUC+       | 0.3499 | 0.5490 | 0.6480  | 44.2350   | 0.4480 | 44.0069   | 0.4490 | 0.6309 | 0.0149 | 0.0970 |
|       UPGAT       |        |        |         |           |        |           |        |        |        |        |


### CN15k

|          |   é“¾    | æ¥      | é¢„       | æµ‹         |        |           |        |        | ç½®ä¿¡åº¦    | é¢„æµ‹     |
|:--------:|:------:|--------|---------|-----------|--------|-----------|--------|--------|--------|--------|
|  æ¨¡å‹      | Hits@1 | Hits@5 | Hits@10 | MR        | MRR    | WMR       | WMRR   | nDCG   | MSE    | MAE    |
|       UKGE      | 0.0800 | 0.1650 | 0.2090  | 2044.1680 | 0.1240 | 1876.6320 | 0.1370 | 0.6140 | 0.2160 | 0.3830 |
|     UKGE_PSL    | 0.0800 | 0.1740 | 0.2240  | 1906.1050 | 0.1290 | 1738.6910 | 0.1420 | 0.6211 | 0.2190 | 0.3830 |
|PASSLEAF_DistMult | 0.0590 | 0.1510 | 0.1930  | 1629.4900 | 0.1060 | 1484.8370 | 0.1200 | 0.5771 | 0.1800 | 0.3390 |
| PASSLEAF_ComplEx| 0.0740 | 0.1650 | 0.2040  | 1897.3080 | 0.1210 | 1727.7020 | 0.1360 | 0.5988 | 0.1750 | 0.3400 |
| PASSLEAF_RotatE | 0.0780 | 0.2150 | 0.2570  | 1631.1870 | 0.1440 | 1446.1200 | 0.1620 | 0.7010 |     
|  BEUrRE  | 0.0439 | 0.2409 | 0.2920  | 1136.7280 | 0.1390 | 1055.7650 | 0.1500 | 0.7309 | 0.1800 | 0.3529 |
|  FocusE(DistMult)  | 0.1640 | 0.2806 | 0.3429  | 2025.5419 | 0.2259 | 1890.2019 | 0.2489 | 0.8325 | /      | /      |
|  UKGsE   | 0.0030 | 0.0110 | 0.0210  | 1858.2120 | 0.0110 | 1068.9890 | 0.0370 | 0.3124 | 0.1060 | 0.2570 |
| GTransE  | 0.0490 | 0.1710 | 0.2240  | 1090.5320 | 0.1110 | 959.9320  | 0.1190 | 0.4907 | /      | /      |
|   GMUC   | 0.0120 | 0.0890 | 0.1539  | 94.0910   | 0.0630 | 93.8160   | 0.0619 | 0.2070 | 0.0299 | 0.1599 |
|  UPGAT   |        |        |         |           |        |           |        |        |        |        |


### PPI5k

|           |   é“¾    | æ¥      | é¢„       | æµ‹        |        |          |        |        | ç½®ä¿¡åº¦    | é¢„æµ‹     |
|:---------:|:------:|--------|---------|----------|--------|----------|--------|--------|--------|--------|
| æ¨¡å‹        | Hits@1 | Hits@5 | Hits@10 | MR       | MRR    | WMR      | WMRR   | nDCG   | MSE    | MAE    |
|   UKGE    | 0.6090 | 0.9090 | 0.9560  | 22.1730  | 0.7430 | 16.2180  | 0.7680 | 0.9836 | 0.0030   | 0.0240  |
|     UKGE_PSL    | 0.6150 | 0.9180 | 0.9630  | 20.9030  | 0.7500 | 15.4580  | 0.7740 | 0.9839 | 0.0030   | 0.0230  |
| PASSLEAF_DistMult  | 0.3560 | 0.7900 | 0.9010  | 11.5460  | 0.5480 | 11.2380  | 0.5840 | 0.9544 | 0.0030   | 0.0220  |
|PASSLEAF_ComplEx | 0.4440 | 0.8350 | 0.9300  | 9.0550   | 0.6200 | 8.3860   | 0.6530 | 0.9654 | 0.0030   | 0.0220  |
| PASSLEAF_RotatE | 0.3670 | 0.8780 | 0.9410  | 7.7170   | 0.6000 | 6.9570   | 0.6210 | 0.9611 | 0.0040   | 0.0290  |
|  BEUrRE   |  0.0   | 0.8190 | 0.9190  | 9.8590   | 0.3689 | 7.5050   | 0.4050 | 0.9160 | 0.0170  | 0.0820|
|  FocusE(DistMult)   | 0.9359 | 0.9840 | 0.9929  | 4.6939   | 0.9610 | 5.3559   | 0.9679 | 0.9483 | /      | /      |
|   UKGsE   | 0.1980 | 0.4480 | 0.6080  | 58.6620  | 0.3300 | 39.7310  | 0.3940 | 0.9124 | 0.0080 | 0.0530 |
|  GTransE  | 0.0120 | 0.2070 | 0.3120  | 160.7230 | 0.1210 | 109.0610 | 0.1780 | 0.7669 | /      | /      |
|   UPGAT   |        |        |         |          |        |          |        |        |        |        |


## è¯„æµ‹ä»»åŠ¡åŠæŒ‡æ ‡
1. ç½®ä¿¡åº¦é¢„æµ‹ä»»åŠ¡ï¼š
   
   1ï¼‰MSEä¸ºå‡æ–¹è¯¯å·®ï¼ˆé¢„æµ‹å€¼ä¸çœŸå®å€¼çš„ç»å¯¹å¹³æ–¹è¯¯å·®çš„å¹³å‡å€¼ï¼‰
   $${ MSE }=\frac{1}{m} \sum_{i=1}^m\left(y_i-\hat{y}_i\right)^2$$

   2ï¼‰MAEä¸ºå¹³å‡ç»å¯¹è¯¯å·®ï¼ˆé¢„æµ‹å€¼ä¸çœŸå®å€¼çš„ç»å¯¹è¯¯å·®çš„å¹³å‡å€¼ï¼‰
   $${ MAE }=\frac{1}{m} \sum_{i=1}^m\left|\hat{y}_i-y_i\right|$$
2. é“¾æ¥é¢„æµ‹ä»»åŠ¡ï¼š
   
   1ï¼‰Hits@kæŒ‡æ ‡è¶Šå¤§è¶Šå¥½(è¯¥æŒ‡æ ‡æ˜¯æŒ‡åœ¨é“¾æ¥é¢„æµ‹ä¸­æ’åå°äºkçš„ä¸‰å…ƒç»„çš„å¹³å‡å æ¯”)
   $${Hits} @ k=\frac{1}{|S|} \sum_{i=1}^{|S|} \mathbb{I}\left({rank}_i \leqslant k\right)$$

   2ï¼‰MRæŒ‡æ ‡è¶Šå°è¶Šå¥½ï¼ˆæ’åè¶Šé å‰rankè¶Šå°ï¼Œæ±‚å’Œä¹Ÿå°±æ›´å°ï¼‰
   $${MR}=\frac{1}{|S|} \sum_{i=1}^{|S|} {rank}_i$$

   3ï¼‰MRRæŒ‡æ ‡è¶Šå¤§è¶Šå¥½ï¼ˆå³é¢„æµ‹æ’åè¶Šé å‰ï¼Œå€’æ•°å°±è¶Šå¤§ï¼Œæ±‚å’Œç»“æœè¶Šå¤§è¶Šå¥½ï¼‰
   $${MRR}=\frac{1}{|S|} \sum_{i=1}^{|S|} \frac{1}{{rank}_i}$$

   4ï¼‰nDCGä¸ºå½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Š

   Gain: è¡¨ç¤ºä¸€ä¸ªåˆ—è¡¨ä¸­æ‰€æœ‰itemçš„ç›¸å…³æ€§åˆ†æ•°ï¼Œrel(i)è¡¨ç¤ºitem(i)ç›¸å…³æ€§å¾—åˆ† $$Gain={rel}(i)$$

   Cumulative Gainï¼ˆCGï¼‰: è¡¨ç¤ºå¯¹Kä¸ªitemçš„Gainè¿›è¡Œç´¯åŠ    $$C G_k=\sum_{i=1}^k  {rel}(i)$$

   Discounted Cumulative Gainï¼ˆDCGï¼‰: è€ƒè™‘æ’åºé¡ºåºçš„å› ç´ ï¼Œä½¿å¾—æ’åé å‰çš„itemå¢ç›Šæ›´é«˜ï¼Œå¯¹æ’åé åçš„itemè¿›è¡ŒæŠ˜æŸ  $$D C G_k=\sum_{i=1}^k \frac{{rel}(i)}{\log _2(i+1)}$$
   
   $$I D C G_k=\sum_{i=1}^{|REL_k|} \frac{{rel}(i)}{\log _2(i+1)}$$

   Normalized DCG(nDCG): å½’ä¸€åŒ–æŠ˜æŸç´¯è®¡å¢ç›Š  $$n D C G_k=\frac{{DCG}_k} {{IDCG}_k}$$

   5ï¼‰WMRæŒ‡æ ‡è¶Šå°è¶Šå¥½ï¼ˆæ’åè¶Šé å‰rankè¶Šå°ï¼Œæ±‚å’Œä¹Ÿå°±æ›´å°ï¼‰
   $$WMR=\frac{1}{\sum_i c_i}\sum_i c_i\cdot  rank_i$$

   6ï¼‰WMRRæŒ‡æ ‡è¶Šå¤§è¶Šå¥½ï¼ˆå³é¢„æµ‹æ’åè¶Šé å‰ï¼Œå€’æ•°å°±è¶Šå¤§ï¼Œæ±‚å’Œç»“æœè¶Šå¤§è¶Šå¥½ï¼‰
   $$WMRR=\frac{1}{\sum_i c_i}\sum_i c_i\cdot  \frac{1}{rank_i}$$
   


## æ•°æ®é›†
| Dataset | Original Dataset | Entities | Relations | Uncertain Relation Facts |
|---------|------------------|----------|-----------|--------------------------|
| CN15K   | ConceptNet       | 15000    | 36        | 241158                   |
| NL27K   | NELL             | 27221    | 404       | 175412                   |
| PPI5K   | STRING           | 4999     | 7         | 271666                   |


## å‚è€ƒâ¼¯ä½œ
- NeuralKGï¼Œæµ™â¼¤å¼ â½‚ NeuralKG: An Open Source Library for Diverse Representation
Learning of Knowledge Graphs. SIGIR 2022 Demo. https://arxiv.org/pdf/2202.12571.pdf
- NeuralKG-ind: A Python Library for Inductive Knowledge
Graph Representation Learning. SIGIR 2023 Demo. https://arxiv.org/pdf/2304.14678.pdf
- GitHubâ½¹â»šï¼šhttps://github.com/zjukg/NeuralKG


