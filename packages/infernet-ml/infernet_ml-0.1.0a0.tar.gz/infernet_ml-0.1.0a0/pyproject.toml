[build-system]
requires = ["setuptools>=61.0", "setuptools-scm>=8.0"]
build-backend = "setuptools.build_meta"

[project]
name = "infernet_ml"
dynamic = [ "version" ]
description = "lightweight library to build web3 machine learning workflows"
readme = "README.md"
requires-python = ">=3.10"
classifiers = [
    "Programming Language :: Python :: 3",
    "Operating System :: OS Independent",
]

dependencies = [
    "mlflow==2.8.1",
    "python-dotenv==1.0.0"
]

[project.optional-dependencies]
all = [
    "web3==5.31.0",
    "protobuf==3.20.2",
    "onnx==1.14.1",
    "onnxconverter-common==1.14.0",
    "pandas==2.1.0",
    "sk2torch==1.2.0",
    "scikit-learn==1.3.2",
    "quart==0.19.4",
    "text-generation==0.6.1",
    "torch==2.0.1",
    "transformers==4.34.0",
    "ezkl==v3.7.6",
    # testing related
    "solc-select==1.0.4",
    "retry2==0.9.5",
    "solc-select==1.0.4",
    "black==21.9b0",
    "pre-commit==2.15.0",
    "mypy==1.7.0",
    "pytest==7.1.3",
    "pytest-asyncio==0.21.1",
    "pytest-metadata==1.7.0",
    "pytest-cov==3.0.0",
    "pytest-mock==3.12.0",
    "py-solc-x==1.1.1"
]

# proving service
proving = [
    "torch==2.0.1",
    "eth-abi==2.2.0",
    "solc-select==1.0.4",
    "protobuf==3.20.2",
    "onnx==1.14.1",
    "onnxconverter-common==1.14.0",
    "quart==0.19.4",
    "retry2==0.9.5",
    "pydantic==2.5.3",
    "sk2torch==1.2.0",
    "scikit-learn==1.3.2",
    "huggingface-hub==0.17.3"
]

# classic inference service
classic_inf = [
    "quart==0.19.4",
    "torch==2.0.1",
    "retry2==0.9.5",
    "eth-abi==2.2.0",
    "pydantic==2.5.3",
    "sk2torch==1.2.0",
    "scikit-learn==1.3.2",
    "huggingface-hub==0.17.3"
]

# llm inference service
llm_inf = [
    "quart==0.19.4",
    "text-generation==0.6.1",
    "retry2==0.9.5"
]

[tool.pytest.ini_options]
log_cli = true
log_cli_level = "INFO"
log_cli_format = "%(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)"
log_cli_date_format = "%Y-%m-%d %H:%M:%S"

[tool.setuptools_scm]
fallback_version = "0.0.0"

[tool.mypy]
exclude = ['venv', '.venv']
