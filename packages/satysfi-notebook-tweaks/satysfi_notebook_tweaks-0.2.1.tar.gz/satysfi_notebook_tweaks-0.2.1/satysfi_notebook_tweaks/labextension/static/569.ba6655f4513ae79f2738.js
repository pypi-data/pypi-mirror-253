"use strict";(self.webpackChunksatysfi_notebook_tweaks=self.webpackChunksatysfi_notebook_tweaks||[]).push([[569],{569:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var s=o(123),n=o(605),a=o(938),r=o(737);const i="satysfi-notebook-tweaks:export-pdf",l={id:"satysfi-notebook-tweaks:plugin",description:"A small tweaks for SATySFi Notebook environment.",autoStart:!0,requires:[s.ICommandPalette,a.IRenderMimeRegistry],activate:(e,t,o)=>{e.commands.addCommand(i,{label:"SATySFi Notebook: Export entire document as PDF",isVisible:()=>{var t;const o=e.shell.currentWidget;return o instanceof n.NotebookPanel&&"satysfi"===(null===(t=o.sessionContext.kernelPreference.language)||void 0===t?void 0:t.toLowerCase())},execute:async()=>{var t;const i=e.shell.currentWidget;if(!(i instanceof n.NotebookPanel&&i.model))return;const l=null===(t=i.sessionContext.session)||void 0===t?void 0:t.kernel;if(!l)return;const d=i.model.sharedModel.cells.filter((({cell_type:e})=>"code"===e)),c=d.filter((({source:e})=>e.startsWith("%!"))).map((({source:e})=>e.slice(2))),u=d.filter((({source:e})=>!e.startsWith("%!")&&!e.startsWith("%?")&&!e.startsWith("%%"))).map((({source:e})=>e)).join("\n"),m=await e.serviceManager.kernels.startNew({name:l.name},{clientId:l.clientId,username:l.username,handleComms:l.handleComms});m.requestExecute({code:"%% render-in-pdf"}),c.forEach((e=>m.requestExecute({code:e}))),m.requestExecute({code:u}).onIOPub=t=>{if(!r.KernelMessage.isExecuteResultMsg(t))return;m.shutdown();const n=o.createRenderer("application/pdf"),l=new s.MainAreaWidget({content:n});l.title.label=`PDF Export: ${i.title.label}`,l.id=`${i.id}-exported-pdf`,l.revealed.then((()=>{n.renderModel(new a.MimeModel(t.content))})),e.shell.add(l,"main",{mode:"tab-after"})}}}),t.addItem({command:i,category:"notebook"})}}}}]);