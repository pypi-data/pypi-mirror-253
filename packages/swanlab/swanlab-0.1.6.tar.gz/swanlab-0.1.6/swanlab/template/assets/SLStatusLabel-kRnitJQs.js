import{_ as e,o as t,g as a,w as n,b as s,e as i,A as l,t as o,B as r,L as u,y as d,u as c,J as p,k as m,c as v,a as f,P as h,Q as g,n as b,f as y,T as x,m as _,U as $,F as w,I as j,D as k}from"./index-4sXZTXMQ.js";import{_ as S}from"./SLLoading-q9AnJLts.js";const L={class:"text-sm flex items-center gap-2"},C={class:"md:block hidden"},I=e({__name:"DeleteButton",props:{type:String,validator:e=>["project","experiment"].includes(e)},emits:["confirm","cancel"],setup(e,{emit:c}){const p=e,m=c,v=()=>{u(d(`common.delete.title.${p.type}`),d(`common.delete.content.${p.type}`),{}).then((()=>{m("confirm")}))};return(e,u)=>(t(),a(r,{onClick:v,theme:"negative",hollow:"","disabled-tip":e.$t("common.delete.not-allowed")},{default:n((()=>[s("div",L,[i(l,{icon:"trash",class:"w-4 h-4"}),s("span",C,o(e.$t("common.delete.button")),1)])])),_:1},8,["disabled-tip"]))}},[["__scopeId","data-v-61afeff3"]]),V={class:"text-xl font-semibold"},W={class:"relative pt-4"},z={class:"font-semibold pb-3"},A=["placeholder"],E={class:"tip text-negative-default"},U={class:"relative"},B={class:"font-semibold pt-5 pb-3"},D=["placeholder"],Z={class:"tip text-negative-default"},q={class:"flex justify-end pt-10"},T=100,F=255,J=e({__name:"EditorWrap",props:{type:String},emits:["confirm"],setup(e,{emit:l}){const u=c(),$=p(),w=e,j=l,k=m({name:"project"===w.type?u.name:$.name,description:"project"===w.type?u.description:$.description}),L=m({name:"",description:""}),C=v((()=>{const e=k.value.name;if(e.length>T)return!1;if(e.startsWith("-")||e.endsWith("-")||e.startsWith("_")||e.endsWith("_"))return!1;return/^[a-zA-Z0-9_\-\u4e00-\u9fa5]+$/.test(e)})),I=v((()=>{const e=k.value.name;return!(e.length>T)&&(!/^[_-]|[_-]$/.test(e)&&!/[^a-zA-Z0-9_-]/.test(e))})),J=v((()=>{var e;return!k.value.description||!((null==(e=k.value.description)?void 0:e.length)>F)})),N=m(!1),P=async()=>{if(L.value={name:"",description:""},"project"===w.type&&!C.value)return _.warning("invalid project name"),L.value.name="too long or invalid characters";if(!I.value)return _.warning("invalid experiment name"),L.value.name="too long or invalid characters";if(!J.value)return _.warning("invalid description"),L.value.description="invalid description";if(k.value.name===u.name&&k.value.description===u.description)return L.value.name="nothing changed in project config";if(k.value.name===$.name&&k.value.description===$.description)return L.value.name="nothing changed in experiment config";let e=!1;"experiment"===w.type&&u.experiments.forEach((t=>{k.value.name===t.name&&k.value.name!==$.name&&(e=!0,L.value.name="The experiment name is duplicated")})),e||(N.value=!0,j("confirm",k.value,(()=>{N.value=!1,_.success(d("common.config-editor.save.success"))})))};return(l,u)=>{var d;const c=r;return t(),f("form",{class:"w-full",onSubmit:x(P,["prevent"])},[s("h1",V,o(l.$t(`common.config-editor.title.${e.type}`)),1),s("div",W,[s("h2",z,o(l.$t(`common.config-editor.sub-title.${e.type}.name`)),1),h(s("input",{type:"text",class:"input","onUpdate:modelValue":u[0]||(u[0]=e=>k.value.name=e),placeholder:`edit your ${e.type} name here`,maxlength:T,pattern:"[a-zA-Z0-9_\\-\\u4e00-\\u9fa5]*",required:""},null,8,A),[[g,k.value.name]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",0===k.value.name.length||k.value.name.length===T?"text-negative-default":""])},o(`${k.value.name.length} / 100`),3),s("span",E,o(L.value.name),1)]),s("div",U,[s("h2",B,o(l.$t(`common.config-editor.sub-title.${e.type}.desc`)),1),h(s("textarea",{class:"input",rows:"10","onUpdate:modelValue":u[1]||(u[1]=e=>k.value.description=e),placeholder:`edit your ${e.type} description here`,maxlength:F},null,8,D),[[g,k.value.description]]),s("p",{class:b(["absolute bottom-[-20px] text-xs right-0",(null==(d=k.value.description)?void 0:d.length)===F?"text-negative-default":""])},o(`${k.value.description?k.value.description.length:0} / 255`),3),s("span",Z,o(L.value.description),1)]),s("div",q,[i(c,{type:"submit",theme:"primary",class:"p-2 rounded flex items-center",disabled:N.value},{default:n((()=>[N.value?(t(),a(S,{key:0,size:"4"})):y("",!0),s("span",null,o(l.$t("common.config-editor.save."+(N.value?"savimg":"default"))),1)])),_:1},8,["disabled"])])],32)}}},[["__scopeId","data-v-27ab07cb"]]),N={__name:"ConfigEditor",props:{type:{type:String,validator:e=>["project","experiment"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["modify"],setup(e,{emit:a}){const s=m(!1),o=a,u=async(e,t)=>{o("modify",e,(()=>{s.value=!1,t()}))};return(a,o)=>{const d=r;return t(),f(w,null,[i(d,{class:"px-3 py-1.5 border-none !text-dimmest rounded",theme:"primary",hollow:"",disabled:e.disabled,"disabled-tip":a.$t("common.config-editor.not-allowed"),onClick:o[0]||(o[0]=e=>s.value=!0)},{default:n((()=>[i(l,{icon:"modify",class:"w-4 h-4"})])),_:1},8,["disabled","disabled-tip"]),i($,{class:"px-10 py-6","max-w":"550",modelValue:s.value,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value=e)},{default:n((()=>[i(J,{type:e.type,onConfirm:u},null,8,["type"])])),_:1},8,["modelValue"])],64)}}},P=["href"],Q=e({__name:"SLStatusLabel",props:{status:{type:Number,required:!0},id:{default:null}},setup(e){const a=j(),n=e,s=v((()=>{const e=d("experiment.status."+n.status);let t,a;switch(n.status){case 0:t="running",a="circle-fill";break;case 1:t="finished",a="success";break;case-1:t="crashed",a="error"}if(!t)throw new Error("Invalid status:"+n.status+"in StatusLabel.vue");return{label:e,class:t,icon:a}})),r=v((()=>{if(n.id)return"/experiment/"+n.id})),u=()=>{r.value&&a.push(r.value)};return(e,a)=>{const n=l;return t(),f("a",{class:b(["sl-status-label",s.value.class]),href:r.value,onClick:x(u,["prevent"])},[i(n,{icon:s.value.icon},null,8,["icon"]),k(" "+o(s.value.label),1)],10,P)}}},[["__scopeId","data-v-d51e3919"]]);export{I as D,N as _,Q as a};
