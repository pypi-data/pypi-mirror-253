"use strict";(self.webpackChunk_datalayer_jupyter_kernels=self.webpackChunk_datalayer_jupyter_kernels||[]).push([[7880,6610],{29826:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,colored:i,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 896 896",fill:i?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",width:n?"string"==typeof n?r[n]:n:"16px","aria-hidden":"true",ref:o,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M747.4 354.7C701.6 233.9 584.9 148 448.2 148S194.8 233.8 149 354.6C63.3 377.1 0 455.1 0 548c0 110.5 89.5 200 199.9 200h496.2C806.5 748 896 658.5 896 548c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H199.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 0176 548c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"}))}))},9009:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,colored:i,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:i?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 21 21","aria-hidden":"true",width:n?"string"==typeof n?r[n]:n:"16px",ref:o,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fill:i?"#767677":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#767677")?"white":"currentColor",d:"M17.734 1.61A1.207 1.207 0 1116.477.478a1.193 1.193 0 011.257 1.132z"}),s.createElement("path",{fill:i?"#F37726":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#F37726")?"white":"currentColor",d:"M10.693 15.555c-3.205 0-6.021-1.15-7.478-2.848a7.973 7.973 0 0014.956 0c-1.453 1.698-4.259 2.848-7.478 2.848zM10.693 4.51c3.205 0 6.021 1.15 7.478 2.849a7.973 7.973 0 00-14.956 0c1.457-1.702 4.26-2.849 7.478-2.849z"}),s.createElement("path",{fill:i?"#9E9E9E":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#9E9E9E")?"white":"currentColor",d:"M6.281 18.86a1.52 1.52 0 11-1.584-1.424 1.505 1.505 0 011.584 1.425z"}),s.createElement("path",{fill:i?"#616262":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#616262")?"white":"currentColor",d:"M3.58 4.123a.876.876 0 11.85-.911.887.887 0 01-.85.911z"}))}))},11750:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},i),e?s.createElement("title",{id:t},e):null,s.createElement("circle",{cx:36,cy:36,r:28,fill:"#b1cc33"}),s.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))}))},14432:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},i),e?s.createElement("title",{id:t},e):null,s.createElement("circle",{cx:36,cy:36,r:28,fill:"#fcea2b"}),s.createElement("circle",{cx:36,cy:36,r:28,fill:"none",stroke:"#000",strokeLinejoin:"round",strokeWidth:2}))}))},27546:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},i),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fill:"#ea5a47",d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.217 36l-14.36 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}),s.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M58.14 21.78l-7.76-8.013-14.29 14.22-14.22-14.22-8.013 8.013L28.207 36l-14.35 14.22 8.014 8.013 14.22-14.22 14.29 14.22 7.76-8.013L43.921 36z"}))}))},30882:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(66029);const r={small:16,medium:32,large:64},i=s.forwardRef((function({title:e,titleId:t,size:n,...i},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:a,width:n?"string"==typeof n?r[n]:n:"16px","aria-labelledby":t},i),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fill:"#FFF",d:"M11 57.697h49V11.909H15.998l-4 4z"}),s.createElement("path",{fill:"#9b9b9a",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,d:"M55.002 60.91H11.998a.999.999 0 01-.998-1V16.909c0-.552.447-.999.999-.999H55c.552 0 .999.447.999.999V59.91a.999.999 0 01-.998.998z"}),s.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2},s.createElement("path",{d:"M11 16.91l4.998-5h43.004c.55 0 .998.446.998.998V55.91a.999.999 0 01-.999.998"}),s.createElement("path",{d:"M55.002 60.91H11.998a.999.999 0 01-.998-1V16.909c0-.552.447-.999.999-.999H55c.552 0 .999.447.999.999V59.91a.999.999 0 01-.998.998z"}),s.createElement("path",{d:"M47.358 29.799h-4v7h4M43.358 33.298h3M19.642 36.798v-7l5 7v-7M30.858 36.798h0a2.5 2.5 0 01-2.5-2.5v-2a2.5 2.5 0 012.5-2.5h0a2.5 2.5 0 012.5 2.5v2a2.5 2.5 0 01-2.5 2.5zM36.358 29.829h4M38.358 29.829v7"})))}))},29482:(e,t,n)=>{n.d(t,{Z:()=>y});var s=n(74512),r=n(18321),i=n(5259),a=n(59689),o=n(41436),l=n(64309),c=n(19342),d=n(24548),h=n(14479),u=n(66029),m=n(96560);const p=n.n(m)().div`
  position: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.3);
  height: 100vh;
  width: 100vw;
  right: 0;
  top: 0;
  z-index: 1000000000;
`,g=function({open:e,element:t}){return e?(0,s.jsx)(p,{children:t}):(0,s.jsx)(s.Fragment,{})},f=(0,u.createContext)({openBackdrop:e=>{},closeBackdrop:()=>{}}),_=({children:e})=>{const[t,n]=(0,u.useState)(!1),[r,i]=(0,u.useState)();return(0,s.jsxs)(f.Provider,{value:{openBackdrop:e=>{i(e),n(!0)},closeBackdrop:()=>{i(void 0),n(!1)}},children:[(0,s.jsx)(g,{open:t,element:r}),e]})};n(43565),(0,i.loadIAMConfig)(),(0,h.ml)();const x=(0,r.loadJupyterConfig)({});(0,i.setIamServer)((0,h.PV)());const y=()=>(0,s.jsx)(a.ZP,{colorMode:"day",dayScheme:"jupyter",nightScheme:"jupyter",children:(0,s.jsx)(o.ThemeProvider,{colorMode:"light",style:{backgroundColor:"var(--brand-color-canvas-default"},children:(0,s.jsx)(_,{children:x.insideJupyterLab?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(l.MemoryRouter,{initialEntries:["/jupyter/kernels"],children:(0,s.jsx)(d.Z,{})})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.BrowserRouter,{children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)(c.ToastContainer,{})]})})})})},24548:(e,t,n)=>{n.d(t,{r:()=>qe,Z:()=>Ge});var s=n(74512),r=n(18321),i=n(5259),a=n(89010),o=n(86497),l=n(19036),c=n(66029),d=n(64309),h=n(66274),u=n(84803);var m=n(32126),p=n(12221),g=n(59689),f=n(83284);const _=()=>{const e=(0,d.useNavigate)();return(t,n=null,s=!0)=>{n&&n.preventDefault(),window.scrollTo(0,0),document.body.scrollTop=0,e(t)}};var x=n(2470),y=n(19118),w=n(76602),v=n(53646),k=n(29826);const j={small:16,medium:32,large:64},b=c.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor",viewBox:"0 0 18 18","aria-hidden":"true",width:n?"string"==typeof n?j[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:s?"#757575":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#757575")?"white":"currentColor",d:"M3.643 11.143H1.5V16.5h5.357v-2.143H3.643v-3.214zM1.5 6.857h2.143V3.643h3.214V1.5H1.5v5.357zm12.857 7.5h-3.214V16.5H16.5v-5.357h-2.143v3.214zM11.143 1.5v2.143h3.214v3.214H16.5V1.5h-5.357z"}))})),C={small:16,medium:32,large:64},S=c.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",width:n?"string"==typeof n?C[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M10 0c.293 0 .585.013.876.039.929.08 1.612.767 1.824 1.573l.36 1.384c.022.083.099.198.265.28.289.143.568.304.835.483.154.102.291.112.374.089l1.378-.38c.806-.22 1.74.027 2.275.788.338.481.633.99.88 1.523.394.843.14 1.777-.454 2.364L17.595 9.15c-.061.06-.122.184-.11.367.02.322.02.644 0 .966-.012.183.047.307.11.367l1.018 1.008c.593.586.848 1.52.454 2.363a9.967 9.967 0 01-.88 1.521c-.535.763-1.47 1.01-2.275.788l-1.377-.378c-.084-.023-.221-.013-.375.09-.268.178-.546.34-.835.482-.166.082-.242.197-.264.28l-.362 1.382c-.21.808-.894 1.495-1.823 1.575a9.998 9.998 0 01-1.752 0c-.929-.08-1.611-.767-1.823-1.575l-.361-1.382c-.022-.083-.099-.198-.265-.28a7.181 7.181 0 01-.835-.483c-.154-.102-.291-.112-.374-.088l-1.378.378c-.805.22-1.74-.026-2.275-.787-.337-.481-.632-.99-.88-1.523-.394-.844-.14-1.777.453-2.364l1.019-1.007c.063-.06.123-.184.11-.367a7.768 7.768 0 010-.966c.013-.183-.047-.307-.11-.367L1.386 8.142C.794 7.556.54 6.623.933 5.78a9.9 9.9 0 01.88-1.521c.535-.763 1.47-1.01 2.275-.788l1.377.377c.084.024.221.014.375-.088.268-.179.546-.34.835-.483.166-.082.243-.197.264-.28L7.3 1.614C7.511.806 8.195.119 9.124.037 9.413.014 9.705 0 10 0zm-.714 1.906c-.045.004-.135.045-.171.183L8.754 3.47c-.184.701-.686 1.209-1.248 1.486a5.644 5.644 0 00-.625.363c-.521.347-1.212.529-1.911.337l-1.379-.378c-.136-.038-.218.02-.243.056-.275.39-.515.805-.717 1.237-.017.039-.026.138.074.238l1.019 1.007c.514.508.702 1.196.662 1.82a5.887 5.887 0 000 .728c.04.623-.148 1.312-.662 1.82L2.705 13.19c-.101.1-.091.199-.074.238.203.432.442.846.717 1.236.025.038.106.095.243.058l1.378-.38c.7-.19 1.391-.01 1.912.338.202.134.41.255.627.363.558.277 1.062.786 1.246 1.486l.361 1.381c.036.136.126.179.171.183a8.26 8.26 0 001.428 0c.045-.004.135-.045.171-.183l.361-1.381c.184-.701.686-1.209 1.248-1.486.216-.108.425-.229.625-.363.521-.347 1.212-.528 1.911-.337l1.379.379c.136.036.219-.02.244-.057.274-.391.513-.805.716-1.237.017-.039.026-.138-.074-.238l-1.019-1.007c-.514-.508-.702-1.196-.662-1.82a5.887 5.887 0 000-.728c-.04-.623.148-1.312.662-1.82l1.019-1.007c.101-.1.091-.199.074-.238a8.082 8.082 0 00-.716-1.236c-.025-.037-.107-.095-.244-.058l-1.378.38c-.7.19-1.391.01-1.912-.338-.2-.135-.41-.256-.627-.363-.558-.277-1.062-.786-1.246-1.486l-.361-1.381c-.036-.138-.126-.179-.171-.183a8.251 8.251 0 00-1.428 0zM13.75 10a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zm-1.875 0a1.875 1.875 0 10-3.75 0 1.875 1.875 0 003.75 0z"}))})),M={small:16,medium:32,large:64},F=c.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:s?"none":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("none")?"white":"currentColor","aria-hidden":"true",viewBox:"0 0 50 50",width:n?"string"==typeof n?M[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:s?"#e26d6d":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#e26d6d")?"white":"currentColor",strokeWidth:2.5,d:"M0 0h50v10H0zm0 0"}),c.createElement("path",{fill:s?"#f9cb07":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#f9cb07")?"white":"currentColor",strokeWidth:2.5,d:"M0 20h50v10H0zm0 0"}),c.createElement("path",{fill:s?"#49b3d9":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#49b3d9")?"white":"currentColor",strokeWidth:2.5,d:"M0 40h50v10H0zm0 0"}))})),E={small:16,medium:32,large:64},D=c.forwardRef((function({title:e,titleId:t,size:n,...s},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:n?"string"==typeof n?E[n]:n:"16px",strokeWidth:2,className:"feather feather-log-out",viewBox:"0 0 24 24","aria-hidden":"true",ref:r,"aria-labelledby":t},s),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M21 12H9"}))})),Z=()=>{const e=_();return(0,s.jsxs)(x.P,{children:[(0,s.jsx)(x.P.Anchor,{children:(0,s.jsx)(y.h,{icon:v.Ui8,variant:"invisible","aria-label":"jupyter-kernels-more"})}),(0,s.jsx)(x.P.Overlay,{width:"medium",children:(0,s.jsxs)(w.S,{children:[(0,s.jsxs)(w.S.Group,{title:"More...",children:[(0,s.jsxs)(w.S.Item,{onSelect:()=>e("/jupyter/kernels/usage"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(k.Z,{})}),"Usage",(0,s.jsx)(w.S.Description,{variant:"block",children:"Monitor the CPU and Memory usage of your kernels."})]}),(0,s.jsxs)(w.S.Item,{onSelect:()=>e("/jupyter/kernels/billing"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(b,{})}),"Billing",(0,s.jsx)(w.S.Description,{variant:"block",children:"View download and pay your bills."})]}),(0,s.jsxs)(w.S.Item,{onSelect:()=>e("/jupyter/kernels/settings"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(S,{})}),"Settings",(0,s.jsx)(w.S.Description,{variant:"block",children:"Configure your personal settings."})]}),(0,s.jsxs)(w.S.Item,{onSelect:()=>e("/jupyter/kernels/docs"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(v.vJ3,{})}),"Documentation",(0,s.jsx)(w.S.Description,{variant:"block",children:"Documentation to help you use Datalayer."})]}),(0,s.jsxs)(w.S.Item,{onSelect:()=>e("/jupyter/kernels/about"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(F,{})}),"About",(0,s.jsx)(w.S.Description,{variant:"block",children:"Learn how to scale you local JupyterLab with remote kernels with Datalayer."})]})]}),(0,s.jsx)(w.S.Divider,{}),(0,s.jsxs)(w.S.Item,{variant:"danger",onSelect:t=>e("/jupyter/kernels/logout"),children:[(0,s.jsx)(w.S.LeadingVisual,{children:(0,s.jsx)(D,{})}),"Logout"]})]})})]})},I=()=>{const e=_();return(0,s.jsx)(g.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,s.jsxs)(f.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,s.jsx)(f.Z.Item,{full:!0,children:(0,s.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels")},children:"Home"})}),(0,s.jsx)(f.Z.Item,{children:(0,s.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/profile")},children:"Profile"})}),(0,s.jsx)(f.Z.Item,{children:(0,s.jsx)(Z,{})})]})})},N=e=>{const{content:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(I,{})}),(0,s.jsx)(p.X,{containerWidth:"xlarge",padding:"normal",sx:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:(0,s.jsx)(p.X.Content,{children:t})})]})};N.defaultProps={};const R=N;var P=n(83513),T=n(14479),z=n(69252);const L=()=>{const{setAuth:e,token:t}=(0,i.useStore)(),{setRemoteJupyterToken:n}=(0,P.o)(),s=_(),r=n=>fetch(n.url,{method:n.method,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${n.token??t}`},body:n.body?JSON.stringify(n.body):void 0,credentials:"include"}).then((t=>{if(200!==t.status){if(401!==t.status)throw new Error(t.status.toString());e(void 0,void 0),s("/jupyter/kernels/login")}return t.json()})).catch((e=>{throw e}));return{apiRequest:r,createJupyterServer:e=>r({url:`${(0,T.PV)()}/api/operator/jupyter/server/${e}`,method:"POST"}).then((e=>(console.log("Create Jupyter Server response",e),n(e.token),e))),deleteJupyterServer:e=>{r({url:`${(0,T.PV)()}/api/operator/jupyter/server/${e}`,method:"DELETE"}).then((e=>{console.log("delete Jupyter Server response",e)}))},mountLocalFolder:e=>{(0,z.v)(`jump/${e}`).then((e=>{console.log("--- mountLocalFolder",e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)}))},unmountLocalFolder:e=>{(0,z.v)(`jump/${e}`,{method:"DELETE"}).then((e=>{console.log("--- unmountLocalFolder",e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)}))}}},A=L,O=()=>{const e=_();return(0,s.jsx)(g.ZP,{colorMode:"night",nightScheme:"dark_dimmed",children:(0,s.jsxs)(f.Z,{sx:{paddingTop:0,height:45,paddingBottom:0},children:[(0,s.jsx)(f.Z.Item,{children:(0,s.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels")},children:"Home"})}),(0,s.jsx)(f.Z.Item,{children:(0,s.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/login")},children:"Login"})}),(0,s.jsx)(f.Z.Item,{children:(0,s.jsx)(f.Z.Link,{href:"#",onClick:t=>{t.preventDefault(),e("/jupyter/kernels/join")},children:"Join"})})]})})},K=e=>{const{content:t}=e;return(0,s.jsxs)(p.X,{containerWidth:"full",padding:"none",sx:{overflow:"visible"},children:[(0,s.jsx)(p.X.Header,{children:(0,s.jsx)(O,{})}),(0,s.jsx)(p.X.Content,{sx:{minHeight:"calc(100vh - 380px)"},children:(0,s.jsx)(m.Z,{children:t})}),(0,s.jsx)(p.X.Footer,{divider:"none"})]})};K.defaultProps={};const V=K;var J=n(42913),W=n(11048),$=n(5917),H=n(62005),B=n(18310),U=n(57687),q=n(52746),G=n(16419),Y=n(14675),X=n(85680);const Q={small:"3px",medium:"6px",large:"12px",full:"100vh"},ee={small:"0 1px 0 rgba(31,35,40,0.04)",medium:"0 3px 6px rgba(140,149,159,0.15)",large:"0 8px 24px rgba(140,149,159,0.2)",extraLarge:"0 12px 28px rgba(140,149,159,0.3)"},te=e=>{const{sx:t,rounded:n,border:r,shadow:i,children:a,...o}=e;return(0,s.jsx)(m.Z,{sx:{...t||void 0,...n?"string"==typeof n?{borderRadius:Q[n]}:{borderRadius:e.rounded}:void 0,...r?{borderWidth:1,borderStyle:"solid",borderColor:"border.default"}:void 0,...i?{boxShadow:ee[i]}:{boxShadow:ee.small}},...o,children:a})};te.Header=e=>{const{title:t,description:n,leadingIcon:r,action:i}=e;return(0,s.jsxs)(m.Z,{display:"flex",alignItems:"center",sx:{p:3},children:[r&&(0,s.jsx)(m.Z,{sx:{mr:3},children:(0,s.jsx)(X.Z,{size:"medium",icon:r})}),(0,s.jsxs)(m.Z,{sx:{flexGrow:1},children:[(0,s.jsx)(H.Z,{display:"block",children:t}),(0,s.jsx)(H.Z,{display:"block",color:"fg.muted",children:n})]}),i&&(0,s.jsx)(m.Z,{children:i})]})},te.Image=({url:e,image:t,svg:n,height:r})=>(0,s.jsxs)(m.Z,{display:"block",width:"100%",height:`${r}px`,backgroundImage:`url(${e})`,sx:{backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",objectFit:"cover"},children:[t&&(0,s.jsx)("img",{src:t,style:{maxHeight:`${r}px`}}),n&&(0,s.jsx)("img",{src:`data:image/svg+xml;utf8,${n}`,style:{maxHeight:r}})]}),te.Content=({children:e})=>(0,s.jsx)(m.Z,{display:"block",sx:{p:3},children:e}),te.Actions=({children:e})=>(0,s.jsx)(m.Z,{display:"block",sx:{p:3},children:e}),n(55431);var ne=n(46722),se=n(52118);const re=e=>{const{leadingIcon:t,variant:n,onClose:r,...i}=e,[a,o]=(0,c.useState)(!0);return a?(0,s.jsx)(ne.Z,{variant:n,...i,children:(0,s.jsxs)(m.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(m.Z,{sx:{flexGrow:1},children:[t&&(0,s.jsx)(X.Z,{icon:t}),(0,s.jsx)(H.Z,{color:`${"default"===n?"accent":"warning"===n?"attention":n}.fg`,children:e.children})]}),(0,s.jsx)(m.Z,{onClick:()=>{r&&r(),o(!1)},sx:{cursor:"pointer"},children:(0,s.jsx)(se.b0D,{size:20})})]})}):null},ie={small:16,medium:32,large:64},ae=c.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?ie[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M14 10h-2v12h2V10zm6 0h-2v12h2V10z"}),c.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",d:"M16 4A12 12 0 114 16 12 12 0 0116 4m0-2a14 14 0 1014 14A14 14 0 0016 2z"}))}));var oe=n(30882),le=n(27546),ce=n(9009),de=n(11750),he=n(14432),ue=n(97930),me=n(67095);const pe=()=>{const[e,t]=(0,c.useState)(0);return(0,J.useInterval)((()=>{t(e>=100?0:e+1)}),100),(0,s.jsx)(me.k,{progress:e,"aria-label":""})};var ge=n(96129),fe=n(19342);const _e=fe.toast.POSITION.TOP_CENTER,{insideJupyterLab:xe}=(0,r.loadJupyterConfig)({}),ye=()=>({enqueueToast:(e,t)=>{switch(t.variant){case"info":xe?ge.Notification.info(e,{autoClose:5e3}):fe.toast.info(e,{position:_e});break;case"success":xe?ge.Notification.success(e,{autoClose:5e3}):fe.toast.success(e,{position:_e});break;case"warning":xe?ge.Notification.warning(e,{autoClose:5e3}):fe.toast.warning(e,{position:_e});break;case"error":xe?ge.Notification.error(e,{autoClose:5e3}):fe.toast.error(e,{position:_e})}}}),we=()=>{const{user:e}=(0,i.useStore)(),{enqueueToast:t}=ye(),{mountLocalFolder:n,unmountLocalFolder:r}=L(),{jupyterLabAdapter:a,serviceManager:o,showDisclaimer:l,setShowDisclaimer:d}=(0,P.Z)(),[h,u]=(0,c.useState)(new Array),[p,g]=(0,c.useState)(new Array),[f,_]=(0,c.useState)(),[x,w]=(0,c.useState)(),[v,k]=(0,c.useState)(!1),[j,b]=(0,c.useState)(new Map),C=e=>{_(Array.from(e.kernels.running()))};return(0,J.useInterval)((()=>{o&&o.browser&&u(Array.from(o.browser.kernels.running()))}),5e3),(0,J.useInterval)((()=>{o&&o.remote&&(o.remote.kernelspecs.specs?.kernelspecs&&o.remote.kernelspecs.refreshSpecs().then((()=>{const t=Object.values(o.remote.kernelspecs.specs.kernelspecs);0===t.length&&k(!1),k(!0);const n=new Map;t.forEach((e=>{const t=e?.name;if(t?.startsWith("run-")){const s=e?.metadata;if(s){const e=j.get(t),r={description:s.description,notebookExampleUrl:s.notebook_example_url};ue.JSONExt.deepEqual(e??{},r)||n.set(t,r)}}}));const s=new Map([...j,...n]);n.size&&b(s);const r=Array.from(o.remote?.kernels.running()??[]);for(const t of s.keys())r.find((e=>e.name===t))||o.remote?.kernels.startNew({name:t},{username:e?.handle,handleComms:!0})})),C(o.remote)),o&&g(Array.from(o.kernels.running()))}),5e3),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[l&&(0,s.jsxs)(re,{onClose:()=>d(!1),children:["Jupyter Kernels is released in ",(0,s.jsx)(W.Z,{children:"PREVIEW"})," mode. This means that the account you have created will not stay and can be removed at any time based on Datalayer's new releases. Read the"," ",(0,s.jsx)($.Z,{href:"https://jupyter-kernels.datalayer.tech",target:"_blank",children:"documentation"})," ","for usage and support."]}),(0,s.jsx)(U.m,{sx:{marginTop:1},children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Jupyter Kernels"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),v&&o&&o.remote&&f?(0,s.jsxs)(m.Z,{mt:3,children:[(0,s.jsxs)(q.i.Container,{children:[(0,s.jsx)(q.i.Title,{as:"h2",id:"images",children:"Remote Kernels"}),(0,s.jsx)(q.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available remote kernels."}),(0,s.jsx)(G.w,{"aria-labelledby":"remote-kernels","aria-describedby":"remote-kernels-subtitle",data:f,columns:[{header:"Name",field:"name",renderCell:e=>(0,s.jsx)(H.Z,{children:e.name})},{header:"Description",id:"description",renderCell:e=>(0,s.jsx)(H.Z,{children:j.get(e.name)?.description})},{header:"State",field:"execution_state",renderCell:e=>(0,s.jsx)(H.Z,{children:e.execution_state})},{header:"Start / Pause",id:"start-pause-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(y.h,{"aria-label":`Pause the kernel with id ${e.id}`,icon:ae,size:"small",onClick:()=>t("The Start/Pause feature is not yet implemented... Checkout out the next release ðŸŽ‰, it is going to be awesome.",{variant:"warning"})})})},{header:"Example",id:"example-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(y.h,{"aria-label":`Create an example notebook for kernel ${e.name}`,icon:oe.Z,size:"small",onClick:()=>{(async(e,t,n)=>{const s=await e.commands.execute("notebook:create-new",{cwd:"/"});s.context.rename(t+".ipynb");const r=await fetch(n),i=(await r.text()).replaceAll("\\n","");s.context.model.fromJSON({...JSON.parse(i)})})(a.jupyterLab,e.name,j.get(e.name).notebookExampleUrl),t(`An example notebook is created for kernel ${e.name}.`,{variant:"info"})}})})},{header:"Mount local folder",id:"mount-local-folder",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(B.Z,{size:"small",checked:x===e.name,onClick:()=>{x===e.name?(r(e.id),w(void 0),t(`You local folder is not more accessible from ${e.name} kernel.`,{variant:"info"})):(n(e.id),w(e.name),t(`You local folder should be accessible from a Notebook connected to the ${e.name} kernel.`,{variant:"info"}))},disabled:void 0!==x&&x!==e.name})})})},{header:"Delete",id:"delete-action",renderCell:e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(y.h,{"aria-label":`Delete the kernel ${e.name}`,icon:le.Z,size:"small",onClick:()=>{((e,t)=>{e.kernels.shutdown(t).then((()=>{console.log(`Kernel ${t} is terminated.`),C(e)}))})(o.remote,e.id),t(`The kernel ${e.name} (${e.id}) is terminated.`,{variant:"info"})}})})}]})]}),0===f.length&&(0,s.jsx)(pe,{})]}):(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsxs)(Y.Z,{border:!0,children:[(0,s.jsx)(Y.Z.Visual,{children:(0,s.jsx)(ce.Z,{size:"medium"})}),(0,s.jsx)(Y.Z.Heading,{children:"Remote Kernels"}),(0,s.jsx)(Y.Z.Description,{children:(0,s.jsx)(m.Z,{sx:{textAlign:"center"},children:(0,s.jsx)(m.Z,{children:"No Remote Kernels found."})})})]})}),(0,s.jsx)(m.Z,{children:v?(0,s.jsxs)(m.Z,{display:"flex",mt:3,children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(de.Z,{})}),(0,s.jsx)(m.Z,{ml:1,children:(0,s.jsx)(H.Z,{children:"Your Remote Jupyter Server is available."})})]}):(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsx)(pe,{})}),(0,s.jsxs)(m.Z,{display:"flex",mt:3,children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(he.Z,{})}),(0,s.jsx)(m.Z,{ml:1,children:(0,s.jsx)(H.Z,{children:"We are checking your Remote Jupyter Server...."})})]})]})}),p.length>0?(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsxs)(q.i.Container,{children:[(0,s.jsx)(q.i.Title,{as:"h2",id:"images",children:"Local Kernels"}),(0,s.jsx)(q.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available local kernels."}),o&&p&&(0,s.jsx)(G.w,{"aria-labelledby":"local-kernels","aria-describedby":"local-kernels-subtitle",data:p,columns:[{header:"Name",field:"name",renderCell:e=>(0,s.jsx)(H.Z,{children:e.name})},{header:"ID",field:"id",renderCell:e=>(0,s.jsx)(H.Z,{children:e.id})},{header:"State",field:"execution_state",renderCell:e=>(0,s.jsx)(H.Z,{children:e.execution_state})}]})]})}):(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsxs)(Y.Z,{border:!0,children:[(0,s.jsx)(Y.Z.Visual,{children:(0,s.jsx)(ce.Z,{size:"medium"})}),(0,s.jsx)(Y.Z.Heading,{children:"Local Kernels"}),(0,s.jsx)(Y.Z.Description,{children:(0,s.jsx)(m.Z,{sx:{textAlign:"center"},children:(0,s.jsx)(m.Z,{children:"No Local Kernels found."})})})]})}),h.length>0?(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsxs)(q.i.Container,{children:[(0,s.jsx)(q.i.Title,{as:"h2",id:"images",children:"Browser Kernels"}),(0,s.jsx)(q.i.Subtitle,{as:"p",id:"images-subtitle",children:"Available browser kernels."}),o&&h&&(0,s.jsx)(G.w,{"aria-labelledby":"browser-kernels","aria-describedby":"browser-kernels-subtitle",data:h,columns:[{header:"Name",field:"name",renderCell:e=>(0,s.jsx)(H.Z,{children:e.name})},{header:"ID",field:"id",renderCell:e=>(0,s.jsx)(H.Z,{children:e.id})},{header:"State",field:"execution_state",renderCell:e=>(0,s.jsx)(H.Z,{children:e.execution_state})}]})]})}):(0,s.jsx)(m.Z,{mt:3,children:(0,s.jsxs)(Y.Z,{border:!0,children:[(0,s.jsx)(Y.Z.Visual,{children:(0,s.jsx)(ce.Z,{size:"medium"})}),(0,s.jsx)(Y.Z.Heading,{children:"Browser Kernels"}),(0,s.jsx)(Y.Z.Description,{children:(0,s.jsx)(m.Z,{sx:{textAlign:"center"},children:(0,s.jsx)(m.Z,{children:"No Browser Kernels found."})})})]})})]})})};var ve=n(21809),ke=n(66062);const je={small:16,medium:32,large:64},be=c.forwardRef((function({title:e,titleId:t,size:n,...s},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",width:n?"string"==typeof n?je[n]:n:"16px",strokeWidth:2,className:"feather feather-log-in",viewBox:"0 0 24 24","aria-hidden":"true",ref:r,"aria-labelledby":t},s),e?c.createElement("title",{id:t},e):null,c.createElement("path",{d:"M15 3h4a2 2 0 012 2v14a2 2 0 01-2 2h-4M10 17l5-5-5-5M15 12H3"}))})),Ce=()=>{const e=_();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{m:3,children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Jupyter Kernels"}),(0,s.jsx)(U.m.Description,{children:"alpha"})]})}),(0,s.jsx)(ve.Z,{children:"Scale your local JupyterLab with the Cloud."}),(0,s.jsx)(H.Z,{as:"h3",children:"Please login to use Jupyter Kernels"}),(0,s.jsx)($.Z,{href:"",onClick:t=>e("/jupyter/kernels/login",t),children:(0,s.jsx)(ke.Z,{sx:{marginBottom:3},children:(0,s.jsx)(ke.Z.Icon,{icon:be})})})]})})},Se={small:16,medium:32,large:64},Me=c.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 243.75 243.75",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?Se[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?c.createElement("title",{id:t},e):null,c.createElement("g",{fill:s?"#fff":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("#fff")?"white":"currentColor",strokeWidth:2.928,transform:"translate(0 -308.268)"},c.createElement("circle",{cx:121.875,cy:430.143,r:120.411,stroke:"#000"}),c.createElement("path",{fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M119.675 477.588l.253-140.166c-73.532 5.11-86.696 84.242-28.25 114.7l.61 25.34z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#000",d:"M120.07 482.652H93.813c-2.945 4.667-3.575 8.04 2.748 13.127-6.62.865-6.378 8.548-2.9 10.686-4.242 1.556-5.282 8.727 6.869 7.937l1.625 5.486c.733 2.113 1.746 2.545 2.76 2.973l10.458-.086c1.992-.72 4.299-2.105 4.39-5.015z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinecap:"round",strokeLinejoin:"round",d:"M124.291 477.462l-.469-139.95c73.532 5.11 86.696 84.458 28.25 114.916l-.61 25.34z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",d:"M125.32 482.957l-.306 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751zM139.957 482.957l-.305 32.361c1.317 11.059 11.072 8.629 10.99-.61v-31.751z"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f8d05b",d:"M112.412 477.238l-16.948-73.934c-4.23-19.168-16.974-14.783-11.444-.557 6.267 10.896 28.39 21.763 33.582 6.106-4.523-5.743-6.628-12.59 1.333-16.65"}),c.createElement("path",{fillRule:"evenodd",stroke:"#f75c59",strokeLinejoin:"round",d:"M131.627 399.814c1.778-4.471 12.628-9.482 19.487-14.062 7.117 3.213 17.741 13.145 12.804 25.555-1.265 4.901-28.05 4.544-30.224 2.137-4.481-4.606-3.115-10.024-2.067-13.63zM128.198 428.251c-.91 7.576-.577 13.909-.763 20.76 3.425.788 7.262.337 11.082-.062-2.75-6.95-5.704-13.748-10.319-20.698z"})))})),Fe=e=>{const{version:t}=e,[n,r]=(0,c.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsxs)(U.m.Title,{children:["ðŸª âšª Jupyter Kernels",(0,s.jsx)(W.Z,{sx:{marginLeft:1},children:t})]}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(H.Z,{children:"Jupyter Kernels scales your JupyterLab in the cloud with remote Kernels and local files."})}),(0,s.jsx)(m.Z,{mt:3,children:n?(0,s.jsx)(Me,{size:300,onClick:e=>r(!1)}):(0,s.jsx)("img",{src:"https://assets.datalayer.tech/releases/datalayer-0.3.0-black-snake_1024.png",onClick:e=>r(!0),style:{width:"100%"}})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)($.Z,{href:"https://datalayer.tech/docs/releases/0.3.0-black-snake",target:"_blank",children:(0,s.jsx)(H.Z,{as:"h4",children:"Datalayer 0.3.0 Black Snake Release"})})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)($.Z,{href:"https://github.com/datalayer/datalayer-iam",target:"_blank",children:(0,s.jsx)(H.Z,{as:"h4",children:"Source code"})})})]})},Ee={small:16,medium:32,large:64},De=c.forwardRef((function({title:e,titleId:t,size:n,...s},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 72 72",fill:"currentColor","aria-hidden":"true",ref:r,width:n?"string"==typeof n?Ee[n]:n:"16px","aria-labelledby":t},s),e?c.createElement("title",{id:t},e):null,c.createElement("path",{fill:"#fff",d:"M15.35 59.08h-1.779c-.684 0-1.238-.578-1.238-1.291v-34.83c0-.713.554-1.291 1.238-1.291h1.779c.684 0 1.238.578 1.238 1.291v34.83c0 .713-.554 1.291-1.238 1.291zM58.46 59.08h-1.779c-.684 0-1.238-.713-1.238-1.593v-32.97c0-.88.554-1.593 1.238-1.593h1.779c.684 0 1.238.713 1.238 1.593v32.97c0 .88-.555 1.593-1.238 1.593z"}),c.createElement("path",{fill:"#fcea2b",d:"M7.45 43.47h7.743L7.45 51.213z"}),c.createElement("path",{fill:"#3F3F3F",d:"M15.19 43.47h12.34l-7.743 7.743-12.34-.058z"}),c.createElement("path",{fill:"#fcea2b",d:"M27.48 43.47h12.34l-7.743 7.743h-12.29z"}),c.createElement("path",{fill:"#3F3F3F",d:"M39.82 43.47h12.34l-7.743 7.743h-12.34z"}),c.createElement("path",{fill:"#fcea2b",d:"M52.16 43.47l11.89-.184-7.612 7.612h-11.7z"}),c.createElement("path",{fill:"#3F3F3F",d:"M64.05 43.29v7.612h-7.612z"}),c.createElement("path",{fill:"#fcea2b",d:"M7.95 28.33l7.646-.034-7.646 7.646z"}),c.createElement("path",{fill:"#3F3F3F",d:"M15.6 28.3h11.94l-7.695 7.646H7.955z"}),c.createElement("path",{fill:"#fcea2b",d:"M27.48 28.3h12.34l-7.743 7.743h-12.29z"}),c.createElement("path",{fill:"#3F3F3F",d:"M39.82 28.3h12.34l-7.743 7.743h-12.34z"}),c.createElement("path",{fill:"#fcea2b",d:"M52.16 28.3H64.5l-8.062 7.646-12.02.098z"}),c.createElement("path",{fill:"#3F3F3F",d:"M64.05 28.33v7.612h-7.612z"}),c.createElement("g",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2},c.createElement("path",{d:"M12.74 42.72v-6.348M16.92 50.9v6.509c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217v-6.071M16.92 36.37v6.348M12.74 28.24v-5.907m4.181 0v5.812M55.1 43.29v-6.921M59.28 51.34v6.071c0 .672-.545 1.217-1.217 1.217h-1.748a1.217 1.217 0 01-1.217-1.217V51.34M59.28 36.37v5.969M55.1 28.03v-5.891m4.181 0v5.796M7.95 28.33h56.1v7.612H7.95z"}),c.createElement("path",{d:"M7.95 43.29h56.1v7.612H7.95z"}),c.createElement("ellipse",{cx:14.83,cy:17.97,rx:4.594,ry:4.596}),c.createElement("ellipse",{cx:57.19,cy:17.97,rx:4.594,ry:4.596})),c.createElement("g",{fill:"#f4aa41",fillRule:"evenodd",stroke:"#e27022",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,strokeWidth:2,transform:"translate(-2.525 -.094)"},c.createElement("ellipse",{cx:17.36,cy:18.06,rx:4.594,ry:4.596}),c.createElement("ellipse",{cx:59.71,cy:18.06,rx:4.594,ry:4.596})))})),Ze=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Billing"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})}),Ie=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Content"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})});var Ne=n(20740);const Re=e=>{const{boxPanel:t}=e;return(0,s.jsx)("div",{style:{position:"relative"},children:(0,s.jsx)(m.Z,{className:"jp-LabShell",sx:{position:"relative","& .dla-Jupyter-Notebook":{height:1e3,maxHeight:1e3,width:"100%"},"& .jp-MainAreaWidget":{width:"100%",height:"100%"},"& .jp-Toolbar":{width:"100% !important"},"& .jp-NotebookPanel-notebook":{width:"100% !important",height:"100%"},"& .lm-mod-hidden":{display:"unset !important"}},children:(0,s.jsx)(r.Lumino,{children:t})})})},Pe=()=>{const{jupyterLabAdapter:e,serviceManager:t}=(0,P.Z)(),{createJupyterServer:n,deleteJupyterServer:r}=L(),{enqueueToast:i}=ye(),[a,o]=(0,c.useState)(),[l,d]=(0,c.useState)(),[h,u]=(0,c.useState)(),[p,g]=(0,c.useState)(),[f,_]=(0,c.useState)();(0,c.useEffect)((()=>{e&&(async()=>{const t=await e.notebook("test.ipynb");_(t)})().catch(console.error)}),[e]);const x=()=>{o(Array.from(t.local.kernels.running())),d(Array.from(t.local.sessions.running())),u(Array.from(t.remote.kernels.running())),g(Array.from(t.remote.sessions.running()))};return(0,J.useInterval)((()=>{t&&t.remote&&x()}),5e3),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(we,{}),(0,s.jsx)(ve.Z,{children:"Debugging Section"}),t&&t.local&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{children:"Local Jupyter Server"}),(0,s.jsxs)(m.Z,{children:[t.local.serverSettings.baseUrl," -"," ",t.local.serverSettings.wsUrl]}),(0,s.jsxs)(m.Z,{mt:3,children:[(0,s.jsx)(m.Z,{children:"Local Kernels [ id | name | last_activity | execution_state | connections ]"}),a?.map((e=>(0,s.jsx)(m.Z,{children:(0,s.jsxs)(m.Z,{children:[e.id," | ",e.name," | ",e.last_activity," |"," ",e.execution_state," | ",e.connections,(0,s.jsx)($.Z,{sx:{marginLeft:1},href:"",onClick:n=>{var s;n.preventDefault(),s=e.id,t.local.kernels.shutdown(s).then((()=>{i(`Kernel ${s} is terminated.`,{variant:"info"}),console.log(`Kernel ${s} is terminated.`),x()}))},children:"delete"})]})},e.id)))]}),(0,s.jsxs)(m.Z,{mt:3,children:[(0,s.jsx)(m.Z,{children:"Local Sessions [ id | name | path | type | kernel_id | kernel_name ]"}),l?.map((e=>(0,s.jsx)(m.Z,{children:(0,s.jsxs)(m.Z,{children:[e.id," | ",e.name," | ",e.path," |"," ",e.type," | ",e.kernel?.id," |"," ",e.kernel?.name,(0,s.jsx)($.Z,{href:"",sx:{marginLeft:1},onClick:n=>{var s;n.preventDefault(),s=e.id,t.local.sessions.shutdown(s).then((()=>{i(`Session ${s} is terminated.`,{variant:"info"}),console.log(`Session ${s} is terminated.`),x()}))},children:"delete"})]})},e.id)))]})]}),t&&t.remote&&h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{mt:3,children:"Remote Jupyter Server"}),(0,s.jsxs)(m.Z,{children:[t.remote.serverSettings.baseUrl," -"," ",t.remote.serverSettings.wsUrl]}),(0,s.jsxs)(m.Z,{mt:3,children:[(0,s.jsx)(m.Z,{children:"Remote Kernels [ id | name | last_activity | execution_state | connections ]"}),h.map((e=>(0,s.jsx)(m.Z,{children:(0,s.jsxs)(m.Z,{children:[e.id," | ",e.name," | ",e.last_activity," |"," ",e.execution_state," | ",e.connections,(0,s.jsx)($.Z,{sx:{marginLeft:1},href:"",onClick:n=>{var s;n.preventDefault(),s=e.id,t.remote?.kernels.shutdown(s).then((()=>{i(`Kernel ${s} is terminated.`,{variant:"info"}),console.log(`Kernel ${s} is terminated.`),x()}))},children:"delete"})]})},e.id)))]}),(0,s.jsxs)(m.Z,{mt:3,children:[(0,s.jsx)(m.Z,{children:"Remote Sessions [ id | name | path | type | kernel_id | kernel_name ]"}),p?.map((e=>(0,s.jsx)(m.Z,{children:(0,s.jsxs)(m.Z,{children:[e.id," | ",e.name," | ",e.path," |"," ",e.type," | ",e.kernel?.id," |"," ",e.kernel?.name,(0,s.jsx)($.Z,{href:"",sx:{marginLeft:1},onClick:n=>{var s;n.preventDefault(),s=e.id,t.remote?.sessions.shutdown(s).then((()=>{i(`Session ${s} is terminated.`,{variant:"info"}),console.log(`Session ${s} is terminated.`),x()}))},children:"delete"})]})},e.id)))]})]}),(0,s.jsxs)(m.Z,{mt:3,mb:3,display:"flex",children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(Ne.z,{onClick:e=>{e.preventDefault(),n("default")},children:"Create Jupyter Server"})}),(0,s.jsx)(m.Z,{ml:3,children:(0,s.jsx)(Ne.z,{onClick:e=>{e.preventDefault(),r("default")},children:"Delete Jupyter Server"})})]}),f&&(0,s.jsx)(Re,{boxPanel:f})]})},Te=()=>(0,s.jsx)(m.Z,{children:(0,s.jsx)("iframe",{src:"https://jupyter-kernels.datalayer.tech",style:{width:"100%",height:"1000px",border:0}})}),ze=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Environments"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})}),Le=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Kernels"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})}),Ae=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Pools"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})});var Oe=n(4633),Ke=n(54915),Ve=n(14757);const Je=[{navigation:"Overview",icon:v.vJ3,href:"#overview"},{navigation:"Details",icon:v.Rg1,counter:3,href:"#projects"},{navigation:"Cards",icon:v.H0r,counter:"12",href:"#repositories"},{navigation:"Stars",icon:v.r7p,counter:"3",href:"#stars"},{navigation:"Activity",icon:v.sOM,counter:67,href:"#activity"}],We=()=>{const{user:e}=(0,i.useStore)(),[t,n]=(0,c.useState)(0);return(0,s.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"row",gap:3,alignItems:"flex-start"},children:[(0,s.jsxs)(m.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%"},children:[(0,s.jsx)(Oe.Z,{size:256,src:"https://avatars.githubusercontent.com/u/5007189?s=200&v=4",alt:"avatar"}),(0,s.jsxs)(m.Z,{children:[(0,s.jsxs)(m.Z,{sx:{paddingY:3},children:[(0,s.jsx)(Ke.Z,{as:"h1",sx:{fontSize:24},children:e?.displayName}),(0,s.jsx)(Ke.Z,{as:"h1",sx:{fontSize:20,fontWeight:300},children:e?.handle})]}),(0,s.jsx)(m.Z,{sx:{display:"flex",flexDirection:"column",color:"fg.onEmphasis"},children:(0,s.jsx)(Ne.z,{block:!0,children:"Edit Profile"})})]})]}),(0,s.jsxs)(m.Z,{sx:{flexGrow:1},children:[(0,s.jsx)(Ve.J,{"aria-label":"Repository",children:Je.map(((e,r)=>(0,s.jsx)(Ve.J.Item,{icon:e.icon,"aria-current":r===t?"page":void 0,onSelect:e=>{e.preventDefault(),n(r)},counter:e.counter,href:e.href,children:e.navigation},e.navigation)))}),(0,s.jsx)(m.Z,{sx:{border:"1px solid",marginTop:2,borderColor:"border.default",borderRadius:"12px",height:"300px",width:"80%",padding:4},children:(0,s.jsx)(H.Z,{children:" "})})]})]})},$e=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.Z,{children:(0,s.jsx)(U.m,{children:(0,s.jsx)(U.m.TitleArea,{variant:"large",children:(0,s.jsx)(U.m.Title,{children:"Profile"})})})}),(0,s.jsx)(We,{})]}),He=()=>{const{createJupyterServer:e,deleteJupyterServer:t}=A();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Servers"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})}),(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(Ne.z,{onClick:t=>{t.preventDefault(),e("test1")},children:"Create Jupyter Server"}),(0,s.jsx)(Ne.z,{onClick:e=>{e.preventDefault(),t("test1")},children:"Delete Jupyter Server"})]})]})})},Be=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Settings"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})}),Ue=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(U.m,{children:(0,s.jsxs)(U.m.TitleArea,{variant:"large",children:[(0,s.jsx)(U.m.Title,{children:"Usage"}),(0,s.jsx)(U.m.Description,{children:"PREVIEW"})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(ne.Z,{children:[(0,s.jsx)(m.Z,{children:"This feature is being developed."}),(0,s.jsxs)(m.Z,{mt:3,children:["Follow progress on"," ",(0,s.jsx)($.Z,{href:"https://twitter.com/DatalayerIO",target:"_blank",children:"https://twitter.com/DatalayerIO"}),"."]})]})}),(0,s.jsx)(m.Z,{children:(0,s.jsx)(De,{size:200})})]})}),qe=()=>{const{jupyterLabAdapter:e,setJupyterLabAdapter:t,setServiceManager:m}=(0,P.Z)(),{user:p,setAuth:g}=(0,i.useStore)(),{createJupyterServer:f}=L(),{me:_}=(0,i.useApi)(),[x,y]=(0,c.useState)(),[w,v]=(0,c.useState)(null),[k,j]=(0,c.useState)("");return(0,c.useEffect)((()=>{const e=(0,i.getStoredUser)(),t=(0,i.getStoredToken)();e&&t&&(g(e,t),_(t))}),[]),(0,c.useEffect)((()=>{p?f(u.au).then((e=>{if(e.success){const t=e["jupyter-server"]??void 0;y(t)}else y(void 0)})).catch((e=>{y(void 0),console.error(`Failed to request the operator for service ${u.au}`,e)})):y(void 0)}),[p?.handle]),(0,c.useEffect)((()=>{if(!e&&p?.handle&&x){const e=e=>{t(e)},i=(0,s.jsx)(r.JupyterLabApp,{extensionPromises:(!1,{extensionPromises:[n.e(2800).then(n.t.bind(n,12800,23)),n.e(6640).then(n.t.bind(n,6640,23)).then((e=>e.default.filter((({id:e})=>!e.endsWith(":sessionDialogs"))))),n.e(5635).then(n.t.bind(n,15635,23)),n.e(1587).then(n.t.bind(n,61587,23)),n.e(7625).then(n.t.bind(n,27625,23)),n.e(6427).then(n.t.bind(n,26427,23)),n.e(3599).then(n.t.bind(n,13599,23)).then((e=>e.default.filter((({id:e})=>!e.endsWith(":manager"))))),n.e(1019).then(n.t.bind(n,91019,23)),n.e(7806).then(n.t.bind(n,17806,23)).then((e=>e.default)),n.e(7737).then(n.t.bind(n,57737,23)),n.e(1254).then(n.t.bind(n,51254,23)),n.e(8802).then(n.t.bind(n,58802,23)),n.e(7176).then(n.t.bind(n,77176,23)).then((e=>e.default.filter((({id:e})=>!e.includes(":language-server"))))),n.e(9845).then(n.t.bind(n,59845,23)),n.e(9448).then(n.t.bind(n,79448,23)).then((e=>e.default.filter((({id:e})=>!(e.includes(":language-server")||e.endsWith(":update-raw-mimetype")))))),n.e(5547).then(n.t.bind(n,5547,23)),n.e(3619).then(n.t.bind(n,33619,23)),n.e(1841).then(n.t.bind(n,31841,23)),n.e(2040).then(n.t.bind(n,52040,23)),n.e(6521).then(n.t.bind(n,46521,23)),n.e(4721).then(n.t.bind(n,44721,23))]}).extensionPromises,extensions:[o,a,l],headless:!0,disabledExtensions:[],onJupyterLab:e});v(i)}else v(null)}),[p?.handle,x]),(0,c.useEffect)((()=>{if(e&&p?.handle&&x?.token){const r=e.jupyterLab.serviceManager,i=(t=p.handle,n=u.au,s=x.token,((e,t,n)=>h.ServerConnection.makeSettings({baseUrl:e,wsUrl:t,token:n,appendToken:!0,init:{mode:"cors",credentials:"include",cache:"no-cache"}}))(`${u.dp}/jupyter/server/${t}/${n}`,`${u.uu}/jupyter/server/${t}/${n}`,s));r.remote=(e=>new h.ServiceManager({serverSettings:e}))(i),m(r)}var t,n,s}),[e,p?.handle,x?.token]),(0,s.jsx)(s.Fragment,{children:p?(0,s.jsxs)(r.Jupyter,{startDefaultKernel:!1,disableCssLoading:!0,collaborative:!0,children:[(0,s.jsxs)(d.Routes,{children:[(0,s.jsx)(d.Route,{path:"/",element:(0,s.jsx)(R,{content:(0,s.jsx)(we,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels",element:(0,s.jsx)(R,{content:(0,s.jsx)(we,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/debug",element:(0,s.jsx)(R,{content:(0,s.jsx)(Pe,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/kernels",element:(0,s.jsx)(R,{content:(0,s.jsx)(Le,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/pools",element:(0,s.jsx)(R,{content:(0,s.jsx)(Ae,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/environments",element:(0,s.jsx)(R,{content:(0,s.jsx)(ze,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/content",element:(0,s.jsx)(R,{content:(0,s.jsx)(Ie,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/servers",element:(0,s.jsx)(R,{content:(0,s.jsx)(He,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/usage",element:(0,s.jsx)(R,{content:(0,s.jsx)(Ue,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/billing",element:(0,s.jsx)(R,{content:(0,s.jsx)(Ze,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/settings",element:(0,s.jsx)(R,{content:(0,s.jsx)(Be,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/profile",element:(0,s.jsx)(R,{content:(0,s.jsx)($e,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/docs",element:(0,s.jsx)(R,{content:(0,s.jsx)(Te,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/logout",element:(0,s.jsx)(R,{content:(0,s.jsx)(i.Logout,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/about",element:(0,s.jsx)(R,{content:(0,s.jsx)(Fe,{version:k})})})]}),w]}):(0,s.jsxs)(d.Routes,{children:[(0,s.jsx)(d.Route,{path:"/",element:(0,s.jsx)(V,{content:(0,s.jsx)(Ce,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels",element:(0,s.jsx)(V,{content:(0,s.jsx)(Ce,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/login",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.LoginForm,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/join",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.JoinForm,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/join/confirm",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.JoinConfirm,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/join/welcome",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.JoinWelcome,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/password",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.NewPasswordForm,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/password/confirm",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.NewPasswordConfirm,{})})}),(0,s.jsx)(d.Route,{path:"/jupyter/kernels/password/welcome",element:(0,s.jsx)(V,{content:(0,s.jsx)(i.NewPasswordWelcome,{})})})]})})},Ge=qe},14479:(e,t,n)=>{n.d(t,{PV:()=>i,ml:()=>a});const s={operatorServer:n(84803).Gd},r=e=>{s.operatorServer=e},i=()=>s.operatorServer,a=()=>{let e=Object.create({});const t=document.getElementById("datalayer-config-data");return t&&(e=JSON.parse(t.textContent||""),e.operatorServer&&r(e.operatorServer)),e}},69252:(e,t,n)=>{n.d(t,{v:()=>i});var s=n(1865),r=n(66274);async function i(e="",t={}){const n=r.ServerConnection.makeSettings(),i=s.URLExt.join(n.baseUrl,"jupyter_kernels",e);let a;try{a=await r.ServerConnection.makeRequest(i,t,n)}catch(e){throw new r.ServerConnection.NetworkError(e)}let o=await a.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new r.ServerConnection.ResponseError(a,o.message||o);return o}},19036:(e,t,n)=>{n.r(t),n.d(t,{default:()=>dt});var s=n(1339);const r=new s.zZ({name:"@datalayer/icons:circle-white",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 72" fill="currentColor" aria-hidden="true">\n  <circle cx="36" cy="36" r="28" fill="#fff"/>\n  <circle cx="36" cy="36" r="28" fill="none" stroke="#000" stroke-linejoin="round" stroke-width="2"/>\n</svg>\n'});var i=n(56653),a=n(96129),o=n(91295),l=n(8826),c=n(67370),d=n(62086),h=n(1865),u=n(66274),m=n(40158),p=n(41074),g=n(45683),f=n(77177),_=n(68827),x=n(19767),y=n(97930),w=n(87717),v=n(76797),k=n(74901),j=n(24608),b=n.n(j),C=n(38332),S=n(74512),M=n(96697),F=n(59689),E=n(32126),D=n(18321),Z=n(2470),I=n(19118),N=n(62005),R=n(76602),P=n(66029);function T(e){const{actions:t,disabled:n,variant:s,preference:r,serviceManager:i,selection:a,setSelection:o,translator:l}=e,c=(0,P.useMemo)((()=>(l??d.nullTranslator).load("jupyterlab")),[l]),u={maxHeight:"large",width:"cell"===s?"small":"auto"},p=(0,P.useCallback)((()=>{const e=function(e,t,n){const s=e.local.kernelspecs.specs,r=e.local.sessions.running();if(!s)return null;const i=(n=n??d.nullTranslator).load("jupyterlab"),a={},o=Object.values(s.kernelspecs).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"local"})));o.length&&(a[i.__("Local")]=o);const l=Object.values(e.remote?.kernelspecs.specs?.kernelspecs??{}).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"remote"})));l.length&&(a[i.__("Remote")]=l);const c=Object.values(e.browser?.kernelspecs.specs?.kernelspecs??{}).filter((e=>!!e)).map((e=>({name:e.name,language:e.language,displayName:e.display_name,location:"browser"})));if(c.length&&(a[i.__("Browser")]=c),!r||!s.kernelspecs)return a;const u=Array.from(r).filter((e=>e.kernel&&e.kernel.id!==t)).map((e=>{const t=s.kernelspecs[e.kernel.name];return{id:e.kernel.id,name:t.name,language:t.language,displayName:e.name||h.PathExt.basename(e.path),location:"local"}}));return u.length&&(a.Session=u),a}(i,r?.id,l);if(!a){let t=null;!n&&r&&e&&(r.id&&e.Session&&(t=e.Session.find((e=>e.id===r.id))??null),!t&&r.kernelDisplayName&&(t=Object.values(e??{}).reduce(((e,t)=>e.concat(t)),[]).find((e=>e.displayName===r.kernelDisplayName))??null)),o(t)}return e}),[r,i,l]),g=p();return(0,S.jsxs)(Z.P,{children:["cell"===s?(0,S.jsx)(Z.P.Anchor,{children:(0,S.jsx)(I.h,{disabled:n||null===g,icon:e=>(0,S.jsx)(m.kernelIcon.react,{className:"primer-mod-labicon",tag:"span",...e}),"aria-label":c.__("Select the kernel"),size:"small",variant:"invisible"})}):(0,S.jsxs)(Z.P.Button,{variant:"default",disabled:n||null===g,children:[(0,S.jsx)(N.Z,{fontWeight:"bold",children:c.__("Kernel:")})," "+(a?.displayName??c.__("No Kernel"))]}),(0,S.jsx)(Z.P.Overlay,{...u,sx:{overflowY:"auto"},children:(0,S.jsxs)(R.S,{selectionVariant:"single",children:[(0,S.jsx)(R.S.Item,{selected:null===a,onSelect:()=>{o(null)},children:"document"===s?c.__("No Kernel"):c.__("Default kernel")},"null"),Object.entries(g??{}).map((([e,t])=>(0,S.jsx)(R.S.Group,{title:e,children:t.map((e=>(0,S.jsx)(R.S.Item,{selected:e.location===a?.location&&(e.id??e.name)===(a?.id??a?.name),onSelect:()=>{o(e)},children:e.displayName},e.name)))},e))),t&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(R.S.Divider,{}),t]})]})})]})}var z,L=n(18310),A=n(52746),O=n(16419),K=n(14675);function V(e){const{className:t,translator:n,selectedVariables:s,setSelectVariable:r,transferVariables:i,setTransferVariable:a,kernelVariables:o}=e,l=(0,P.useMemo)((()=>(n??d.nullTranslator).load("jupyterlab")),[n]),c=Object.keys(o??{}).length,h=[{header:l.__("Name"),field:"name",rowHeader:!0},{header:l.__("Type"),field:"type"},{id:"select",maxWidth:"70px",header:()=>(0,S.jsx)(I.h,{"aria-label":s.length===c?l.__("Deselect all"):l.__("Select all"),title:s.length===c?l.__("Deselect all"):l.__("Select all"),icon:s.length===c?m.checkIcon.react:()=>(0,S.jsx)("span",{}),variant:"default",size:"small",onClick:e=>{e.preventDefault(),s.length===c?r([]):r(Object.keys(o??{}))}}),renderCell:e=>{const t=s.includes(e.name);return(0,S.jsx)(I.h,{"aria-label":t?l.__("Deselect: %1",e.name):l.__("Select: %1",e.name),title:t?l.__("Deselect: %1",e.name):l.__("Select: %1",e.name),icon:t?m.checkIcon.react:()=>(0,S.jsx)("span",{}),variant:"default",size:"small",onClick:t=>{t.preventDefault();const n=s.findIndex((t=>t===e.name));if(n>=0){const e=[...s];e.splice(n,1),r(e)}else r([...s,e.name])}})}}];return(0,S.jsxs)(E.Z,{className:t,children:[(0,S.jsx)(N.Z,{id:"kernel-toggle-variables",fontWeight:"bold",children:l.__("Transfer variables")}),(0,S.jsx)(L.Z,{checked:i,onClick:()=>{a(!i)},"aria-labelledby":"kernel-toggle-variables"}),i&&(0,S.jsxs)(A.i.Container,{sx:{flex:"1 1 auto"},children:[(0,S.jsx)(A.i.Title,{as:"h2",id:"dla-kernel-variables",children:l.__("Kernel variables")}),(0,S.jsx)(A.i.Subtitle,{as:"p",id:"dla-kernel-variables-subtitle",children:l.__("The list of transferable kernel variables.")}),o?Object.keys(o??{}).length?(0,S.jsx)(O.w,{"aria-labelledby":"dla-kernel-variables","aria-describedby":"dla-kernel-variables-subtitle",data:Object.entries(o??{}).map((([e,t],n)=>({id:n,name:e,type:t}))).sort(((e,t)=>e.name>t.name?1:-1)),columns:h,cellPadding:"condensed"}):(0,S.jsx)(E.Z,{sx:{gridArea:"table"},children:(0,S.jsx)(K.Z,{border:!0,children:(0,S.jsx)(K.Z.Heading,{children:l.__("No eligible variables.")})})}):(0,S.jsx)(A.i.Skeleton,{"aria-labelledby":"dla-kernel-variables","aria-describedby":"dla-kernel-variables-subtitle",columns:h,rows:5})]})]})}function J(e){return`\ndef _pickle_variables():\n    from base64 import encodebytes\n    import json\n    import pickle\n    _names = {${e.map((e=>`"${e}"`)).join(",")}}\n    _data = {}\n    for _n in _names:\n        try:\n            _v = globals()[_n]\n            dump = pickle.dumps(_v)\n            _data[_n] = encodebytes(dump).decode("ascii")\n        except:\n            ...\n\n    return json.dumps(_data)\n\n_pickle_variables()\n`}function W(e){return`\ndef _load_variables():\n    from base64 import decodebytes\n    import json\n    import pickle\n    _data = json.loads(${e})\n    _loaded = []\n    for _n, _v in _data.items():\n        try:\n            dump = decodebytes(_v.encode("ascii"))\n            globals()[_n] = pickle.loads(dump)\n            _loaded.append(_n)\n        except:\n            ...\n    return json.dumps(_loaded)\n\n_load_variables()\n`}class ${constructor(e,t){this.translator=e.translator||d.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._path=e.path??y.UUID.uuid4(),this._type=e.type??"",this._name=e.name??"",this._setBusy=e.setBusy,this._kernelPreference=e.kernelPreference??{},this._serviceManager=t}get session(){return this._session??null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get location(){return this._location}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!y.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:y.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get kernelManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernels;case"remote":return this._serviceManager.remote.kernels;default:return this._serviceManager.local.kernels}}get serviceManager(){return this._serviceManager}get sessionManager(){switch(this._location){case"browser":return this._serviceManager.browser.sessions;case"remote":return this._serviceManager.remote.sessions;default:return this._serviceManager.local.sessions}}get specsManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernelspecs;case"remote":return this._serviceManager.remote.kernelspecs;default:return this._serviceManager.local.kernelspecs}}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){const e=this.session?.kernel;return this._pendingKernelName===this.noKernelName?this.noKernelName:this._pendingKernelName?this.specsManager.specs?.kernelspecs[this._pendingKernelName]?.display_name??this._pendingKernelName:e?this.specsManager.specs?.kernelspecs[e.name]?.display_name??e.name:this.noKernelName}get kernelDisplayStatus(){const e=this.session?.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!e&&this._pendingKernelName?"initializing":e||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?("connected"===e?.connectionStatus?e?.status:e?.connectionStatus)??"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Kernel")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch((e=>{console.error(`Kernel not shut down ${e}`)})),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),k.Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const n=z.getDefaultKernel({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});n&&(t={name:n})}if(t)try{return await this._changeKernel(t),!1}catch(e){}return!0}async restartKernel(){const e=this.session?.kernel||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(this.session?.kernel?.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit(this.session?.kernel?.status||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:this.session?.kernel||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,M.find)(e.running(),(e=>e.path===this._path));if(t)try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){const e=this._session,t=this._isTerminating,n=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(e?.shutdown()),this._isTerminating=!1,e?.dispose(),this._session=null;const t=e?.kernel||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:e,newValue:null})}catch(s){this._isTerminating=t,this._isReady=n;const r=e?.kernel?.status;throw void 0===r?this._statusChanged.emit("unknown"):this._statusChanged.emit(r),s}}async _startIfNecessary(){const e=this.kernelPreference;return!this.isDisposed&&!this.session?.kernel&&!1!==e.shouldStart&&!1!==e.canStart&&this.startKernel()}async _changeKernel(e={}){let t;switch(e.name?.split("-",1)[0]){case"browser":t="browser";break;case"remote":t="remote";break;default:t="local"}const n=this._location===t;if(this._location=t,"local"!==this._location&&(e.name=e.name.replace(/^(remote-|browser-)/,"")),await this.kernelManager.refreshRunning(),Array.from(this.kernelManager.running()).forEach((t=>{t.name===e.name&&(e.id=t.id)})),e.name&&(this._pendingKernelName=e.name),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),n&&this._session&&!this._isTerminating)try{return console.log("--- Reusing session and changing the kernel with a model",this._session,e),await this._session.changeKernel(e),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const s=h.PathExt.dirname(this._path),r=this._pendingSessionRequest=h.PathExt.join(s,y.UUID.uuid4());try{this._statusChanged.emit("starting");const t=await this.sessionManager.startNew({path:r,type:this._type,name:this._name,kernel:e});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw this._handleSessionError(e),e}}_handleNewSession(e){if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=e.kernel?.name??"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:e?.kernel||null,name:"kernel"}),this._statusChanged.emit(e?.kernel?.status||"unknown"),e?.kernel||null}async _handleSessionError(e){this._handleNewSession(null);let t="",n="";try{t=e.traceback,n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=(0,S.jsxs)("div",{children:[e&&(0,S.jsx)("pre",{children:e}),t&&(0,S.jsx)("details",{className:"jp-mod-wide",children:(0,S.jsx)("pre",{children:t})})]}),s=this._dialog=new a.Dialog({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[a.Dialog.okButton()]});await s.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){if("dead"===t){const t=e.kernel?.model;if(t?.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}_path="";_name="";_type="";_prevKernelName="";_kernelPreference;_isDisposed=!1;_location="local";_disposed=new k.Signal(this);_session=null;_ready=new y.PromiseDelegate;_initializing=!1;_initStarted=new y.PromiseDelegate;_initPromise=new y.PromiseDelegate;_isReady=!1;_isTerminating=!1;_isRestarting=!1;_kernelChanged=new k.Signal(this);_preferenceChanged=new k.Signal(this);_sessionChanged=new k.Signal(this);_statusChanged=new k.Signal(this);_connectionStatusChanged=new k.Signal(this);translator;_trans;_pendingInput=!1;_iopubMessage=new k.Signal(this);_unhandledMessage=new k.Signal(this);_propertyChanged=new k.Signal(this);_dialog=null;_setBusy;_busyDisposable=null;_serviceManager;_pendingKernelName="";_pendingSessionRequest=""}!function(e){e.getDefaultKernel=function(e){const{preference:t}=e,{shouldStart:n}=t;return!1===n?null:z.getDefaultKernel(e)}}($||($={}));class H{constructor(e={},t){this._translator=e.translator??d.nullTranslator,this._multiServiceManager=t}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator.load("jupyterlab");let n=t.__("Cancel");e.hasNoKernel&&(n=e.kernelDisplayName);const s=[a.Dialog.cancelButton({label:n}),a.Dialog.okButton({label:t.__("Select"),ariaLabel:t.__("Select Kernel")})],r=e.kernelPreference.autoStartDefault,i="boolean"==typeof r,o=new a.Dialog({title:t.__("Select Kernel for %1",e.name),body:new z.KernelSwitcher(e,this._multiServiceManager,this._translator),buttons:s,checkbox:i?{label:t.__("Always start the preferred kernel"),caption:t.__("Remember my choice and always start the preferred kernel"),checked:r}:null}),l=await o.launch();if(e.isDisposed||!l.button.accept)return;i&&null!==l.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:l.isChecked});const{kernel:c,variables:d,selectedVariables:h,notificationId:u}=await(l.value??Promise.resolve({kernel:null,variables:"",selectedVariables:[],notificationId:void 0}));if(null!==c||e.hasNoKernel||(await e.shutdown(),u&&a.Notification.update({id:u,message:"Kernel stopped.",type:"success",autoClose:3e3})),c){u&&a.Notification.update({id:u,message:"Starting the new kernelâ€¦"});const n=await e.changeKernel(c);if(n){await new D.KernelExecutor({connection:n}).execute('\ndef _change_current_directory():\n    import os\n    from pathlib import Path\n    _local_content_mount_point = Path(Path.home() / "content" / "local")\n    _local_content_mount_point.mkdir(parents=True, exist_ok=True)\n    os.chdir(_local_content_mount_point)\n\n    assert Path.cwd() == _local_content_mount_point\n\n_change_current_directory()\n');try{const n=[];if(d){u&&a.Notification.update({id:u,message:"Importing the variablesâ€¦"});const t=(await new D.KernelExecutor({connection:e.session.kernel}).execute(W(d))).get(0).data["text/plain"]||"[]",s=JSON.parse(t.slice(1,t.length-1));n.push(...h.filter((e=>!s.includes(e))))}u&&a.Notification.update({id:u,message:"Kernel is ready",type:n.length?"warning":"success",autoClose:3e3,actions:n.length?[{label:t.__("Warnings"),callback:()=>{(0,a.showDialog)({title:t.__("Warning"),body:`The following variables were not transferred: ${n.join(", ")}`,buttons:[a.Dialog.warnButton({label:t.__("Dismiss")})]})},displayType:"warn"}]:void 0})}catch(e){console.error(e),u&&a.Notification.update({id:u,message:"Fail to import the variables",type:"error"})}}}}async restart(e){const t=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const n=e.session?.kernel;if(!n&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!n)throw new Error("No kernel to restart");const s=a.Dialog.warnButton({label:t.__("Restart"),ariaLabel:t.__("Confirm Kernel Restart")}),r=await(0,a.showDialog)({title:t.__("Restart Kernel?"),body:t.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[a.Dialog.cancelButton({ariaLabel:t.__("Cancel Kernel Restart")}),s]});return!n.isDisposed&&!!r.button.accept&&(await e.restartKernel(),!0)}_translator;_multiServiceManager}!function(e){class t extends m.ReactWidget{sessionContext;multiServiceManager;translator;_selection=null;_canTransferFrom=!1;_canTransferTo=!1;_transferVariables=!1;_hasLoadedVariables=!1;_kernelVariables;_toTransfer=[];constructor(e,t,n){super(),this.sessionContext=e,this.multiServiceManager=t,this.translator=n,this.addClass("dla-kernel-switcher");const s=this.sessionContext.specsManager.specs?.kernelspecs;if(this.sessionContext.session?.kernel?.name&&s){const e=Object.values(s).find((e=>e?.name===this.sessionContext.session.kernel.name));e&&(this._canTransferFrom="python"===e.language)}}render(){const{kernelPreference:{canStart:e}}=this.sessionContext;return(0,S.jsx)(F.ZP,{theme:D.jupyterTheme,children:(0,S.jsxs)(E.Z,{className:"dla-kernel-picker",children:[(0,S.jsx)(T,{disabled:!1===e,preference:{id:this.sessionContext.session?.id,kernelDisplayName:this.sessionContext.kernelPreference.shouldStart?this.sessionContext.kernelDisplayName:void 0},serviceManager:this.multiServiceManager,translator:this.translator,selection:this._selection,setSelection:this.setSelection.bind(this)}),this._canTransferFrom&&this._canTransferTo&&(0,S.jsx)(V,{translator:this.translator,selectedVariables:this._toTransfer,setSelectVariable:this.setSelectedVariables.bind(this),transferVariables:this._transferVariables,setTransferVariable:this.setTransferVariable.bind(this),kernelVariables:this._kernelVariables})]})})}async getValue(){let e,t="";if(this._toTransfer.length){e=a.Notification.emit("Saving the variablesâ€¦","in-progress",{autoClose:!1});try{t=await this.getKernelVariables()}catch(t){return e&&a.Notification.update({id:e,message:"Failed to save the variables",type:"error",autoClose:!1}),Promise.reject(t)}}return{kernel:this._selection?{name:["browser","remote"].includes(this._selection.location)?`${this._selection.location}-${this._selection.name}`:this._selection.name,id:this._selection.id}:null,kernelLocation:this._selection?.location,notificationId:e,variables:t,selectedVariables:this._toTransfer}}async listKernelVariables(){if(this._hasLoadedVariables)return Promise.resolve();this._hasLoadedVariables=!0;const e=(await new D.KernelExecutor({connection:this.sessionContext.session.kernel}).execute("\ndef _list_variables():\n    import json\n    from types import ModuleType, FunctionType, MethodType, TracebackType\n\n    _FORBIDDEN_TYPES = [type, ModuleType, FunctionType, MethodType, TracebackType]\n    try:\n        from IPython.core.autocall import ExitAutocall\n        _FORBIDDEN_TYPES.append(ExitAutocall)\n    except ImportError:\n        pass\n    _exclude = tuple(_FORBIDDEN_TYPES)\n\n    _all = frozenset(globals())\n    _vars = {}\n    for _n in _all:\n        _v = globals()[_n]\n        \n        if not (\n            _n.startswith('_') or\n            isinstance(_v, _exclude) or\n            # Special IPython variables\n            (_n == 'In' and isinstance(_v, list)) or\n            (_n == 'Out' and isinstance(_v, dict))\n        ):\n            _vars[_n] = type(_v).__qualname__\n\n    return json.dumps(_vars)\n\n_list_variables()")).get(0).data["text/plain"];if(e)if(this._kernelVariables=JSON.parse(e.slice(1,e.length-1)),this._toTransfer.length){const e=Object.keys(this._kernelVariables??{});this._toTransfer=this._toTransfer.filter((t=>e.includes(t)))}else this._toTransfer=Object.keys(this._kernelVariables??{});else this._kernelVariables={};this.update()}async getKernelVariables(){return this._toTransfer.length?(await new D.KernelExecutor({connection:this.sessionContext.session.kernel}).execute(J(this._toTransfer))).get(0).data["text/plain"]:""}setSelectedVariables(e){y.JSONExt.deepEqual(this._toTransfer,e)||(this._toTransfer=e,this.update())}setTransferVariable(e){this._transferVariables!==e&&(this._transferVariables=e,this._transferVariables&&this.listKernelVariables().catch((e=>{this._hasLoadedVariables=!1,console.error("Failed to list the kernel variable",e)})),this.update())}setSelection(e){null!==e?this._selection?.displayName!==e.displayName&&(this._selection={...e},this._canTransferTo="python"===e.language,this.update()):null!==this._selection&&(this._selection=null,this._canTransferTo=!1,this.update())}}e.KernelSwitcher=t,e.getDefaultKernel=function(e){const{specs:t,preference:n}=e,{name:s,language:r,canStart:i,autoStartDefault:a}=n;if(!t||!1===i)return null;const o=a?t.default:null;if(!s&&!r)return o;for(const e in t.kernelspecs)if(e===s)return s;if(!r)return o;const l=[];for(const e in t.kernelspecs){const n=t.kernelspecs[e]?.language;r===n&&l.push(e)}if(1===l.length){const e=l[0];return console.warn("No exact match found for "+e+", using kernel "+e+" that matches language="+r),e}return o}}(z||(z={}));const B=new y.Token("@datalayer/jupyter-kernels:multi-service-manager"),U=new y.Token("@datalayer/jupyter-kernels:browser-router"),q=new y.Token("@datalayer/jupyter-kernels:plugin");var G;!function(e){e.createConsole="@datalayer/jupyter-kernels:new-browser-console",e.createNotebook="@datalayer/jupyter-kernels:new-browser-notebook"}(G||(G={}));const Y={id:"@datalayer/jupyter-kernels:browser-localforage",autoStart:!0,provides:f.ILocalForage,activate:e=>({localforage:b()})},X={id:"@datalayer/jupyter-kernels:browser-localforage-memory-storage",autoStart:!0,requires:[f.ILocalForage],activate:async(e,t)=>{JSON.parse(h.PageConfig.getOption("enableMemoryStorage")||"false")&&(console.warn("Memory storage fallback enabled: contents and settings may not be saved"),await(0,f.ensureMemoryStorage)(t.localforage))}},Q={id:"@datalayer/jupyter-kernels:browser-contents",requires:[f.ILocalForage],autoStart:!0,provides:p.IContents,activate:(e,t)=>{const n=h.PageConfig.getOption("contentsStorageName"),s=JSON.parse(h.PageConfig.getOption("contentsStorageDrivers")||"null"),{localforage:r}=t,i=new p.Contents({storageName:n,storageDrivers:s,localforage:r});return e.started.then((()=>i.initialize().catch(console.warn))),i}},ee={id:"@datalayer/jupyter-kernels:browser-contents-routes",autoStart:!0,requires:[U,p.IContents],activate:(e,t,n)=>{t.get("/api/contents/(.+)/checkpoints",(async(e,t)=>{const s=await n.listCheckpoints(t);return new Response(JSON.stringify(s))})),t.post("/api/contents/(.+)/checkpoints/(.*)",(async(e,t,s)=>{const r=await n.restoreCheckpoint(t,s);return new Response(JSON.stringify(r),{status:204})})),t.post("/api/contents/(.+)/checkpoints",(async(e,t)=>{const s=await n.createCheckpoint(t);return new Response(JSON.stringify(s),{status:201})})),t.delete("/api/contents/(.+)/checkpoints/(.*)",(async(e,t,s)=>{const r=await n.deleteCheckpoint(t,s);return new Response(JSON.stringify(r),{status:204})})),t.get("/api/contents(.*)",(async(e,t)=>{const s={content:"1"===e.query?.content},r=await n.get(t,s);return r?new Response(JSON.stringify(r)):new Response(null,{status:404})})),t.post("/api/contents(.*)",(async(e,t)=>{const s=e.body,r=s?.copy_from;let i;return i=r?await n.copy(r,t):await n.newUntitled(s),i?new Response(JSON.stringify(i),{status:201}):new Response(null,{status:400})})),t.patch("/api/contents(.*)",(async(e,t)=>{const s=e.body?.path??"";t="/"===t[0]?t.slice(1):t;const r=await n.rename(t,s);return new Response(JSON.stringify(r))})),t.put("/api/contents/(.+)",(async(e,t)=>{const s=e.body,r=await n.save(t,s);return new Response(JSON.stringify(r))})),t.delete("/api/contents/(.+)",(async(e,t)=>(await n.delete(t),new Response(null,{status:204}))))}};class te{constructor(e){const t=e?.workerUrl??h.URLExt.join(h.PageConfig.getBaseUrl(),_.WORKER_NAME);this.initialize(t).catch(console.warn)}get registrationChanged(){return this._registrationChanged}get enabled(){return null!==this._registration}get ready(){return this._ready.promise}async initialize(e){const{serviceWorker:t}=navigator;let n=null;if(t?t.controller&&(n=await t.getRegistration(t.controller.scriptURL)||null,console.info("JupyterLite ServiceWorker was already registered")):console.warn("ServiceWorkers not supported in this browser"),!n&&t)try{const s=await t.getRegistrations();await Promise.all(s.map((e=>e.unregister()))),console.info("Existing JupyterLite ServiceWorkers unregistered"),console.info("Registering new JupyterLite ServiceWorker",e),n=await t.register(e,{scope:h.PageConfig.getBaseUrl()}),console.info("JupyterLite ServiceWorker was successfully registered")}catch(e){console.warn(e),console.warn(`JupyterLite ServiceWorker registration unexpectedly failed: ${e}`)}this.setRegistration(n),n?this._ready.resolve(void 0):this._ready.reject(void 0)}setRegistration(e){this._registration=e,this._registrationChanged.emit(this._registration)}_registration=null;_registrationChanged=new k.Signal(this);_ready=new y.PromiseDelegate}const ne={id:"@datalayer/jupyter-kernels:browser-service-worker",autoStart:!0,provides:_.IServiceWorkerManager,activate:e=>new te({workerUrl:h.URLExt.join(h.PageConfig.getBaseUrl(),"jupyter_kernels/service-worker",_.WORKER_NAME)})},se={id:"@datalayer/jupyter-kernels:emscripten-filesystem",autoStart:!0,requires:[B,U],optional:[_.IServiceWorkerManager],provides:p.IBroadcastChannelWrapper,activate:(e,t,n,s)=>{const{contents:r}=t.browser??{};if(!r)throw new Error("Unable to activate emscripten-filesystem plugin without the browser service manager.");const i=new p.BroadcastChannelWrapper({contents:r}),a="Kernel filesystem and JupyterLite contents";function o(e,t){t&&console.warn(t),e&&console.warn(e),t||e?console.warn(`${a} will NOT be synced`):console.info(`${a} will be synced`)}return s?s.ready.then((()=>{i.enable(),o()})).catch((e=>{o("JupyterLite ServiceWorker failed to become available",e)})):o("JupyterLite ServiceWorker not available"),i}},re={id:"@datalayer/jupyter-kernels:browser-kernels",autoStart:!0,provides:g.IKernels,requires:[g.IKernelSpecs],activate:(e,t)=>new g.Kernels({kernelspecs:t})},ie={id:"@datalayer/jupyter-kernels:browser-kernels-routes",autoStart:!0,requires:[U,g.IKernels],activate:(e,t,n)=>{t.get("/api/kernels",(async e=>{const t=await n.list();return new Response(JSON.stringify(t))})),t.post("/api/kernels/(.*)/restart",(async(e,t)=>{const s=await n.restart(t);return new Response(JSON.stringify(s))})),t.delete("/api/kernels/(.*)",(async(e,t)=>{const s=await n.shutdown(t);return new Response(JSON.stringify(s),{status:204})}))}},ae={id:"@datalayer/jupyter-kernels:browser-kernelspec",autoStart:!0,provides:g.IKernelSpecs,optional:[d.ITranslator,l.ILauncher],activate:(e,t,n)=>{const s=new g.KernelSpecs,r=(t??d.nullTranslator).load("datalayer");if(n){let e=null,t=new w.DisposableSet;new v.Poll({factory:async()=>{const i=s.specs;y.JSONExt.deepEqual(e,i)||(t.dispose(),e=i,t=new w.DisposableSet,Object.values(e?.kernelspecs??{}).map((e=>{if(e){const s=e.resources["logo-svg"]||e.resources["logo-64x64"];t.add(n.add({command:G.createConsole,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:r.__("Console"),kernelIconUrl:s,metadata:{kernel:y.JSONExt.deepCopy(e.metadata||{})}})),t.add(n.add({command:G.createNotebook,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:r.__("Notebook"),kernelIconUrl:s,metadata:{kernel:y.JSONExt.deepCopy(e.metadata||{})}}))}})))}})}return s}},oe={id:"@datalayer/jupyter-kernels:browser-kernelspec-routes",autoStart:!0,requires:[U,g.IKernelSpecs],activate:(e,t,n)=>{t.get("/api/kernelspecs",(async e=>{const{specs:t}=n;if(!t)return new Response(null);const s={},r=t.kernelspecs;Object.keys(r).forEach((e=>{const t=r[e],{resources:n}=t??{};s[e]={name:e,spec:t,resources:n}}));const i={default:t.default,kernelspecs:s};return new Response(JSON.stringify(i))}))}},le={id:"@datalayer/jupyter-kernels:browser-sessions",autoStart:!0,provides:x.ISessions,requires:[g.IKernels],activate:(e,t)=>new x.Sessions({kernels:t})},ce={id:"@datalayer/jupyter-kernels:browser-sessions-routes",autoStart:!0,requires:[U,x.ISessions],activate:(e,t,n)=>{t.get("/api/sessions/(.+)",(async(e,t)=>{const s=await n.get(t);return new Response(JSON.stringify(s),{status:200})})),t.get("/api/sessions",(async e=>{const t=await n.list();return new Response(JSON.stringify(t),{status:200})})),t.patch("/api/sessions(.*)",(async(e,t)=>{const s=e.body,r=await n.patch(s);return new Response(JSON.stringify(r),{status:200})})),t.delete("/api/sessions/(.+)",(async(e,t)=>(await n.shutdown(t),new Response(null,{status:204})))),t.post("/api/sessions",(async e=>{const t=e.body,s=await n.startNew(t);return new Response(JSON.stringify(s),{status:201})}))}};class de{constructor(e){this._stream=new k.Stream(this),this._serverSettings=e.serverSettings}async emit(e){}dispose(){}get isDisposed(){return!0}get stream(){return this._stream}get serverSettings(){return this._serverSettings}_stream;_serverSettings}const he=[Q,ee,{id:"@datalayer/jupyter-kernels:browser-manager",requires:[B],optional:[d.ITranslator,i.ILabStatus],provides:U,autoStart:!0,activate:(e,t,n,s)=>{const r=(n??d.nullTranslator).load("jupyterlab"),i=new _.Router,a={...u.ServerConnection.makeSettings(),WebSocket:C.WebSocket,fetch:async(e,t)=>{if(!(e instanceof Request))throw Error("Request info is not a Request");try{return i.route(e)}catch(n){if(n.message.startsWith("Cannot route"))return console.log(`No browser route for ${e.method} ${e.url}`),fetch(e,t);throw n}}},o=t.browser=new u.ServiceManager({standby:"never",serverSettings:a,events:new de({serverSettings:a})});let l=0;return e.commands.addCommand(G.createConsole,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&o.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return o.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?r.__("New Console"):r.__("Console")},caption:r.__("Create a new console"),icon:e=>e.isPalette?void 0:m.consoleIcon,execute:n=>{const i=l++;let a=n.path;return a||(a=h.PathExt.join(n.basePath||"",`console-browser-${i}-${y.UUID.uuid4()}`)),n.sessionContext=new $({sessionManager:t.sessions,specsManager:t.kernelspecs,path:t.contents.localPath(a),name:n.name||r.__("Console %1",i),type:"console",kernelPreference:n.kernelPreference,setBusy:s?()=>s.setBusy():void 0},t),e.commands.execute("console:create",n)}}),e.commands.addCommand(G.createNotebook,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&o.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return o.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?r.__("New Notebook"):r.__("Notebook")},caption:r.__("Create a new notebook"),icon:e=>e.isPalette?void 0:m.notebookIcon,execute:t=>e.commands.execute("notebook:create-new",t)}),i}},se,re,ie,ae,oe,X,Y,ne,le,ce];var ue,me,pe=n(69252),ge=n(53004),fe=n(34882),_e=n(2998);class xe{constructor(e){const t=this._manager=e.manager;this.translator=e.translator||d.nullTranslator,this._trans=this.translator.load("jupyterlab"),this._factory=e.factory,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._opener=e.opener||ue.noOp,this._path=this._manager.contents.normalize(e.path),this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const n=this._manager.contents.localPath(this._path),s=this._factory.preferredLanguage(h.PathExt.basename(n)),r=this._manager.contents.getSharedModelFactory(this._path),i=r?.createNew({path:n,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:s,sharedModel:i,collaborationEnabled:r?.collaborative??!1}),this._readyPromise=t.ready.then((()=>this._populatedPromise.promise));const o=h.PathExt.extname(this._path);this.sessionContext=new $({sessionManager:t.sessions,specsManager:t.kernelspecs,path:n,type:".ipynb"===o?"notebook":"file",name:h.PathExt.basename(n),kernelPreference:e.kernelPreference||{shouldStart:!1},setBusy:e.setBusy},t),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),t.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new _e.RenderMimeRegistry.UrlResolver({path:this._path,contents:t.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}sessionContext;get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),k.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){return!(!this._contentsModel?.writable||this._model.collaborative)}urlResolver;async initialize(e){e?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then((()=>this._manager.ready.then((()=>this._rename(e)))))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path),t=await ue.getSavePath(e);if(this.isDisposed||!t)return;const n=this._manager.contents.driveName(this.path),s=""===n?t:`${n}:${t}`;if(s===this._path)return this.save();try{await this._manager.ready,await this._manager.contents.get(s),await this._maybeOverWrite(s)}catch(e){if(!e.response||404!==e.response.status)throw e;await this._finishSaveAs(s)}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path),t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then((()=>e.createCheckpoint(this._path)))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then((()=>t.deleteCheckpoint(this._path,e)))}restoreCheckpoint(e){const t=this._manager.contents,n=this._path;return this._manager.ready.then((()=>e?t.restoreCheckpoint(n,e):this.listCheckpoints().then((s=>{if(!this.isDisposed&&s.length)return e=s[s.length-1].id,t.restoreCheckpoint(n,e)}))))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then((()=>e.listCheckpoints(this._path)))}addSibling(e,t={}){const n=this._opener;return n&&n(e,t),new w.DisposableDelegate((()=>{e.close()}))}_onFileChanged(e,t){if("rename"!==t.type)return;let n=t.oldValue&&t.oldValue.path,s=t.newValue&&t.newValue.path;if(s&&0===this._path.indexOf(n||"")){let e=t.newValue;n!==this._path&&(s=this._path.replace(new RegExp(`^${n}/`),`${s}/`),n=this._path,e={last_modified:t.newValue?.created,path:s}),this._updateContentsModel({...this._contentsModel,...e}),this._updatePath(s)}}_onSessionChanged(e,t){if("path"!==t)return;const n=this._manager.contents.driveName(this.path);let s=this.sessionContext.session.path;n&&(s=`${n}:${s}`),this._updatePath(s)}_updateContentsModel(e){const t=e.writable&&!this._model.collaborative,n={path:e.path,name:e.name,type:e.type,writable:t,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format},s=this._contentsModel?.last_modified??null;this._contentsModel=n,s&&n.last_modified===s||this._fileChanged.emit(n)}_updatePath(e){if(this._path===e)return;this._path=e;const t=this._manager.contents.localPath(e),n=h.PathExt.basename(t);if(this.sessionContext.session?.path!==t&&this.sessionContext.session?.setPath(t),this.sessionContext.session?.name!==n&&this.sessionContext.session?.setName(n),this.urlResolver.path!==e&&(this.urlResolver.path=e),this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==n)){const t={...this._contentsModel,name:n,path:e};this._updateContentsModel(t)}this._pathChanged.emit(e)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then((e=>{e&&this._dialogs.selectKernel(this.sessionContext)}))}async _rename(e){const t=this.localPath.split("/");t[t.length-1]=e;let n=h.PathExt.join(...t);const s=this._manager.contents.driveName(this.path);s&&(n=`${s}:${n}`),await this._manager.contents.rename(this.path,n)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{await this._manager.ready;const t=await this._maybeSave(e);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(t),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(e){const{name:t}=e;if("ModalCancelError"===t||"ModalDuplicateError"===t)throw e;const n=this._manager.contents.localPath(this._path),s=h.PathExt.basename(n);throw this._handleError(e,this._trans.__("File Save Error for %1",s)),this._saveState.emit("failed"),e}}_revert(e=!1){const t={type:this._factory.contentType,content:null!==this._factory.fileFormat,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{}},n=this._path,s=this._model;return this._manager.ready.then((()=>this._manager.contents.get(n,t))).then((e=>{if(!this.isDisposed){if(e.content)if("json"===e.format)s.fromJSON(e.content);else{let t=e.content;-1!==t.indexOf("\r\n")?(this._lineEnding="\r\n",t=t.replace(/\r\n/g,"\n")):-1!==t.indexOf("\r")?(this._lineEnding="\r",t=t.replace(/\r/g,"\n")):this._lineEnding=null,s.fromString(t)}return this._updateContentsModel(e),s.dirty=!1,this._isPopulated?void 0:this._populate()}})).catch((async e=>{const t=this._manager.contents.localPath(this._path),n=h.PathExt.basename(t);throw this._handleError(e,this._trans.__("File Load Error for %1",n)),e}))}_maybeSave(e){const t=this._path;return this._manager.contents.get(t,{content:!1}).then((n=>{if(this.isDisposed)return Promise.reject(new Error("Disposed"));const s=this._lastModifiedCheckMargin,r=this.contentsModel?.last_modified,i=r?new Date(r):new Date,a=new Date(n.last_modified);return r&&a.getTime()-i.getTime()>s?this._timeConflict(i,n,e):this._manager.contents.save(t,e)}),(n=>{if(n.response&&404===n.response.status)return this._manager.contents.save(t,e);throw n}))}async _handleError(e,t){await(0,a.showErrorMessage)(t,e)}_maybeCheckpoint(e){let t=Promise.resolve(void 0);return this.canSave?(t=e?this.createCheckpoint().then():this.listCheckpoints().then((e=>{if(!this.isDisposed&&!e.length&&this.canSave)return this.createCheckpoint().then()})),t.catch((e=>{if(!e.response||403!==e.response.status)throw e}))):t}_timeConflict(e,t,n){const s=new Date(t.last_modified);if(console.warn(`Last saving performed ${e} while the current file seems to have been saved ${s}`),this._timeConflictModalIsOpen){const e=new Error("Modal is already displayed");return e.name="ModalDuplicateError",Promise.reject(e)}const r=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),i=a.Dialog.okButton({label:this._trans.__("Revert"),actions:["revert"]}),o=a.Dialog.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._timeConflictModalIsOpen=!0,(0,a.showDialog)({title:this._trans.__("File Changed"),body:r,buttons:[a.Dialog.cancelButton(),i,o]}).then((e=>{if(this._timeConflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(e.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,n);if(e.button.actions.includes("revert"))return this.revert().then((()=>t));const s=new Error("Cancel");return s.name="ModalCancelError",Promise.reject(s)}))}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e),n=a.Dialog.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,a.showDialog)({title:this._trans.__("File Overwrite?"),body:t,buttons:[a.Dialog.cancelButton(),n]}).then((t=>this.isDisposed?Promise.reject(new Error("Disposed")):t.button.accept?this._manager.contents.delete(e).then((()=>this._finishSaveAs(e))):void 0))}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(e){if("Cancel"===e.message||"Modal is already displayed"===e.message)throw e;const t=this._manager.contents.localPath(this._path),n=h.PathExt.basename(t);return this._handleError(e,this._trans.__("File Save Error for %1",n)),void this._saveState.emit("failed")}}_createSaveOptions(){let e=null;return"json"===this._factory.fileFormat?e=this._model.toJSON():(e=this._model.toString(),this._lineEnding&&(e=e.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}translator;_isReady=!1;_isDisposed=!1;_isPopulated=!1;_trans;_manager;_opener;_model;_path="";_lineEnding=null;_factory;_contentsModel=null;_readyPromise;_populatedPromise=new y.PromiseDelegate;_pathChanged=new k.Signal(this);_fileChanged=new k.Signal(this);_saveState=new k.Signal(this);_disposed=new k.Signal(this);_dialogs;_lastModifiedCheckMargin=500;_timeConflictModalIsOpen=!1}!function(e){e.getSavePath=function(e,n){const s=(n=n||d.nullTranslator).load("jupyterlab"),r=a.Dialog.okButton({label:s.__("Save"),accept:!0});return(0,a.showDialog)({title:s.__("Save File Asâ€¦"),body:new t(e),buttons:[a.Dialog.cancelButton(),r]}).then((e=>{if(e.button.accept)return e.value??void 0}))},e.noOp=function(){};class t extends fe.Widget{constructor(e){super({node:n(e)})}getValue(){return this.node.value}}function n(e){const t=document.createElement("input");return t.value=e,t}}(ue||(ue={}));class ye{constructor(e){this.translator=e.translator||d.nullTranslator,this.registry=e.registry,this.services=e.manager,this._dialogs=e.sessionDialogs??new a.SessionContextDialogs({translator:e.translator}),this._isConnectedCallback=e.isConnectedCallback||(()=>!0),this._opener=e.opener,this._when=e.when||e.manager.ready;const t=new o.DocumentWidgetManager({registry:this.registry,translator:this.translator});t.activateRequested.connect(this._onActivateRequested,this),t.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=t,this._setBusy=e.setBusy}registry;services;get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e,this._contexts.forEach((t=>{const n=me.saveHandlerProperty.get(t);n&&(!0!==e||n.isActive?!1===e&&n.isActive&&n.stop():n.start())})),this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e,this._contexts.forEach((t=>{const n=me.saveHandlerProperty.get(t);n&&(n.saveInterval=e||120)})),this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e,this._contexts.forEach((t=>{t.lastModifiedCheckMargin=e})),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,k.Signal.clearData(this),this._contexts.forEach((e=>this._widgetManager.closeWidgets(e))),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map((e=>this._widgetManager.closeWidgets(e)))).then((()=>{}))}closeFile(e){const t=this._contextsForPath(e).map((e=>this._widgetManager.closeWidgets(e)));return Promise.all(t).then((e=>{}))}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then((()=>this.services.contents.delete(e))).then((()=>(this._contextsForPath(e).forEach((e=>this._widgetManager.deleteWidgets(e))),Promise.resolve(void 0))))}duplicate(e){const t=h.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const n=h.PathExt.normalize(e);let s=[t];if("default"===t){const e=this.registry.defaultWidgetFactory(n);if(!e)return;s=[e.name]}else null===t&&(s=this.registry.preferredWidgetFactories(n).map((e=>e.name)));for(const e of this._contextsForPath(n))for(const t of s)if(null!==t){const n=this._widgetManager.findWidget(e,t);if(n)return n}}newUntitled(e){return"file"===e.type&&(e.ext=e.ext||".txt"),this.services.contents.newUntitled(e)}open(e,t="default",n,s){return this._createOrOpenDocument("open",e,t,n,s)}openOrReveal(e,t="default",n,s){const r=this.findWidget(e,t);return r?(this._opener.open(r,{type:t,...s}),r):this.open(e,t,n,s??{})}overwrite(e,t){const n=`${t}.${y.UUID.uuid4()}`,s=()=>this.rename(n,t);return this.rename(e,n).then((()=>this.deleteFile(t))).then(s,s)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,M.find)(this._contexts,(e=>e.path===n&&e.factoryName===t))}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter((e=>e.path===t))}_createContext(e,t,n){const s=new xe({opener:(e,t)=>{this._widgetManager.adoptWidget(s,e),this._opener.open(e,t)},manager:this.services,factory:t,path:e,kernelPreference:n,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator}),r=new o.SaveHandler({context:s,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return me.saveHandlerProperty.set(s,r),s.ready.then((()=>{this.autosave&&r.start()})),s.disposed.connect(this._onContextDisposed,this),this._contexts.push(s),s}_onContextDisposed(e){M.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if("default"===t){const s=n.defaultWidgetFactory(e);if(!s)return;t=s.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",s,r){const i=this._widgetFactoryFor(t,n);if(!i)return;const a=i.modelName||"text",o=this.registry.getModelFactory(a);if(!o)return;const l=this.registry.getKernelPreference(t,i.name,s);let c,d=Promise.resolve(void 0);if("open"===e)c=this._findContext(t,o.name)||null,c||(c=this._createContext(t,o,l),d=this._when.then((()=>c.initialize(!1))));else{if("create"!==e)throw new Error(`Invalid argument 'which': ${e}`);c=this._createContext(t,o,l),d=this._when.then((()=>c.initialize(!0)))}const h=this._widgetManager.createWidget(i,c);return this._opener.open(h,{type:i.name,...r}),d.catch((e=>{console.error(`Failed to initialize the context with '${o.name}' for ${t}`,e),h.close()})),h}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){"confirmClosingDocument"===t.name&&this._stateChanged.emit(t)}translator;_activateRequested=new k.Signal(this);_contexts=[];_opener;_widgetManager;_isDisposed=!1;_autosave=!0;_autosaveInterval=120;_lastModifiedCheckMargin=500;_renameUntitledFileOnSave=!0;_when;_setBusy;_dialogs;_isConnectedCallback;_stateChanged=new k.Signal(this)}!function(e){e.saveHandlerProperty=new ge.AttachedProperty({name:"saveHandler",create:()=>{}})}(me||(me={}));var we=n(76838),ve=n(54577);class ke extends u.KernelManager{async startNew(e,t){const n=await(0,we.SP)({...e,params:{param1:"value1"}},this.serverSettings);return super.connectTo({...t,model:n})}}class je extends u.SessionManager{async startNew(e,t){const n=await(0,ve.yj)({...e,params:{param1:"value1"}},this.serverSettings);return await this.refreshRunning(),this.connectTo({...t,model:n})}}class be{_serviceManager;_kernelManager;_sessionManager;constructor(e){this._kernelManager=new ke({serverSettings:e.kernels.serverSettings}),e.kernels=this._kernelManager,this._sessionManager=new je({serverSettings:e.sessions.serverSettings,kernelManager:e.kernels}),e.sessions=this._sessionManager,this._serviceManager=e}get isReady(){return this._serviceManager.isReady}get ready(){return this._serviceManager.ready}get connectionFailure(){return this._serviceManager.connectionFailure}get isDisposed(){return this._serviceManager.isDisposed}get builder(){return this._serviceManager.builder}get contents(){return this._serviceManager.contents}get events(){return this._serviceManager.events}get serverSettings(){return this._serviceManager.serverSettings}get sessions(){return this._sessionManager}get kernels(){return this._kernelManager}get kernelspecs(){return this._serviceManager.kernelspecs}get settings(){return this._serviceManager.settings}get terminals(){return this._serviceManager.terminals}get user(){return this._serviceManager.user}get workspaces(){return this._serviceManager.workspaces}get nbconvert(){return this._serviceManager.nbconvert}dispose(){this._serviceManager.dispose()}}class Ce{_browserServices;_localServices;_remoteServices;_browserChanged=new k.Signal(this);_remoteChanged=new k.Signal(this);constructor(e){this._localServices=new be(e)}get browser(){return this._browserServices}set browser(e){this._browserServices=e?new be(e):e,this._browserChanged.emit(this._browserServices)}get browserChanged(){return this._browserChanged}get local(){return this._localServices}get remote(){return this._remoteServices}set remote(e){this._remoteServices=e?new be(e):e,this._remoteChanged.emit(this._remoteServices)}get remoteChanged(){return this._remoteChanged}get isReady(){return this._localServices.isReady}get ready(){return this._localServices.ready}get connectionFailure(){return this._localServices.connectionFailure}get isDisposed(){return this._localServices.isDisposed}get builder(){return this._localServices.builder}get contents(){return this._localServices.contents}get events(){return this._localServices.events}get serverSettings(){return this._localServices.serverSettings}get sessions(){return this._localServices.sessions}get kernels(){return this._localServices.kernels}get kernelspecs(){return this._localServices.kernelspecs}get settings(){return this._localServices.settings}get terminals(){return this._localServices.terminals}get user(){return this._localServices.user}get workspaces(){return this._localServices.workspaces}get nbconvert(){return this._localServices.nbconvert}dispose(){this._localServices.dispose()}}var Se=n(29482),Me=n(83513);const Fe=({app:e})=>{const{setJupyterLabAdapter:t}=(0,Me.Z)();return(0,P.useEffect)((()=>{t(D.JupyterLabAppAdapter.create(e))}),[]),(0,S.jsx)(Se.Z,{})};class Ee extends a.ReactWidget{_app;constructor(e,t){super(),this._app=e,this.addClass("dla-Container")}render(){return(0,S.jsx)(Fe,{app:this._app})}}const De=new s.zZ({name:"@datalayer/icons:browser",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 115.33" fill="currentColor" aria-hidden="true">\n  <path d="M76.98 97.89c-3.62 4.01-7.79 7.99-12.51 11.94 1.28-.17 2.56-.38 3.81-.62 3.42-.69 6.71-1.7 9.89-3.08.82-.35 1.62-.72 2.41-1.1.59.76 1.25 1.42 1.96 1.98.77.61 1.59 1.09 2.45 1.45-1.58.85-3.2 1.62-4.86 2.34a55.262 55.262 0 01-10.9 3.39c-3.74.76-7.61 1.14-11.59 1.14-3.98 0-7.82-.38-11.59-1.14-3.7-.73-7.26-1.83-10.76-3.32-.03 0-.1-.03-.14-.07a62.287 62.287 0 01-9.82-5.33 54.495 54.495 0 01-8.51-6.99 52.856 52.856 0 01-6.99-8.51c-2.08-3.08-3.84-6.37-5.33-9.82a55.262 55.262 0 01-3.39-10.9A60.34 60.34 0 010 57.66c0-3.98.38-7.82 1.14-11.59.73-3.7 1.83-7.26 3.32-10.76 0-.03.03-.1.07-.14 1.49-3.49 3.29-6.75 5.33-9.82 2.04-3.08 4.39-5.92 6.99-8.51 2.59-2.63 5.43-4.95 8.51-6.99 3.08-2.08 6.36-3.84 9.82-5.33 3.53-1.52 7.16-2.63 10.9-3.39C49.81.38 53.69 0 57.66 0c3.98 0 7.82.38 11.59 1.14 3.7.73 7.26 1.83 10.76 3.32.03 0 .1.03.14.07 3.46 1.49 6.75 3.29 9.82 5.33 3.08 2.04 5.92 4.39 8.51 6.99 2.63 2.59 4.95 5.43 6.99 8.51 2.08 3.08 3.84 6.37 5.33 9.82 1.52 3.53 2.63 7.16 3.39 10.9.43 2.12.74 4.28.93 6.48l-5.23-1.39c-.16-1.38-.37-2.74-.64-4.09-.69-3.42-1.7-6.71-3.08-9.89-.86-2.04-1.83-3.98-2.91-5.85H86.38c3 5.13 5.16 10.23 6.47 15.32l-5.68-1.51c-1.48-4.56-3.71-9.16-6.71-13.81H60.19v9.39c-.36.21-.72.46-1.07.74a8.25 8.25 0 00-1.73 1.83 9.07 9.07 0 00-1.06 2.11c-.27.77-.43 1.54-.49 2.29-.05.64-.03 1.3.07 1.95.08.54.2 1.07.38 1.59l.05.14c.04.11.08.22.12.32.06.17.11.27.13.32l.02-.01 3.63 8.17h-.06v23.8H70.8l2.24 5.05H60.19v17.78c5.65-4.64 10.5-9.32 14.54-14.01l2.25 5.09zm38.16.08c-.34.34-.74.6-1.16.79-.44.2-.91.32-1.38.36a3.99 3.99 0 01-1.53-.17c-.48-.15-.94-.4-1.35-.74L98.63 88.8l-3.81 9.35c-.32.78-.7 1.5-1.13 2.15a8.62 8.62 0 01-1.44 1.68c-.41.36-.86.67-1.33.9-.47.23-.95.38-1.45.45-.58.08-1.16.04-1.72-.12-.54-.16-1.06-.42-1.56-.81-.4-.31-.77-.71-1.12-1.19-.32-.44-.61-.96-.88-1.56-7.22-16.27-15.83-33.78-22.27-50.16a3.137 3.137 0 01-.02-2.15c.09-.25.21-.5.36-.72.08-.11.16-.22.26-.31.08-.08.17-.16.27-.23.18-.14.37-.26.57-.36l.05-.02c.19-.09.39-.16.58-.2l.09-.02c.18-.04.36-.06.54-.07.21-.01.41.01.61.04l.21.03c17.64 4.38 35.38 9.38 52.98 14.05.63.17 1.19.38 1.68.62.53.27.98.57 1.35.91.46.42.81.9 1.05 1.41.25.53.38 1.1.39 1.69v.01c.01.5-.06 1-.21 1.5s-.38.98-.68 1.45c-.37.58-.85 1.16-1.43 1.69-.56.52-1.22 1.01-1.95 1.46-2.89 1.7-5.77 3.5-8.64 5.24l11.05 9.47c.4.35.72.76.94 1.21l.03.08c.21.45.34.92.38 1.41.04.49-.01 1-.16 1.5-.14.47-.37.93-.69 1.34-1.69 2.08-4.52 5.72-6.39 7.45zm-2.9-3.63l5.35-6.28-13-11.14-.07-.07c-.06-.06-.13-.13-.18-.19a1.61 1.61 0 01-.21-.3c-.33-.54-.4-1.16-.26-1.73.14-.57.5-1.09 1.04-1.41 3.76-2.07 7.64-4.66 11.35-6.89.43-.26.81-.55 1.13-.84.3-.28.55-.56.72-.83.07-.11.12-.2.15-.29-.08-.06-.17-.11-.3-.17-.19-.09-.44-.17-.73-.25L67.51 50.77 88.39 97.8c.12.26.24.49.37.68l.03.05c.07.09.13.17.18.22.08-.04.16-.11.26-.2.24-.21.48-.5.7-.84.24-.36.46-.79.65-1.27l5-12.28.05-.1c.04-.08.08-.16.12-.23l.03-.05c.05-.08.11-.16.18-.24a2.293 2.293 0 013.23-.26l13.05 11.06zm-61.35 15.49c-8.16-6.85-14.7-13.77-19.54-20.79H15.39c1.52 2.08 3.22 4.01 5.05 5.85 2.39 2.39 4.95 4.5 7.75 6.36 2.77 1.87 5.78 3.49 9.03 4.88.03.03.07.03.1.07 3.15 1.31 6.4 2.35 9.79 3.01 1.25.24 2.53.45 3.8.62h-.02zM12.07 83.99h16.05c-4.46-7.82-6.88-15.77-7.16-23.8H5.12c.14 2.77.45 5.43.97 8.06.69 3.42 1.69 6.71 3.08 9.89.86 2.04 1.83 3.98 2.9 5.85zM5.12 55.14h15.95c.59-7.89 3.22-15.81 7.89-23.8H12.07c-1.07 1.87-2.04 3.8-2.91 5.85-.03.03-.03.07-.07.1-1.31 3.15-2.35 6.4-3.01 9.79-.51 2.63-.86 5.29-.96 8.06zm10.24-28.85h16.85c4.81-6.92 11.14-13.87 19.03-20.86-1.42.17-2.8.38-4.15.66-3.42.69-6.71 1.7-9.89 3.08a55.79 55.79 0 00-9.03 4.88c-2.8 1.87-5.36 3.98-7.75 6.36-1.83 1.83-3.53 3.77-5.05 5.85l-.01.03zM64.1 5.43c7.92 6.99 14.25 13.94 19.03 20.86h16.85c-1.52-2.08-3.22-4.01-5.05-5.85-2.39-2.39-4.95-4.5-7.75-6.37-2.77-1.87-5.78-3.49-9.03-4.88-.03-.03-.07-.03-.1-.07-3.15-1.31-6.4-2.35-9.79-3.01-1.38-.28-2.77-.48-4.15-.66v-.02h-.01zm-3.91 3.29v17.57h16.74c-4.39-5.81-9.96-11.66-16.74-17.57zm-5.05 98.1V89.04H37.53c4.53 5.95 10.41 11.9 17.61 17.78zm0-22.83v-23.8H26.01c.31 7.99 3.01 15.91 7.99 23.8h21.14zm0-28.85v-23.8H34.87c-5.19 8.06-8.09 15.98-8.75 23.8h29.02zm0-28.85V8.72c-6.78 5.92-12.35 11.76-16.74 17.57h16.74z"/>\n</svg>\n'}),Ze=new s.zZ({name:"@datalayer/icons:cloud",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 896 896" fill="currentColor" aria-hidden="true">\n  <path d="M747.4 354.7C701.6 233.9 584.9 148 448.2 148S194.8 233.8 149 354.6C63.3 377.1 0 455.1 0 548c0 110.5 89.5 200 199.9 200h496.2C806.5 748 896 658.5 896 548c0-92.7-63.1-170.7-148.6-193.3zm36.3 281a123.07 123.07 0 01-87.6 36.3H199.9c-33.1 0-64.2-12.9-87.6-36.3A123.3 123.3 0 0176 548c0-28 9.1-54.3 26.2-76.3a125.7 125.7 0 0166.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10c54.3 14.5 92.1 63.8 92.1 120 0 33.1-12.9 64.3-36.3 87.7z"/>\n</svg>\n'}),Ie=new s.zZ({name:"@datalayer/icons:laptop-simple",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 1024 1024" fill="currentColor" aria-hidden="true">\n  <path d="M956.9 845.1L896.4 632V168c0-17.7-14.3-32-32-32h-704c-17.7 0-32 14.3-32 32v464L67.9 845.1C60.4 866 75.8 888 98 888h828.8c22.2 0 37.6-22 30.1-42.9zM200.4 208h624v395h-624V208zm228.3 608l8.1-37h150.3l8.1 37H428.7zm224 0l-19.1-86.7c-.8-3.7-4.1-6.3-7.8-6.3H398.2c-3.8 0-7 2.6-7.8 6.3L371.3 816H151l42.3-149h638.2l42.3 149H652.7z"/>\n</svg>\n'});var Ne=n(9859),Re=n(12828);const Pe="jp-mod-kernel";var Te;!function(e){e.kernelNewConsole="running:kernel-new-console",e.kernelNewNotebook="running:kernel-new-notebook",e.kernelOpenSession="running:kernel-open-session",e.kernelShutDown="running:kernel-shut-down",e.showPanel="running:show-panel"}(Te||(Te={}));const ze={activate:function(e,t,n,s,r){const i=t.load("jupyterlab"),a=new Ne.RunningSessionManagers,o=new Ne.RunningSessions(a,t);return o.id="jp-running-sessions",o.title.caption=i.__("Running Terminals and Kernels"),o.title.icon=m.runningIcon,o.node.setAttribute("role","region"),o.node.setAttribute("aria-label",i.__("Running Sessions section")),s&&s.add(o,"running-sessions"),r&&(0,Re.w)(a,t,r),function(e,t,n,s){n.ready.then((()=>async function(e,t,n,s){const{commands:r,contextMenu:i}=e,a=new k.Signal({}),o=new v.Throttler((()=>a.emit()),100),l=s.load("jupyterlab"),c=()=>o.invoke().catch((e=>{console.error("Failed to refresh the running kernels.",e)}));n.local.kernels.runningChanged.connect(c),n.local.sessions.runningChanged.connect(c);const d=()=>{c(),n.remote?.kernels.runningChanged.connect(c),n.remote?.sessions.runningChanged.connect(c)};d(),n.remoteChanged.connect(d);const u=()=>{c(),n.browser?.kernels.runningChanged.connect(c),n.browser?.sessions.runningChanged.connect(c)};u(),n.browserChanged.connect(u),t.add({name:l.__("Kernels"),running:()=>{const e=[new Ae({commands:r,location:"local",kernelspecs:n.local.kernelspecs,kernels:n.local.kernels,sessions:n.local.sessions,trans:l})];return n.remote?e.push(new Ae({commands:r,location:"remote",kernelspecs:n.remote?.kernelspecs,kernels:n.remote?.kernels,sessions:n.remote?.sessions,trans:l})):e.push(Object.freeze({label:()=>"remote",icon:()=>Ze,open:()=>{r.execute("create-jupyter-kernels-widget")}})),n.browser&&e.push(new Ae({commands:r,location:"browser",kernelspecs:n.browser?.kernelspecs,kernels:n.browser?.kernels,sessions:n.browser?.sessions,trans:l})),e},shutdownAll:()=>Promise.all([n.local.kernels.shutdownAll(),n.remote?.kernels.shutdownAll(),n.browser?.kernels.shutdownAll()]),refreshRunning:()=>Promise.all([n.local.kernels.refreshRunning(),n.local.sessions.refreshRunning(),n.remote?.kernels.refreshRunning(),n.remote?.sessions.refreshRunning(),n.browser?.kernels.refreshRunning(),n.browser?.sessions.refreshRunning()]),runningChanged:a,shutdownLabel:l.__("Shut Down Kernel"),shutdownAllLabel:l.__("Shut Down All"),shutdownAllConfirmationText:l.__("Are you sure you want to permanently shut down all running kernels?")});const p=e=>e.classList.contains(Pe);r.addCommand(Te.kernelNewConsole,{icon:m.consoleIcon,label:l.__("New Console for Kernel"),execute:t=>{const n=e.contextMenuHitTest(p),s=t.id??n?.dataset.context;if(s)return r.execute("console:create",{kernelPreference:{id:s}})}}),r.addCommand(Te.kernelNewNotebook,{icon:m.notebookIcon,label:l.__("New Notebook for Kernel"),execute:t=>{const n=e.contextMenuHitTest(p),s=t.id??n?.dataset.context;if(s)return r.execute("notebook:create-new",{kernelId:s})}}),r.addCommand(Te.kernelOpenSession,{icon:e=>"console"===e.type?m.consoleIcon:"notebook"===e.type?m.notebookIcon:void 0,isEnabled:({path:e,type:t})=>!!t||void 0!==e,label:({name:e,path:t})=>e||h.PathExt.basename(t||l.__("Unknown Session")),execute:({path:e,type:t})=>{if(!t||void 0===e)return;const n="console"===t?"console:open":"docmanager:open";return r.execute(n,{path:e})}}),r.addCommand(Te.kernelShutDown,{icon:m.closeIcon,label:l.__("Shut Down Kernel"),execute:t=>{const s=e.contextMenuHitTest(p),r=t.id??s?.dataset.context;if(r)return Promise.all([n.local.kernels.findById(r).then((()=>n.local.kernels.shutdown(r))),n.remote?.kernels.findById(r).then((()=>n.remote?.kernels.shutdown(r))),n.browser?.kernels.findById(r).then((()=>n.browser?.kernels.shutdown(r)))])}});const g=[];i.opened.connect((async()=>{const t=i.menu.items.find((e=>"submenu"===e.type&&"jp-contextmenu-connected-sessions"===e.submenu?.id))?.submenu??null;if(!t)return;g.forEach((e=>e.dispose())),g.length=0,t.clearItems();const s=e.contextMenuHitTest(p),r=s?.dataset.context;if(!r)return;const a=Te.kernelOpenSession;for(const e of Array.from(n.local.sessions.running()).concat(Array.from(n.remote?.sessions.running()??[]),Array.from(n.browser?.sessions.running()??[])))if(r===e.kernel?.id){const{name:n,path:s,type:r}=e;g.push(t.addItem({command:a,args:{name:n,path:s,type:r}}))}}))}(e,t,n,s))).catch((e=>{console.error("The services manager failed to initialize.",e)}))}(e,a,n,t),e.shell.add(o,"left",{rank:200,type:"Sessions and Tabs"}),e.commands.addCommand(Te.showPanel,{label:i.__("Sessions and Tabs"),execute:()=>{e.shell.activateById(o.id)}}),a},id:"@datalayer/jupyter-kernels:running",description:"Provides the running session managers.",provides:Ne.IRunningSessionManagers,requires:[d.ITranslator,B],optional:[i.ILayoutRestorer,i.ILabShell],autoStart:!0};const Le={browser:De,local:Ie,remote:Ze};class Ae{commands;kernelspecs;kernels;sessions;trans;constructor({commands:e,location:t,kernelspecs:n,kernels:s,sessions:r,trans:i}){this.commands=e,this.context=t,this.kernelspecs=n,this.kernels=s,this.sessions=r,this.trans=i}get children(){return Array.from(this.kernels.running()).map((e=>new Oe({commands:this.commands,kernel:e,kernels:this.kernels,sessions:this.sessions,spec:this.kernelspecs.specs?.kernelspecs[e.name],trans:this.trans})))}get className(){return this.kernels.running().next().done?"dla-kernels-empty-group":"dla-kernels-group"}context;open(){"remote"===this.context&&this.commands.execute("create-jupyter-kernels-widget")}shutdown(){this.kernels.shutdownAll().catch((e=>{console.error(`Failed to shutdown all kernels on ${this.context} location.`,e)}))}icon(){return Le[this.context]}label(){return this.context}detail(){switch(this.context){case"browser":return function(){const e=e=>e.test(navigator.userAgent);return e(/opr\//i)?"Opera":e(/edg/i)?"Microsoft Edge":e(/chrome|chromium|crios/i)?"Google Chrome":e(/firefox|fxios/i)?"Mozilla Firefox":e(/safari/i)?"Apple Safari":e(/trident/i)?"Microsoft Internet Explorer":e(/ucbrowser/i)?"UC Browser":e(/samsungbrowser/i)?"Samsung Browser":"Unknown browser"}();case"local":case"remote":try{return new URL(this.kernels.serverSettings.baseUrl).hostname}catch(e){return""}}return""}}class Oe{constructor(e){this.className=Pe,this.commands=e.commands,this.kernel=e.kernel,this.context=this.kernel.id,this.kernels=e.kernels,this.sessions=e.sessions,this.spec=e.spec||null,this.trans=e.trans}className;context;commands;kernel;kernels;sessions;spec;trans;get children(){const e=[],t=Te.kernelOpenSession,{commands:n}=this;for(const s of this.sessions.running())if(this.kernel.id===s.kernel?.id){const{name:r,id:i,path:a,type:o}=s;e.push({className:"ITEM_CLASS",context:this.kernel.id,open:()=>{n.execute(t,{name:r,path:a,type:o})},icon:()=>"console"===o?m.consoleIcon:"notebook"===o?m.notebookIcon:m.jupyterIcon,label:()=>r,labelTitle:()=>a,detail:()=>i})}return e}shutdown(){return this.kernels.shutdown(this.kernel.id)}icon(){const{spec:e}=this;return e&&e.resources?e.resources["logo-svg"]||e.resources["logo-64x64"]||e.resources["logo-32x32"]:m.jupyterIcon}label(){const{kernel:e,spec:t}=this;return t?.display_name||e.name}labelTitle(){const{trans:e}=this,{id:t}=this.kernel,n=[`${this.label()}: ${t}`];for(const t of this.sessions.running())if(this.kernel.id===t.kernel?.id){const{path:s,type:r}=t;n.push(e.__("%1\nPath: %2",r,s))}return n.join("\n\n")}detail(){return this.kernel.id}}var Ke=n(32850);const Ve={small:16,medium:32,large:64},Je=P.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 122.88 115.33",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:n?"string"==typeof n?Ve[n]:n:"16px",ref:i,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{d:"M76.98 97.89c-3.62 4.01-7.79 7.99-12.51 11.94 1.28-.17 2.56-.38 3.81-.62 3.42-.69 6.71-1.7 9.89-3.08.82-.35 1.62-.72 2.41-1.1.59.76 1.25 1.42 1.96 1.98.77.61 1.59 1.09 2.45 1.45-1.58.85-3.2 1.62-4.86 2.34a55.262 55.262 0 01-10.9 3.39c-3.74.76-7.61 1.14-11.59 1.14-3.98 0-7.82-.38-11.59-1.14-3.7-.73-7.26-1.83-10.76-3.32-.03 0-.1-.03-.14-.07a62.287 62.287 0 01-9.82-5.33 54.495 54.495 0 01-8.51-6.99 52.856 52.856 0 01-6.99-8.51c-2.08-3.08-3.84-6.37-5.33-9.82a55.262 55.262 0 01-3.39-10.9A60.34 60.34 0 010 57.66c0-3.98.38-7.82 1.14-11.59.73-3.7 1.83-7.26 3.32-10.76 0-.03.03-.1.07-.14 1.49-3.49 3.29-6.75 5.33-9.82 2.04-3.08 4.39-5.92 6.99-8.51 2.59-2.63 5.43-4.95 8.51-6.99 3.08-2.08 6.36-3.84 9.82-5.33 3.53-1.52 7.16-2.63 10.9-3.39C49.81.38 53.69 0 57.66 0c3.98 0 7.82.38 11.59 1.14 3.7.73 7.26 1.83 10.76 3.32.03 0 .1.03.14.07 3.46 1.49 6.75 3.29 9.82 5.33 3.08 2.04 5.92 4.39 8.51 6.99 2.63 2.59 4.95 5.43 6.99 8.51 2.08 3.08 3.84 6.37 5.33 9.82 1.52 3.53 2.63 7.16 3.39 10.9.43 2.12.74 4.28.93 6.48l-5.23-1.39c-.16-1.38-.37-2.74-.64-4.09-.69-3.42-1.7-6.71-3.08-9.89-.86-2.04-1.83-3.98-2.91-5.85H86.38c3 5.13 5.16 10.23 6.47 15.32l-5.68-1.51c-1.48-4.56-3.71-9.16-6.71-13.81H60.19v9.39c-.36.21-.72.46-1.07.74a8.25 8.25 0 00-1.73 1.83 9.07 9.07 0 00-1.06 2.11c-.27.77-.43 1.54-.49 2.29-.05.64-.03 1.3.07 1.95.08.54.2 1.07.38 1.59l.05.14c.04.11.08.22.12.32.06.17.11.27.13.32l.02-.01 3.63 8.17h-.06v23.8H70.8l2.24 5.05H60.19v17.78c5.65-4.64 10.5-9.32 14.54-14.01l2.25 5.09zm38.16.08c-.34.34-.74.6-1.16.79-.44.2-.91.32-1.38.36a3.99 3.99 0 01-1.53-.17c-.48-.15-.94-.4-1.35-.74L98.63 88.8l-3.81 9.35c-.32.78-.7 1.5-1.13 2.15a8.62 8.62 0 01-1.44 1.68c-.41.36-.86.67-1.33.9-.47.23-.95.38-1.45.45-.58.08-1.16.04-1.72-.12-.54-.16-1.06-.42-1.56-.81-.4-.31-.77-.71-1.12-1.19-.32-.44-.61-.96-.88-1.56-7.22-16.27-15.83-33.78-22.27-50.16a3.137 3.137 0 01-.02-2.15c.09-.25.21-.5.36-.72.08-.11.16-.22.26-.31.08-.08.17-.16.27-.23.18-.14.37-.26.57-.36l.05-.02c.19-.09.39-.16.58-.2l.09-.02c.18-.04.36-.06.54-.07.21-.01.41.01.61.04l.21.03c17.64 4.38 35.38 9.38 52.98 14.05.63.17 1.19.38 1.68.62.53.27.98.57 1.35.91.46.42.81.9 1.05 1.41.25.53.38 1.1.39 1.69v.01c.01.5-.06 1-.21 1.5s-.38.98-.68 1.45c-.37.58-.85 1.16-1.43 1.69-.56.52-1.22 1.01-1.95 1.46-2.89 1.7-5.77 3.5-8.64 5.24l11.05 9.47c.4.35.72.76.94 1.21l.03.08c.21.45.34.92.38 1.41.04.49-.01 1-.16 1.5-.14.47-.37.93-.69 1.34-1.69 2.08-4.52 5.72-6.39 7.45zm-2.9-3.63l5.35-6.28-13-11.14-.07-.07c-.06-.06-.13-.13-.18-.19a1.61 1.61 0 01-.21-.3c-.33-.54-.4-1.16-.26-1.73.14-.57.5-1.09 1.04-1.41 3.76-2.07 7.64-4.66 11.35-6.89.43-.26.81-.55 1.13-.84.3-.28.55-.56.72-.83.07-.11.12-.2.15-.29-.08-.06-.17-.11-.3-.17-.19-.09-.44-.17-.73-.25L67.51 50.77 88.39 97.8c.12.26.24.49.37.68l.03.05c.07.09.13.17.18.22.08-.04.16-.11.26-.2.24-.21.48-.5.7-.84.24-.36.46-.79.65-1.27l5-12.28.05-.1c.04-.08.08-.16.12-.23l.03-.05c.05-.08.11-.16.18-.24a2.293 2.293 0 013.23-.26l13.05 11.06zm-61.35 15.49c-8.16-6.85-14.7-13.77-19.54-20.79H15.39c1.52 2.08 3.22 4.01 5.05 5.85 2.39 2.39 4.95 4.5 7.75 6.36 2.77 1.87 5.78 3.49 9.03 4.88.03.03.07.03.1.07 3.15 1.31 6.4 2.35 9.79 3.01 1.25.24 2.53.45 3.8.62h-.02zM12.07 83.99h16.05c-4.46-7.82-6.88-15.77-7.16-23.8H5.12c.14 2.77.45 5.43.97 8.06.69 3.42 1.69 6.71 3.08 9.89.86 2.04 1.83 3.98 2.9 5.85zM5.12 55.14h15.95c.59-7.89 3.22-15.81 7.89-23.8H12.07c-1.07 1.87-2.04 3.8-2.91 5.85-.03.03-.03.07-.07.1-1.31 3.15-2.35 6.4-3.01 9.79-.51 2.63-.86 5.29-.96 8.06zm10.24-28.85h16.85c4.81-6.92 11.14-13.87 19.03-20.86-1.42.17-2.8.38-4.15.66-3.42.69-6.71 1.7-9.89 3.08a55.79 55.79 0 00-9.03 4.88c-2.8 1.87-5.36 3.98-7.75 6.36-1.83 1.83-3.53 3.77-5.05 5.85l-.01.03zM64.1 5.43c7.92 6.99 14.25 13.94 19.03 20.86h16.85c-1.52-2.08-3.22-4.01-5.05-5.85-2.39-2.39-4.95-4.5-7.75-6.37-2.77-1.87-5.78-3.49-9.03-4.88-.03-.03-.07-.03-.1-.07-3.15-1.31-6.4-2.35-9.79-3.01-1.38-.28-2.77-.48-4.15-.66v-.02h-.01zm-3.91 3.29v17.57h16.74c-4.39-5.81-9.96-11.66-16.74-17.57zm-5.05 98.1V89.04H37.53c4.53 5.95 10.41 11.9 17.61 17.78zm0-22.83v-23.8H26.01c.31 7.99 3.01 15.91 7.99 23.8h21.14zm0-28.85v-23.8H34.87c-5.19 8.06-8.09 15.98-8.75 23.8h29.02zm0-28.85V8.72c-6.78 5.92-12.35 11.76-16.74 17.57h16.74z"}))})),We={small:16,medium:32,large:64},$e=P.forwardRef((function({title:e,titleId:t,size:n,colored:s,...r},i){return P.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",className:"icon",viewBox:"0 0 1024 1024",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",width:n?"string"==typeof n?We[n]:n:"16px","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?P.createElement("title",{id:t},e):null,P.createElement("path",{d:"M956.9 845.1L896.4 632V168c0-17.7-14.3-32-32-32h-704c-17.7 0-32 14.3-32 32v464L67.9 845.1C60.4 866 75.8 888 98 888h828.8c22.2 0 37.6-22 30.1-42.9zM200.4 208h624v395h-624V208zm228.3 608l8.1-37h150.3l8.1 37H428.7zm224 0l-19.1-86.7c-.8-3.7-4.1-6.3-7.8-6.3H398.2c-3.8 0-7 2.6-7.8 6.3L371.3 816H151l42.3-149h638.2l42.3 149H652.7z"}))}));var He=n(29826),Be=n(85128);function Ue(e){const[t,n]=(0,P.useState)(""),[s,r]=(0,P.useState)(null),[i,a]=(0,P.useState)(""),[o,l]=(0,P.useState)(""),[c,d]=(0,P.useState)(""),{model:h}=e;return(0,P.useEffect)((()=>{const e=()=>{const t=h.getMetadata("datalayer")?.kernel;t?(r({browser:Je,local:$e,remote:He.Z}[t.location]??null),n([t.location??"?",t.displayName??"?"].join(" - "))):(r(null),n(""));const s=h.getMetadata("execution");if(!s||!y.JSONExt.isObject(s))return i&&a(""),o&&l(""),void(c&&d(""));const u=s["iopub.status.busy"],m=u?new Date(u):null,p=s["shell.execute_reply.started"]||s["iopub.execute_input"],g=p?new Date(p):null,f=s.execution_failed,_=s["shell.execute_reply"]??f,x=_?new Date(_):null,w=_&&!s["iopub.execute_input"],v=setInterval((()=>{if(i.startsWith("Execution started at")){if(h.getMetadata("execution").execution_failed)return clearInterval(v),void e();if(g){const e=Ye(new Date,g);l(`${e} ${c?`(${c})`:""}`)}}else clearInterval(v)}),100);let k="";if(w)k="";else if(x&&g){const e=Ye(x,g);d(e),k=f?"Failed":"Last executed",k&&(k+=` at ${Ge(x,"yyy-MM-dd HH:mm:ss")}`),k+=` in ${e}`}else g?k=`Execution started at ${Ge(g,"yyy-MM-dd HH:mm:ss")}`:m&&(c&&l(`N/A (${c})`),k=`Execution queued at ${Ge(m,"yyy-MM-dd HH:mm:ss")}`);i!==k&&a(k)};return e(),h.metadataChanged.connect(e),()=>{h.metadataChanged.disconnect(e)}}),[h]),(0,S.jsxs)("div",{className:"dla-cell-footer",children:[s&&(0,P.createElement)(s),t&&(0,S.jsx)("span",{children:t}),h.getMetadata("execution")&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:i}),(0,S.jsx)("span",{style:{minWidth:"12px"}}),(0,S.jsx)("span",{children:o})]})]})}class qe{constructor(e){this._panel=e,this._panel.content.model?.cells.changed.connect(this.updateConnectedCell,this),this._panel.content.modelChanged.connect((()=>{this._panel.content.model?.cells.changed.connect(this.updateConnectedCell,this)}))}get settings(){return this._settings}set settings(e){y.JSONExt.deepEqual(this._settings,e)||(this._settings=e,this.updateConnectedCell(this._panel.context.model.cells,{type:"set",newIndex:0,newValues:Array.from(this._panel.context.model.cells),oldIndex:0,oldValues:Array.from(this._panel.context.model.cells)}))}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,k.Signal.clearData(this))}updateConnectedCell(e,t){t.oldValues.forEach((e=>{this._removeFooter(e)})),Promise.all(t.newValues.map((e=>this._addFooter(e))))}async _addFooter(e){if("code"===e.type){const t=this._panel.content.widgets.find((t=>t.model===e));if(t){await t.ready;const n=m.ReactWidget.create((0,S.jsx)(Ue,{model:e}));this._cellFooter.has(e)&&this._cellFooter.get(e)?.dispose(),this._cellFooter.set(e,t),this._panel.disposed.connect((()=>{this._cellFooter.delete(e),n.dispose()})),fe.Widget.attach(n,t.inputArea.editorWidget.node)}}}_removeFooter(e){this._cellFooter.get(e)?.dispose()}_isDisposed=!1;_cellFooter=new WeakMap;_panel;_settings={dateFormat:"yyy-MM-dd HH:mm:ss",showDate:!0,showLiveExecutionTime:!0}}const Ge=(e,t="yyy-MM-dd HH:mm:ss")=>(0,Be.format)(e,t),Ye=(e,t)=>{const n=36e5,s=864e5;let r=(0,Be.differenceInMilliseconds)(e,t);if(r<1e3)return`${r}ms`;const i=Math.floor(r/s);r%=s;const a=Math.floor(r/n);r%=n;const o=Math.floor(r/6e4);r%=6e4;let l="";return i&&(l+=`${i}d `),(i||a)&&(l+=`${a}h `),(i||a||o)&&(l+=`${o}m `),i||(l+=`${(r/1e3).toFixed(a?0:2)}s`),l.trim()};function Xe(e){const{baseSpec:t,model:n,preference:s,serviceManager:r,translator:i}=e,a=(0,P.useMemo)((()=>(i??d.nullTranslator).load("jupyterlab")),[i]),o=n.getMetadata("datalayer"),l=(0,P.useCallback)((e=>{const s=n.getMetadata("datalayer")??{kernel:null};e?.id===t?.id?(delete s.kernel,n.setMetadata("datalayer",s)):n.setMetadata("datalayer",Object.assign(s,{kernel:e}))}),[n]);return(0,S.jsx)(T,{preference:s,serviceManager:r,selection:o?.kernel?o.kernel:t,setSelection:l,variant:"cell",actions:(0,S.jsx)(R.S.Item,{disabled:!0,children:a.__("Transfer variablesâ€¦")}),translator:i})}var Qe,et=n(63879);class tt{static serviceManager=null;static run(e,t,n,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const r=Qe.getState(e),i=Qe.runSelected(e,t,n,s);return Qe.handleRunState(e,r,!1),i}static runCells(e,t,n,s,r){if(!e.model)return Promise.resolve(!1);const i=Qe.getState(e),a=Qe.runCells(e,t,n,s,r);return Qe.handleRunState(e,i,!1),a}static runAll(e,t,n,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const r=Qe.getState(e),i=e.widgets.length,a=Qe.runCells(e,e.widgets,t,n,s);return e.activeCellIndex=i,e.deselectAll(),Qe.handleRunState(e,r,!0),a}static runAllAbove(e,t,n,s){const{activeCell:r,activeCellIndex:i,model:a}=e;if(!a||!r||i<1)return Promise.resolve(!1);const o=Qe.getState(e),l=Qe.runCells(e,e.widgets.slice(0,e.activeCellIndex),t,n,s);return e.deselectAll(),Qe.handleRunState(e,o,!0),l}static runAllBelow(e,t,n,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const r=Qe.getState(e),i=e.widgets.length,a=Qe.runCells(e,e.widgets.slice(e.activeCellIndex),t,n,s);return e.activeCellIndex=i,e.deselectAll(),Qe.handleRunState(e,r,!0),a}static async runAndAdvance(e,t,n,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const r=Qe.getState(e),i=Qe.runSelected(e,t,n,s),a=e.model;return e.activeCellIndex===e.widgets.length-1?(a.sharedModel.insertCell(e.widgets.length,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex++,!1===e.activeCell?.inViewport&&await(0,h.signalToPromise)(e.activeCell.inViewportChanged,200).catch((()=>{})),e.mode="edit"):e.activeCellIndex++,Qe.handleRunState(e,r,!0),i}static async runAndInsert(e,t,n,s){if(!e.model||!e.activeCell)return Promise.resolve(!1);const r=Qe.getState(e),i=Qe.runSelected(e,t,n,s);return e.model.sharedModel.insertCell(e.activeCellIndex+1,{cell_type:e.notebookConfig.defaultCell,metadata:"code"===e.notebookConfig.defaultCell?{trusted:!0}:{}}),e.activeCellIndex++,!1===e.activeCell?.inViewport&&await(0,h.signalToPromise)(e.activeCell.inViewportChanged,200).catch((()=>{})),e.mode="edit",Qe.handleRunState(e,r,!0),i}}!function(e){const t=Ke.NotebookActions.executed;async function n(t,n,s,r,i){const a=n[-1];t.mode="command";let o=!0;try{for(const e of n)o&&=await l(t,e,s,r,i);return!t.isDisposed&&(e.selectionExecuted.emit({notebook:t,lastCell:a}),t.update(),o)}catch(s){if(!s.message.startsWith("KernelReplyNotOK"))throw s;return n.map((e=>{"code"===e.model.type&&null===e.model.executionCount&&e.setPrompt("")})),e.selectionExecuted.emit({notebook:t,lastCell:a}),t.update(),!1}}e.executionScheduled=Ke.NotebookActions.executionScheduled,e.selectionExecuted=Ke.NotebookActions.selectionExecuted,e.getState=function(e){return{wasFocused:e.node.contains(document.activeElement),activeCellId:e.activeCell?.model.id??null}},e.handleRunState=async function(e,t,n=!1){const{activeCell:s,activeCellIndex:r}=e;n&&s&&await e.scrollToItem(r,"smart",0).catch((e=>{})),(t.wasFocused||"edit"===e.mode)&&e.activate()},e.runCells=n,e.runSelected=function(e,t,s,r){e.mode="command";let i=e.activeCellIndex;const a=e.widgets.filter(((t,n)=>{const s=e.isSelectedOrActive(t);return s&&(i=n),s}));return e.activeCellIndex=i,e.deselectAll(),n(e,a,t,s,r)};const s=new WeakMap,r=new WeakMap;async function i(e,t,n){const s=await new D.KernelExecutor({connection:e}).execute(J(t)),r=s.get(0)?.data["text/plain"]??"";if(!r)return!1;{const e=await new D.KernelExecutor({connection:n}).execute(W(r)),s=e.get(0)?.data["text/plain"]||"[]",i=JSON.parse(s.slice(1,s.length-1));if(!t.every((e=>i.includes(e))))return!1;console.debug(`@datalayer/jupyter-kernels: Successfully transfer ${t.join(", ")}`)}return!0}async function o(e){const t=e.shift();if(!t)return Promise.resolve();const{done:n,...s}=t;try{const t=await async function(e){const{cell:t,sessionContext:n,metadata:s}=e,a=t.model.getMetadata("datalayer")??{},o=a.kernel;if(!o)return console.debug(`@datalayer/jupyter-kernels: Don't capture cell ${t.model.id}`),!1;let l=r.get(t.model);if(l&&(l.id===o.id&&l.name===o.name&&(l.location??"local")===o.location||(r.delete(t.model),l.dispose())),!l&&tt.serviceManager&&(l=await(tt.serviceManager[o.location]?.kernels.startNew({name:o.name})),l&&(l.location=o.location,r.set(t.model,l),n.disposed.connect((()=>{r.get(t.model)?.dispose()})),o.id=l.id,t.model.setMetadata("datalayer",Object.assign(a,{kernel:o})))),!l)throw new Error(`Unable to start a kernel for cell ${t.model.id} with ${JSON.stringify(o)}`);if(a.in&&!await i(n.session.kernel,a.in,l))throw new Error(`Failed to transfer ${a.in.join(", ")} from ${l.location} - ${l.name} (${l.id})`);const c=await et.CodeCell.execute(t,{session:{kernel:l}},s);if(console.debug(`@datalayer/jupyter-kernels: Capture cell ${t.model.id} execution`,c),s.deletedCells&&(s.deletedCells.length=0),!c)return!1;if("ok"===c.content.status){if(a.out&&!await i(l,[a.out],n.session.kernel))throw new Error(`Failed to transfer ${a.out} from ${l.location} - ${l.name} (${l.id})`);return!0}throw new Ke.KernelError(c.content)}(s);n.resolve(t),o(e).catch((e=>{console.error("Error processing cell queue")}))}catch(t){for(n.reject(t);e.length;)e.shift()?.done.reject("Canceled")}}async function l(n,r,i,l,c){const h=(c=c||d.nullTranslator).load("jupyterlab");switch(r.model.type){case"markdown":r.rendered=!0,r.inputHidden=!1,t.emit({notebook:n,cell:r,success:!0});break;case"code":if(i){if(i.isTerminating){await(0,a.showDialog)({title:h.__("Kernel Terminating"),body:h.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",i.session?.path),buttons:[a.Dialog.okButton()]});break}if(i.pendingInput)return await(0,a.showDialog)({title:h.__("Cell not executed due to pending input"),body:h.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[a.Dialog.okButton()]}),!1;if(i.hasNoKernel&&await i.startKernel()&&l&&await l.selectKernel(i),i.hasNoKernel)return r.model.sharedModel.transact((()=>{r.model.clearExecution()})),!0;const c=n.model?.deletedCells??[];e.executionScheduled.emit({notebook:n,cell:r});let d=!1;try{const e={deletedCells:c,recordTiming:n.notebookConfig.recordTiming};let t;const a=await async function(e,t){const n=new y.PromiseDelegate;s.has(e)||s.set(e,[]);const r=s.get(e),i=0===r.length;return r.push(Object.assign(t,{done:n})),i&&o(r).catch((e=>{console.error("Fail to start processing the cell queue",e)})),n.promise}(n,{cell:r,sessionContext:i,metadata:e});a||(console.debug(`@datalayer/jupyter-kernels: Process normally cell ${r.model.id}`),t=await et.CodeCell.execute(r,i,e)??void 0,c.splice(0,c.length)),d=(()=>{if(r.isDisposed)return!1;if(!t)return!0;if("ok"===t.content.status){const e=t.content;return e.payload&&e.payload.length&&function(e,t,n){const s=e.payload?.filter((e=>"set_next_input"===e.source))[0];if(!s)return;const r=s.text;if(s.replace)return void n.model.sharedModel.setSource(r);const i=t.model.sharedModel,a=t.model.cells,o=(0,M.findIndex)(a,(e=>e===n.model));-1===o?i.insertCell(i.cells.length,{cell_type:"code",source:r,metadata:{trusted:!1}}):i.insertCell(o+1,{cell_type:"code",source:r,metadata:{trusted:!1}})}(e,n,r),!0}throw new Ke.KernelError(t.content)})()}catch(e){if(!r.isDisposed&&!e.message.startsWith("Canceled"))throw t.emit({notebook:n,cell:r,success:!1,error:e}),e;d=!1}return d&&t.emit({notebook:n,cell:r,success:!0}),d}r.model.sharedModel.transact((()=>{r.model.clearExecution()}),!1)}return Promise.resolve(!0)}}(Qe||(Qe={}));const nt={id:"@datalayer/jupyter-kernels:cell-executor",description:"Handle kernel per cells.",requires:[B,Ke.INotebookTracker],optional:[a.IToolbarWidgetRegistry,d.ITranslator],autoStart:!0,activate:(e,t,n,s,r)=>{tt.serviceManager=t,Ke.NotebookActions.run=tt.run,Ke.NotebookActions.runAll=tt.runAll,Ke.NotebookActions.runAllAbove=tt.runAllAbove,Ke.NotebookActions.runAllBelow=tt.runAllBelow,Ke.NotebookActions.runAndAdvance=tt.runAndAdvance,Ke.NotebookActions.runAndInsert=tt.runAndInsert,Ke.NotebookActions.runCells=tt.runCells,s?.addFactory("Cell","dla-kernel-picker",(e=>{const s=n.find((t=>!(!t.model||!Array.from(t.model.cells).find((t=>t===e.model)))));return"code"!==e.model.type?new fe.Widget:m.ReactWidget.create((0,S.jsx)(F.ZP,{theme:D.jupyterTheme,children:(0,S.jsx)(Xe,{model:e.model,baseSpec:s?.sessionContext.session?.kernel?{displayName:s.sessionContext.kernelDisplayName??"",id:s.sessionContext.session.id??"",language:"",location:s.sessionContext.location??"local",name:s.sessionContext.session.kernel.model.name??""}:null,preference:{id:s?.sessionContext.session?.id},serviceManager:t,translator:r??void 0})}))}))}},st={id:"@datalayer/jupyter-kernels:cell-footer",description:"Cell footer with Datalayer kernel information",requires:[Ke.INotebookTracker,c.ISettingRegistry],optional:[d.ITranslator],autoStart:!0,activate:(e,t,n,s)=>{e.docRegistry.addWidgetExtension("Notebook",new rt(t,n))}};class rt{constructor(e,t){this._tracker=e,t.load("@datalayer/jupyter-kernels:plugin").then((e=>{this._updateSettings(e),e.changed.connect(this._updateSettings.bind(this)),t.load("@jupyterlab/notebook-extension:tracker").then((e=>e.set("recordTiming",!0)),(e=>{console.error("@datalayer/jupyter-kernels: Could not force metadata recording.",e)}))})).catch((e=>{console.error("@datalayer/jupyter-kernels: Could not load settings",e)}))}createNew(e,t){const n=new qe(e);return this._extensions.set(e,n),e.disposed.connect((()=>{this._extensions.delete(e)})),n}_updateSettings(e){const t={showLiveExecutionTime:e.get("showLiveExecutionTime").composite,showDate:e.get("showDate").composite},n=e.get("dateFormat").composite,s=(e=>{const t=new Date;try{return(0,Be.format)(t,e),{isValid:!0}}catch(e){return{isValid:!1,message:e.message}}})(n);s.isValid?t.dateFormat=n:(t.dateFormat="yyy-MM-dd HH:mm:ss",(0,a.showErrorMessage)("Invalid date format in Execute Time extension setting",s.message??"")),this._settings={...this._settings,...t},this._tracker.forEach((e=>{const t=this._extensions.get(e);t&&(t.settings={...this._settings})}))}_tracker;_extensions=new WeakMap;_settings={showLiveExecutionTime:!0,showDate:!0,dateFormat:"yyy-MM-dd HH:mm:ss"}}const it={id:"@datalayer/jupyter-kernels:manager",description:"Provides the document manager.",provides:o.IDocumentManager,requires:[o.IDocumentWidgetOpener,a.ISessionContextDialogs],optional:[d.ITranslator,i.ILabStatus,i.JupyterLab.IInfo],activate:(e,t,n,s,r,i)=>{const{docRegistry:a}=e,o=s??d.nullTranslator,l=e.restored.then((()=>{}));return new ye({registry:a,manager:e.serviceManager,opener:t,when:l,setBusy:(r&&(()=>r.setBusy()))??void 0,sessionDialogs:n,translator:o??d.nullTranslator,isConnectedCallback:()=>!i||i.isConnected})}},at={id:"@datalayer/jupyter-kernels:service-manager",description:"Overrides the Jupyter service manager.",provides:B,autoStart:!0,activate:e=>{const t=new Ce(e.serviceManager);return e.serviceManager=t,t}},ot={id:"@datalayer/jupyter-kernels:sessionDialogs",description:"Provides the session context dialogs.",provides:a.ISessionContextDialogs,optional:[d.ITranslator],requires:[B],autoStart:!0,activate:async(e,t,n)=>(document.body.dataset.portalRoot="true",new H({translator:n??d.nullTranslator},t))};var lt;!function(e){e.create="create-jupyter-kernels-widget"}(lt||(lt={}));const ct={id:"@datalayer/jupyter-kernels:plugin",autoStart:!0,requires:[a.ICommandPalette],optional:[c.ISettingRegistry,l.ILauncher,i.ILayoutRestorer],provides:q,activate:(e,t,n,s,i)=>{const{commands:o}=e,l=lt.create,c=new a.WidgetTracker({namespace:"jupyter-kernels"});i&&i.restore(c,{command:l,name:()=>"jupyter-kernels"});const d={};o.addCommand(l,{caption:"Show Jupyter Kernels",label:"Jupyter Kernels",icon:r,execute:()=>{const t=new Ee(e,d),n=new a.MainAreaWidget({content:t});n.title.label="Jupyter Kernels",n.title.icon=r,e.shell.add(n,"main"),c.add(n)}});const h="Datalayer";t.addItem({command:l,category:h});const u=e=>{const t=e.get("showInLauncher").composite;s&&t&&s.add({command:l,category:h,rank:5.4})};return n&&n.load(ct.id).then((e=>{console.log("@datalayer/jupyter-kernels settings loaded:",e.composite),u(e),e.changed.connect(u)})).catch((e=>{console.error("Failed to load settings for @datalayer/jupyter-kernels.",e)})),(0,pe.v)("config").then((e=>{console.log(e)})).catch((e=>{console.error(`Error while accessing the jupyter server jupyter_kernels extension.\n${e}`)})),console.log("JupyterLab plugin @datalayer/jupyter-kernels:plugin is activated."),d}},dt=[ct,it,at,ot,ze,nt,st,...he]},83513:(e,t,n)=>{n.d(t,{Z:()=>r,o:()=>s});const s=(0,n(75489).create)(((e,t)=>({setJupyterLabAdapter:t=>{e((e=>({jupyterLabAdapter:t})))},tab:0,getIntTab:()=>Math.floor(t().tab),setTab:t=>e((e=>({tab:t}))),remoteJupyterToken:void 0,setRemoteJupyterToken:t=>{e((e=>({remoteJupyterToken:t})))},serviceManager:void 0,setServiceManager:t=>{e((e=>({serviceManager:t})))},showDisclaimer:!0,setShowDisclaimer:t=>{e((e=>({showDisclaimer:t})))}}))),r=s},97072:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0iIzU4NjA2OSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNC40MjcgOS40MjdsMy4zOTYgMy4zOTZhLjI1MS4yNTEgMCAwMC4zNTQgMGwzLjM5Ni0zLjM5NkEuMjUuMjUgMCAwMDExLjM5NiA5SDQuNjA0YS4yNS4yNSAwIDAwLS4xNzcuNDI3ek00LjQyMyA2LjQ3TDcuODIgMy4wNzJhLjI1LjI1IDAgMDEuMzU0IDBMMTEuNTcgNi40N2EuMjUuMjUgMCAwMS0uMTc3LjQyN0g0LjZhLjI1LjI1IDAgMDEtLjE3Ny0uNDI3eiIgLz48L3N2Zz4="},2852:e=>{e.exports="data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27 focusable=%27false%27 role=%27img%27 viewBox=%270 -3 16 16%27 width=%2716%27 height=%2716%27 fill=%27black%27 style=%27display: inline-block; vertical-align: text-bottom; overflow: visible;%27%3e%3cpath d=%27M2 7.75A.75.75 0 0 1 2.75 7h10a.75.75 0 0 1 0 1.5h-10A.75.75 0 0 1 2 7.75Z%27%3e%3c/path%3e%3c/svg%3e"},62520:e=>{e.exports="data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27 focusable=%27false%27 role=%27img%27 viewBox=%270 -3 16 16%27 width=%2716%27 height=%2716%27 fill=%27white%27 style=%27display: inline-block; vertical-align: text-bottom; overflow: visible;%27%3e%3cpath d=%27M2 7.75A.75.75 0 0 1 2.75 7h10a.75.75 0 0 1 0 1.5h-10A.75.75 0 0 1 2 7.75Z%27%3e%3c/path%3e%3c/svg%3e"},84803:e=>{e.exports=JSON.parse('{"dp":"https://dev1-io.datalayer.run","uu":"wss://dev1-io.datalayer.run","Gd":"https://dev1-io.datalayer.run","au":"default"}')}}]);