{"version":3,"file":"lib_index_js.0d68e72c449de09163aa.js","mappings":";;;;;;;;;;;;;;;AAKyE;AAEzE;;GAEG;AACH,MAAM,MAAM,GAAgC;IAC1C,EAAE,EAAE,0BAA0B;IAC9B,WAAW,EACT,qFAAqF;IACvF,SAAS,EAAE,IAAI;IACf,QAAQ,EAAE,CAAC,kEAAgB,CAAC;IAC5B,QAAQ,EAAE,CAAC,GAAoB,EAAE,eAAiC,EAAE,EAAE;QACpE,OAAO,CAAC,GAAG,CAAC,sDAAsD,CAAC,CAAC;QAEpE,MAAM,YAAY,GAAG,IAAI,YAAY,EAAE,CAAC;QACxC,IAAI,gBAAgB,GAAkB,IAAI,CAAC;QAC3C,IAAI,oBAAoB,GAAkB,IAAI,CAAC;QAC/C,IAAI,SAAS,GAAG,KAAK,CAAC;QACtB,IAAI,UAAU,GAA0B,IAAI,CAAC;QAC7C,IAAI,gBAAgB,GAAG,KAAK,CAAC;QAE7B,SAAS,aAAa;YACpB,SAAS,GAAG,IAAI,CAAC;YACjB,gBAAgB,GAAG,MAAM,CAAC,WAAW,CAAC,cAAc,EAAE,GAAG,CAAC,CAAC,CAAC,4BAA4B;QAC1F,CAAC;QAED,SAAS,YAAY;YACnB,IAAI,oBAAoB,KAAK,IAAI,EAAE;gBACjC,YAAY,CAAC,oBAAoB,CAAC,CAAC;gBACnC,oBAAoB,GAAG,IAAI,CAAC;aAC7B;YACD,IAAI,gBAAgB,KAAK,IAAI,EAAE;gBAC7B,aAAa,CAAC,gBAAgB,CAAC,CAAC;gBAChC,gBAAgB,GAAG,IAAI,CAAC;aACzB;YACD,IAAI,SAAS,EAAE;gBACb,cAAc,EAAE,CAAC,CAAC,yBAAyB;gBAC3C,SAAS,GAAG,KAAK,CAAC;aACnB;QACH,CAAC;QAED,SAAS,cAAc;YACrB,IAAI,CAAC,SAAS,EAAE;gBACd,qBAAqB;gBACrB,UAAU,GAAG,YAAY,CAAC,gBAAgB,EAAE,CAAC;gBAC7C,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC;gBACzB,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,GAAG,EAAE,YAAY,CAAC,WAAW,CAAC,CAAC;gBACnE,UAAU,CAAC,OAAO,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;gBAC7C,UAAU,CAAC,KAAK,EAAE,CAAC;gBAEnB,sBAAsB;gBACtB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,KAAK,CAAC;aAC7C;iBAAM;gBACL,oBAAoB;gBACpB,IAAI,UAAU,EAAE;oBACd,UAAU,CAAC,IAAI,EAAE,CAAC;oBAClB,UAAU,GAAG,IAAI,CAAC;iBACnB;gBAED,qBAAqB;gBACrB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,EAAE,CAAC;aAC1C;YACD,SAAS,GAAG,CAAC,SAAS,CAAC;QACzB,CAAC;QAED,iEAAe,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE;YACpC,IAAI,gBAAgB,EAAE;gBACpB,IAAI,oBAAoB,KAAK,IAAI,EAAE;oBACjC,YAAY,CAAC,oBAAoB,CAAC,CAAC;iBACpC;gBACD,oBAAoB,GAAG,UAAU,CAC/B,aAAa,EACb,IAAI,CACgB,CAAC,CAAC,yCAAyC;aAClE;QACH,CAAC,CAAC,CAAC;QAEH,uBAAuB;QACvB,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,0BAA0B,EAAE;YAClD,KAAK,EAAE,0BAA0B;YACjC,OAAO,EAAE,GAAG,EAAE;gBACZ,gBAAgB,GAAG,CAAC,gBAAgB,CAAC;gBACrC,IAAI,CAAC,gBAAgB,EAAE;oBACrB,YAAY,EAAE,CAAC;iBAChB;YACH,CAAC;SACF,CAAC,CAAC;QACH,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;QAEpC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC;YACtB,OAAO,EAAE,0BAA0B;YACnC,QAAQ,EAAE,cAAc;SACzB,CAAC,CAAC;QAEH,eAAe,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,aAAa,EAAE,EAAE;YAC7D,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;YAC3D,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,YAAY,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;IACL,CAAC;CACF,CAAC;AAEF,iEAAe,MAAM,EAAC","sources":["webpack://attention-grabber/./src/index.ts"],"sourcesContent":["import {\n  JupyterFrontEnd,\n  JupyterFrontEndPlugin\n} from '@jupyterlab/application';\n\nimport { NotebookActions, INotebookTracker } from '@jupyterlab/notebook';\n\n/**\n * Initialization data for the attention-grabber extension.\n */\nconst plugin: JupyterFrontEndPlugin<void> = {\n  id: 'attention-grabber:plugin',\n  description:\n    'Flashes your screen when cells are finished, until you click on the notebook again.',\n  autoStart: true,\n  requires: [INotebookTracker],\n  activate: (app: JupyterFrontEnd, notebookTracker: INotebookTracker) => {\n    console.log('JupyterLab extension attention-grabber is activated!');\n\n    const audioContext = new AudioContext();\n    let annoyingInterval: number | null = null;\n    let grabAttentionTimeout: number | null = null;\n    let isPlaying = false;\n    let oscillator: OscillatorNode | null = null;\n    let extensionEnabled = false;\n\n    function grabAttention() {\n      isPlaying = true;\n      annoyingInterval = window.setInterval(toggleAnnoying, 500); // Toggle effect every 500ms\n    }\n\n    function stopAnnoying() {\n      if (grabAttentionTimeout !== null) {\n        clearTimeout(grabAttentionTimeout);\n        grabAttentionTimeout = null;\n      }\n      if (annoyingInterval !== null) {\n        clearInterval(annoyingInterval);\n        annoyingInterval = null;\n      }\n      if (isPlaying) {\n        toggleAnnoying(); // Ensure effect is reset\n        isPlaying = false;\n      }\n    }\n\n    function toggleAnnoying() {\n      if (!isPlaying) {\n        // Start playing tone\n        oscillator = audioContext.createOscillator();\n        oscillator.type = 'sine';\n        oscillator.frequency.setValueAtTime(440, audioContext.currentTime);\n        oscillator.connect(audioContext.destination);\n        oscillator.start();\n\n        // Change screen color\n        document.body.style.backgroundColor = 'red';\n      } else {\n        // Stop playing tone\n        if (oscillator) {\n          oscillator.stop();\n          oscillator = null;\n        }\n\n        // Reset screen color\n        document.body.style.backgroundColor = '';\n      }\n      isPlaying = !isPlaying;\n    }\n\n    NotebookActions.executed.connect(() => {\n      if (extensionEnabled) {\n        if (grabAttentionTimeout !== null) {\n          clearTimeout(grabAttentionTimeout);\n        }\n        grabAttentionTimeout = setTimeout(\n          grabAttention,\n          3000\n        ) as unknown as number; // Start effect 3 seconds after execution\n      }\n    });\n\n    // Added toggle command\n    app.commands.addCommand('toggle-attention-grabber', {\n      label: 'Toggle Attention Grabber',\n      execute: () => {\n        extensionEnabled = !extensionEnabled;\n        if (!extensionEnabled) {\n          stopAnnoying();\n        }\n      }\n    });\n    console.log('Toggle command added');\n\n    app.contextMenu.addItem({\n      command: 'toggle-attention-grabber',\n      selector: '.jp-Notebook'\n    });\n\n    notebookTracker.widgetAdded.connect((tracker, notebookPanel) => {\n      notebookPanel.node.addEventListener('click', stopAnnoying);\n      notebookPanel.node.addEventListener('keydown', stopAnnoying);\n    });\n  }\n};\n\nexport default plugin;\n"],"names":[],"sourceRoot":""}