{"version":3,"file":"js/535.df2177e2.js","mappings":"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","sources":["webpack://Kalabash/./src/views/monitoring/Messages.vue","webpack://Kalabash/./src/components/logs/MessageList.vue","webpack://Kalabash/src/components/logs/MessageList.vue","webpack://Kalabash/./src/components/logs/MessageList.vue?ebc7","webpack://Kalabash/./src/components/logs/MessageList.vue?409b","webpack://Kalabash/src/views/monitoring/Messages.vue","webpack://Kalabash/./src/views/monitoring/Messages.vue?153e","webpack://Kalabash/./src/views/monitoring/Messages.vue?5c8c","webpack://Kalabash/./node_modules/debounce/index.js","webpack://Kalabash/../../../src/components/VGrid/VSpacer.ts","webpack://Kalabash/./src/api/logs.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_c('translate',[_vm._v(\"Message history\")])],1)],1),_c('message-list')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{staticClass:\"mt-6\"},[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-spacer'),_c('v-text-field',{attrs:{\"prepend-inner-icon\":\"mdi-magnify\",\"placeholder\":_vm._f(\"translate\")('Search'),\"filled\":\"\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.messages,\"search\":_vm.search,\"options\":_vm.options,\"server-items-length\":_vm.total},on:{\"update:options\":function($event){_vm.options=$event}},scopedSlots:_vm._u([{key:\"item.date\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm._f(\"date\")(item.date))+\" \")]}},{key:\"item.sender\",fn:function({ item }){return [_vm._v(\" \"+_vm._s(_vm._f(\"truncate\")(item.sender,50))+\" \")]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<v-card class=\"mt-6\">\n  <v-toolbar flat>\n    <v-spacer></v-spacer>\n    <v-text-field\n      v-model=\"search\"\n      prepend-inner-icon=\"mdi-magnify\"\n      :placeholder=\"'Search'|translate\"\n      filled\n      outlined\n      dense\n      hide-details\n      />\n  </v-toolbar>\n  <v-data-table\n    :headers=\"headers\"\n    :items=\"messages\"\n    :search=\"search\"\n    class=\"elevation-1\"\n    :options.sync=\"options\"\n    :server-items-length=\"total\"\n    >\n    <template v-slot:item.date=\"{ item }\">\n      {{ item.date|date }}\n    </template>\n    <template v-slot:item.sender=\"{ item }\">\n      {{ item.sender|truncate(50) }}\n    </template>\n  </v-data-table>\n</v-card>\n</template>\n\n<script>\nimport logs from '@/api/logs'\nimport debounce from 'debounce'\n\nexport default {\n  data () {\n    return {\n      messages: [],\n      headers: [\n        { text: this.$gettext('Queue ID'), value: 'queue_id' },\n        { text: this.$gettext('Date'), value: 'date', width: '20%' },\n        { text: this.$gettext('Status'), value: 'status' },\n        { text: this.$gettext('To'), value: 'rcpt' },\n        { text: this.$gettext('From'), value: 'sender' }\n      ],\n      loading: true,\n      options: {},\n      search: '',\n      total: 0\n    }\n  },\n  methods: {\n    fetchMessages () {\n      let order\n      if (this.options.sortBy.length) {\n        order = (this.options.sortDesc[0] ? '-' : '') + this.options.sortBy[0]\n      }\n      const params = {\n        ordering: order,\n        page: this.options.page,\n        page_size: this.options.itemsPerPage,\n        search: this.search\n      }\n      this.loading = true\n      logs.getMessages(params).then(response => {\n        this.messages = response.data.results\n        this.total = response.data.count\n        this.loading = false\n      })\n    }\n  },\n  created () {\n    this.fetchMessages = debounce(this.fetchMessages, 500)\n  },\n  watch: {\n    options: {\n      handler () {\n        this.fetchMessages()\n      },\n      deep: true\n    },\n    search (val) {\n      this.fetchMessages()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MessageList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MessageList.vue?vue&type=template&id=28f41574&\"\nimport script from \"./MessageList.vue?vue&type=script&lang=js&\"\nexport * from \"./MessageList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n<div>\n  <v-toolbar flat>\n    <v-toolbar-title><translate>Message history</translate></v-toolbar-title>\n  </v-toolbar>\n  <message-list />\n</div>\n</template>\n\n<script>\nimport MessageList from '@/components/logs/MessageList'\n\nexport default {\n  components: {\n    MessageList\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Messages.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Messages.vue?vue&type=template&id=39f9cef7&\"\nimport script from \"./Messages.vue?vue&type=script&lang=js&\"\nexport * from \"./Messages.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","import repository from './repository'\n\nconst resource = 'logs'\n\nexport default {\n  getAuditTrail (params) {\n    return repository.get(`/${resource}/audit-trail/`, { params })\n  },\n  getMessages (params) {\n    return repository.get(`/${resource}/messages/`, { params })\n  }\n}\n"],"names":["attrs","staticRenderFns","model","value","callback","search","staticClass","options","key","fn","item","data","messages","headers","text","width","loading","total","methods","fetchMessages","order","ordering","page","page_size","logs","created","watch","handler","deep","component","components","MessageList","render","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","module","exports","createSimpleFunctional","resource","getAuditTrail","params","repository","getMessages"],"sourceRoot":""}