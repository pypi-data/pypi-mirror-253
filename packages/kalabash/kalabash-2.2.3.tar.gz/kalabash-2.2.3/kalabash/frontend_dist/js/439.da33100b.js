(self["webpackChunkKalabash"]=self["webpackChunkKalabash"]||[]).push([[439],{393:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var a=s(6313),l=s(7953),o=function(){var t=this,e=t._self._c;return e("div",[e(a.Z,{attrs:{flat:""}},[e(l.qW,[e("translate",[t._v("Audit trail")])],1)],1),e("audit-trail-list")],1)},n=[],i=s(4145),r=s(4127),u=s(5151),c=s(3687),h=s(7808),d=function(){var t=this,e=t._self._c;return e(i.Z,{staticClass:"mt-6"},[e(a.Z,{attrs:{flat:""}},[e(c.Z),e(h.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:t._f("translate")("Search"),filled:"",outlined:"",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(u.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.logs,search:t.search,options:t.options,"server-items-length":t.total},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.level",fn:function({item:s}){return[e(r.Z,{attrs:{color:t.getLevelColor(s.level),"text-color":"white",small:""}},[t._v(" "+t._s(s.level)+" ")])]}}])})],1)},g=[],p=s(6310),f=s(296),v=s.n(f),m={data(){return{logs:[],headers:[{text:this.$gettext("Date"),value:"date_created"},{text:this.$gettext("Level"),value:"level"},{text:this.$gettext("Logger"),value:"logger"},{text:this.$gettext("Message"),value:"message"}],loading:!0,options:{},search:"",total:0}},methods:{getLevelColor(t){return"INFO"===t?"primary":"WARNING"===t?"orange":"CRITICAL"===t||"ERROR"===t?"red":""},fetchLogs(){let t;this.options.sortBy.length&&(t=(this.options.sortDesc[0]?"-":"")+this.options.sortBy[0]);const e={ordering:t,page:this.options.page,page_size:this.options.itemsPerPage,search:this.search};this.loading=!0,p.Z.getAuditTrail(e).then((t=>{this.logs=t.data.results,this.total=t.data.count,this.loading=!1}))}},created(){this.fetchLogs=v()(this.fetchLogs,500)},watch:{options:{handler(){this.fetchLogs()},deep:!0},search(t){this.fetchLogs()}}},Z=m,x=s(1001),L=(0,x.Z)(Z,d,g,!1,null,null,null),_=L.exports,y={components:{AuditTrailList:_}},C=y,T=(0,x.Z)(C,o,n,!1,null,"164f0111",null),b=T.exports},296:function(t){function e(t,e,s){var a,l,o,n,i;function r(){var u=Date.now()-n;u<e&&u>=0?a=setTimeout(r,e-u):(a=null,s||(i=t.apply(o,l),o=l=null))}null==e&&(e=100);var u=function(){o=this,l=arguments,n=Date.now();var u=s&&!a;return a||(a=setTimeout(r,e)),u&&(i=t.apply(o,l),o=l=null),i};return u.clear=function(){a&&(clearTimeout(a),a=null)},u.flush=function(){a&&(i=t.apply(o,l),o=l=null,clearTimeout(a),a=null)},u}e.debounce=e,t.exports=e},3687:function(t,e,s){"use strict";s(9027);var a=s(5352);e["Z"]=(0,a.Ji)("spacer","div","v-spacer")},6310:function(t,e,s){"use strict";var a=s(2201);const l="logs";e["Z"]={getAuditTrail(t){return a.Z.get(`/${l}/audit-trail/`,{params:t})},getMessages(t){return a.Z.get(`/${l}/messages/`,{params:t})}}}}]);
//# sourceMappingURL=439.da33100b.js.map