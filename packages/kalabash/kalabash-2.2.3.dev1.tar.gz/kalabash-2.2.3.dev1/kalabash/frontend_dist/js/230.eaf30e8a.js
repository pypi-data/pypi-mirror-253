"use strict";(self["webpackChunkKalabash"]=self["webpackChunkKalabash"]||[]).push([[230],{1484:function(t,e,i){i.r(e),i.d(e,{default:function(){return k}});var n=i(4562),s=i(4145),o=i(5151),a=i(4324),r=i(5808),l=i(4528),c=i(3687),u=i(7808),d=i(6313),g=function(){var t=this,e=t._self._c;return e(s.Z,{staticClass:"mt-6"},[e(d.Z,{attrs:{flat:""}},[e(l.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e(n.Z,t._g(t._b({attrs:{small:""}},"v-btn",s,!1),i),[t._v(" Actions "),e(a.Z,{attrs:{right:""}},[t._v("mdi-chevron-down")])],1)]}}])},[e(r.Z,{attrs:{dense:""}})],1),e(c.Z),e(u.Z,{attrs:{"prepend-inner-icon":"mdi-magnify",placeholder:"Search",filled:"",outlined:"",dense:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),e(o.Z,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.migrations,search:t.search,"item-key":"id",options:t.options,"server-items-length":t.totalMigrations,loading:t.loading,"show-select":""},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.mailbox",fn:function({item:i}){return[e("router-link",{attrs:{to:{name:"AccountDetail",params:{id:i.mailbox.user}}}},[t._v(" "+t._s(i.mailbox.full_address)+" ")])]}},{key:"item.actions",fn:function({item:i}){return[e(l.Z,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:s}){return[e(n.Z,t._g(t._b({attrs:{icon:""}},"v-btn",s,!1),i),[e(a.Z,[t._v("mdi-dots-horizontal")])],1)]}}],null,!0)},[e("menu-items",{attrs:{items:t.getMenuItems(i),object:i}})],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)},m=[],h=(i(7658),i(2201));const f="migrations";var v={getMigrations(t){return h.Z.get(`/${f}/`,{params:t})},getMigration(t,e){return h.Z.get(`/${f}/${t}/`,e)},deleteMigration(t){return h.Z["delete"](`/${f}/${t}/`)}},p=i(8658),Z=i(5282),_={components:{MenuItems:p.Z},data(){return{migrations:[],headers:[{text:this.$gettext("Provider"),value:"provider.name"},{text:this.$gettext("Old account"),value:"username"},{text:this.$gettext("New account"),value:"mailbox"},{text:this.$gettext("Actions"),value:"actions",sortable:!1,align:"right"}],selected:[],loading:!0,search:"",options:{},totalMigrations:0}},methods:{deleteMigration(t){v.deleteMigration(t.id).then((e=>{Z.$.$emit("notification",{msg:this.$gettext("Migration deleted")}),this.migrations=this.migrations.filter((e=>e.id!==t.id))}))},getMigrations(t){this.loading=!0;let e={};void 0!==t&&(e={params:{search:t}}),v.getMigrations(e).then((t=>{this.migrations=t.data,this.totalMigrations=this.migrations.length,this.loading=!1}))},getMenuItems(t){const e=[];return e.push({label:this.$gettext("Delete"),icon:"mdi-delete-outline",onClick:this.deleteMigration,color:"red"}),e}},mounted(){this.getMigrations()}},b=_,x=i(1001),M=(0,x.Z)(b,g,m,!1,null,null,null),k=M.exports},8658:function(t,e,i){i.d(e,{Z:function(){return h}});var n=i(4324),s=i(5808),o=i(4525),a=i(9378),r=i(4611),l=function(){var t=this,e=t._self._c;return e(s.Z,{attrs:{dense:""}},t._l(t.items,(function(i,s){return e(o.Z,{key:s,on:{click:function(e){return i.onClick(t.object)}}},[e(r.Z,[e(n.Z,{attrs:{color:i.color}},[t._v(t._s(i.icon))])],1),e(a.km,[e(a.V9,[t._v(t._s(i.label))])],1)],1)})),1)},c=[],u={props:["items","object"]},d=u,g=i(1001),m=(0,g.Z)(d,l,c,!1,null,null,null),h=m.exports},3687:function(t,e,i){i(9027);var n=i(5352);e["Z"]=(0,n.Ji)("spacer","div","v-spacer")}}]);
//# sourceMappingURL=230.eaf30e8a.js.map