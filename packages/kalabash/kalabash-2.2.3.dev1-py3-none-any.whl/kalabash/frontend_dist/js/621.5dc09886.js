"use strict";(self["webpackChunkKalabash"]=self["webpackChunkKalabash"]||[]).push([[621],{6266:function(e,t,n){n.d(t,{Z:function(){return v}});var s=n(9559),i=n(9884),a=n(7808),o=n(2648),r=function(){var e=this,t=e._self._c;return t("validation-observer",{ref:"observer"},[e.form.pk?e._e():t(i.Z,{attrs:{label:e._f("translate")("Random address")},on:{input:e.update},model:{value:e.form.random,callback:function(t){e.$set(e.form,"random",t)},expression:"form.random"}}),e.form.random?e._e():t("validation-provider",{attrs:{name:"address",rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:n}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Email address")))]),t("email-field",{ref:"address",attrs:{"error-messages":n,type:"email",outlined:"",dense:""},on:{input:e.update},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})]}}],null,!1,2722540851)}),e.form.random?t("validation-provider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function({errors:n}){return[t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Domain")))]),t(s.Z,{attrs:{items:e.domains,"error-messages":n,"item-text":"name","return-object":"",outlined:"",dense:""},on:{change:e.updateAddress,input:e.update},model:{value:e.form.domain,callback:function(t){e.$set(e.form,"domain",t)},expression:"form.domain"}})]}}],null,!1,1467360312)}):e._e(),t(i.Z,{attrs:{label:e._f("translate")("Enabled")},on:{input:e.update},model:{value:e.form.enabled,callback:function(t){e.$set(e.form,"enabled",t)},expression:"form.enabled"}}),t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Expire at")))]),t(a.Z,{attrs:{outlined:"",dense:""},on:{input:e.update},model:{value:e.form.expire,callback:function(t){e.$set(e.form,"expire",t)},expression:"form.expire"}}),t("label",{staticClass:"m-label"},[e._v(e._s(e.$gettext("Description")))]),t(o.Z,{attrs:{rows:"2",outlined:"",dense:""},on:{input:e.update},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)},l=[],d=n(629),c=n(3853),u=n(422),p={components:{EmailField:u.Z},props:["value"],computed:{...(0,d.Se)({domains:"identities/domains"})},data(){return{form:{}}},methods:{reset(){this.form={}},updateAddress(e){c.Z.getRandomAddress().then((t=>{this.$set(this.form,"address",`${t.data.address}@${e.name}`),this.update()}))},update(){this.$emit("input",this.form)}},watch:{value:{handler(e){this.form=e?{...e}:{}},immediate:!0}}},h=p,f=n(1001),m=(0,f.Z)(h,r,l,!1,null,null,null),v=m.exports},7952:function(e,t,n){n.d(t,{Z:function(){return u}});var s=n(4127),i=function(){var e=this,t=e._self._c;return t("validation-observer",{ref:"observer"},[t("validation-provider",{attrs:{vid:"recipients"},scopedSlots:e._u([{key:"default",fn:function({errors:n}){return[t("email-field",{ref:"recipientField",attrs:{placeholder:e._f("translate")("Start typing a name here..."),hint:e._f("translate")("Alias(es) of this mailbox. To create a catchall alias, just enter the domain name (@domain.tld)."),"persistent-hint":"","allow-add":"","error-messages":n},on:{"domain-selected":e.addRecipient},model:{value:e.recipient,callback:function(t){e.recipient=t},expression:"recipient"}})]}}])}),e._l(e.recipients,(function(n,i){return t(s.Z,{key:i,staticClass:"mr-2 mt-2",attrs:{close:""},on:{"click:close":function(t){return e.removeRecipient(i)}}},[e._v(" "+e._s(n)+" ")])}))],2)},a=[],o=(n(7658),n(422)),r={props:["value"],components:{EmailField:o.Z},data(){return{recipient:"",recipients:[]}},methods:{reset(){this.recipient="",this.recipients=[]},async addRecipient(){this.recipients.push(this.recipient),this.$emit("input",this.recipients),this.$refs.recipientField.reset()},removeRecipient(e){this.recipients.splice(e,1),this.$emit("input",this.recipients)}},watch:{value:{handler:function(e){this.recipients=e?[...e]:[]},immediate:!0}}},l=r,d=n(1001),c=(0,d.Z)(l,i,a,!1,null,null,null),u=c.exports},422:function(e,t,n){n.d(t,{Z:function(){return f}});var s=n(5808),i=n(4525),a=n(9378),o=n(7808),r=function(){var e=this,t=e._self._c;return t("div",[t(o.Z,e._g(e._b({ref:"input",attrs:{outlined:"",dense:"",autocomplete:"new-password"},on:{input:e.update,keydown:e.onKeyDown},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}},"v-text-field",e.$attrs,!1),e.$listeners)),e.showMenu?t("div",{staticClass:"menu",style:`width: ${e.width}px;`},[t(s.Z,{staticClass:"list"},e._l(e.filteredDomains,(function(n,s){return t(i.Z,{key:s,class:e.selectionIndex===s?"selected":"",on:{click:function(t){return e.selectDomain(n)}}},[t(a.V9,[e._v(e._s(n.name))])],1)})),1)],1):e._e()],1)},l=[],d=n(629),c={props:{value:String,allowAdd:{type:Boolean,default:!1}},computed:{...(0,d.Se)({domains:"identities/domains"}),filteredDomains(){return this.domains.filter((e=>e.name.startsWith(this.domainSearch)))}},data(){return{domainSearch:"",input:this.value,selectionIndex:0,showMenu:!1,width:500}},methods:{onKeyDown(e){const t=e.keyCode;40===t||34===t?(this.showMenu?this.increaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):38===t||33===t?(this.showMenu?this.decreaseSelectionIndex():(this.domainSearch="",this.showMenu=!0),e.preventDefault()):13===t||9===t?(this.filteredDomains.length>0?this.selectDomain(this.filteredDomains[this.selectionIndex]):this.allowAdd&&this.selectDomain(),e.preventDefault()):27===t&&this.filteredDomains.length>0&&(this.showMenu=!1,e.preventDefault())},increaseSelectionIndex(){this.selectionIndex>=this.filteredDomains.length-1?this.selectionIndex=0:this.selectionIndex+=1},decreaseSelectionIndex(){this.selectionIndex<=0?this.selectionIndex=this.filteredDomains.length-1:this.selectionIndex-=1},selectDomain(e){void 0!==e&&(this.input=this.input.split("@")[0]+"@"+e.name),this.showMenu=!1,this.$emit("input",this.input),this.$emit("domain-selected")},update(e){-1!==this.input.indexOf("@")?(this.domainSearch=this.input.split("@")[1],this.allowAdd?this.showMenu=this.filteredDomains.length>0:this.showMenu=!0):this.showMenu=!1,this.$emit("input",this.input)},onResize(){this.updateMinWidthProperty()},updateMinWidthProperty(){this.width=this.$refs.input.$el.clientWidth},reset(){this.input="",this.domainSearch=""}},mounted(){},updated(){this.$nextTick((()=>{this.updateMinWidthProperty()}))},watch:{value(e){this.input=e}}},u=c,p=n(1001),h=(0,p.Z)(u,r,l,!1,null,"db16b362",null),f=h.exports},4621:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var s=function(){var e=this,t=e._self._c;return t("div",[t("span",{staticClass:"text-h4"},[t("translate",[e._v("Edit alias")])],1),t("div",{staticClass:"mt-4"}),t("alias-form",{attrs:{alias:e.alias}})],1)},i=[],a=n(3853),o=n(4562),r=n(4127),l=n(266),d=n(255),c=n(2348),u=n(400),p=n(1214),h=n(7394),f=n(4324),m=n(1713),v=function(){var e=this,t=e._self._c;return t("div",[t(p.Z,{model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[t(d.Z,[t(u.Z,{scopedSlots:e._u([{key:"default",fn:function({open:n}){return[t(m.Z,{attrs:{"no-gutters":""}},[t(l.Z,{attrs:{cols:"4"}},[t("translate",[e._v("General")])],1),t(l.Z,{staticClass:"text--secondary",attrs:{cols:"8"}},[t(h.Z5,{attrs:{"leave-absolute":""}},[n?t("span"):t(m.Z,{staticStyle:{width:"100%"},attrs:{"no-gutters":""}},[t(l.Z,{attrs:{cols:"6"}},[t("translate",[e._v("Address: ")]),e._v(" "+e._s(e.editedAlias.address)+" ")],1),t(l.Z,{attrs:{cols:"6"}},[t("translate",{staticClass:"mr-2"},[e._v("Enabled")]),e.editedAlias.enabled?t(f.Z,{attrs:{color:"success"}},[e._v("mdi-check-circle-outline")]):t(f.Z,[e._v("mdi-close-circle-outline")])],1)],1)],1)],1)],1)]}}])}),t(c.Z,[t("alias-general-form",{ref:"generalForm",model:{value:e.editedAlias,callback:function(t){e.editedAlias=t},expression:"editedAlias"}})],1)],1),t(d.Z,[t(u.Z,{scopedSlots:e._u([{key:"default",fn:function({open:n}){return[t(m.Z,{attrs:{"no-gutters":""}},[t(l.Z,{attrs:{cols:"4"}},[t("translate",[e._v("Recipients")])],1),t(l.Z,{staticClass:"text--secondary",attrs:{cols:"8"}},[t(h.Z5,{attrs:{"leave-absolute":""}},[n?t("span"):t(m.Z,{staticStyle:{width:"100%"},attrs:{"no-gutters":""}},e._l(e.editedAlias.recipients,(function(n,s){return t(r.Z,{key:s,attrs:{small:""}},[e._v(" "+e._s(n)+" ")])})),1)],1)],1)],1)]}}])}),t(c.Z,[t("alias-recipient-form",{ref:"recipientForm",model:{value:e.editedAlias.recipients,callback:function(t){e.$set(e.editedAlias,"recipients",t)},expression:"editedAlias.recipients"}})],1)],1)],1),t("div",{staticClass:"mt-4 d-flex justify-end"},[t(o.Z,{attrs:{loading:e.working},on:{click:function(t){return e.$router.go(-1)}}},[t("translate",[e._v("Cancel")])],1),t(o.Z,{staticClass:"ml-4",attrs:{color:"primary darken-1",loading:e.working},on:{click:e.save}},[t("translate",[e._v("Save")])],1)],1)],1)},g=[],x=n(5282),y=n(6266),b=n(7952),w={components:{AliasGeneralForm:y.Z,AliasRecipientForm:b.Z},props:["alias"],data(){return{editedAlias:{},panel:0,working:!1}},methods:{async save(){if(void 0!==this.$refs.generalForm){const e=await this.$refs.generalForm.$refs.observer.validate();if(!e)return}this.working=!0;try{await a.Z.patch(this.editedAlias.pk,this.editedAlias).then((e=>{x.$.$emit("notification",{msg:this.$gettext("Alias updated")})}))}catch(e){this.$refs.generalForm&&this.$refs.generalForm.$refs.observer.setErrors(e.response.data)}finally{this.working=!1}}},watch:{alias:{handler:function(e){e&&(this.editedAlias={...e})},immediate:!0}}},Z=w,$=n(1001),k=(0,$.Z)(Z,v,g,!1,null,null,null),_=k.exports,A={components:{AliasForm:_},data(){return{alias:{}}},mounted(){a.Z.get(this.$route.params.id).then((e=>{this.alias=e.data}))}},C=A,S=(0,$.Z)(C,s,i,!1,null,null,null),I=S.exports},255:function(e,t,n){var s=n(3037),i=n(4712),a=n(5352),o=n(7678);t["Z"]=(0,o.Z)((0,s.d)("expansionPanels","v-expansion-panel","v-expansion-panels"),(0,i.J)("expansionPanel",!0)).extend({name:"v-expansion-panel",props:{disabled:Boolean,readonly:Boolean},data(){return{content:null,header:null,nextIsActive:!1}},computed:{classes(){return{"v-expansion-panel--active":this.isActive,"v-expansion-panel--next-active":this.nextIsActive,"v-expansion-panel--disabled":this.isDisabled,...this.groupClasses}},isDisabled(){return this.expansionPanels.disabled||this.disabled},isReadonly(){return this.expansionPanels.readonly||this.readonly}},methods:{registerContent(e){this.content=e},unregisterContent(){this.content=null},registerHeader(e){this.header=e,e.$on("click",this.onClick)},unregisterHeader(){this.header=null},onClick(e){e.detail&&this.header.$el.blur(),this.$emit("click",e),this.isReadonly||this.isDisabled||this.toggle()},toggle(){this.$nextTick((()=>this.$emit("change")))}},render(e){return e("div",{staticClass:"v-expansion-panel",class:this.classes,attrs:{"aria-expanded":String(this.isActive)}},(0,a.z9)(this))}})},2348:function(e,t,n){var s=n(7394),i=n(8223),a=n(6878),o=n(4712),r=n(5352),l=n(7678);const d=(0,l.Z)(i.Z,a.Z,(0,o.f)("expansionPanel","v-expansion-panel-content","v-expansion-panel"));t["Z"]=d.extend().extend({name:"v-expansion-panel-content",data:()=>({isActive:!1}),computed:{parentIsActive(){return this.expansionPanel.isActive}},watch:{parentIsActive:{immediate:!0,handler(e,t){e&&(this.isBooted=!0),null==t?this.isActive=e:this.$nextTick((()=>this.isActive=e))}}},created(){this.expansionPanel.registerContent(this)},beforeDestroy(){this.expansionPanel.unregisterContent()},render(e){return e(s.Fx,this.showLazyContent((()=>[e("div",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-content",directives:[{name:"show",value:this.isActive}]}),[e("div",{class:"v-expansion-panel-content__wrap"},(0,r.z9)(this))])])))}})},400:function(e,t,n){var s=n(7394),i=n(2240),a=n(6878),o=n(4712),r=n(7069),l=n(5352),d=n(7678);const c=(0,d.Z)(a.Z,(0,o.f)("expansionPanel","v-expansion-panel-header","v-expansion-panel"));t["Z"]=c.extend().extend({name:"v-expansion-panel-header",directives:{ripple:r.Z},props:{disableIconRotate:Boolean,expandIcon:{type:String,default:"$expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:()=>({hasMousedown:!1}),computed:{classes(){return{"v-expansion-panel-header--active":this.isActive,"v-expansion-panel-header--mousedown":this.hasMousedown}},isActive(){return this.expansionPanel.isActive},isDisabled(){return this.expansionPanel.isDisabled},isReadonly(){return this.expansionPanel.isReadonly}},created(){this.expansionPanel.registerHeader(this)},beforeDestroy(){this.expansionPanel.unregisterHeader()},methods:{onClick(e){this.$emit("click",e)},genIcon(){const e=(0,l.z9)(this,"actions")||[this.$createElement(i.Z,this.expandIcon)];return this.$createElement(s.Z5,[this.$createElement("div",{staticClass:"v-expansion-panel-header__icon",class:{"v-expansion-panel-header__icon--disable-rotate":this.disableIconRotate},directives:[{name:"show",value:!this.isDisabled}]},e)])}},render(e){return e("button",this.setBackgroundColor(this.color,{staticClass:"v-expansion-panel-header",class:this.classes,attrs:{tabindex:this.isDisabled?-1:null,type:"button","aria-expanded":this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.$listeners,click:this.onClick,mousedown:()=>this.hasMousedown=!0,mouseup:()=>this.hasMousedown=!1}}),[(0,l.z9)(this,"default",{open:this.isActive},!0),this.hideActions||this.genIcon()])}})},1214:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(3385),i=n(4101),a=s.y.extend({name:"v-expansion-panels",provide(){return{expansionPanels:this}},props:{accordion:Boolean,disabled:Boolean,flat:Boolean,hover:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,readonly:Boolean,tile:Boolean},computed:{classes(){return{...s.y.options.computed.classes.call(this),"v-expansion-panels":!0,"v-expansion-panels--accordion":this.accordion,"v-expansion-panels--flat":this.flat,"v-expansion-panels--hover":this.hover,"v-expansion-panels--focusable":this.focusable,"v-expansion-panels--inset":this.inset,"v-expansion-panels--popout":this.popout,"v-expansion-panels--tile":this.tile}}},created(){this.$attrs.hasOwnProperty("expand")&&(0,i.fK)("expand","multiple",this),Array.isArray(this.value)&&this.value.length>0&&"boolean"===typeof this.value[0]&&(0,i.fK)(':value="[true, false, true]"',':value="[0, 2]"',this)},methods:{updateItem(e,t){const n=this.getValue(e,t),s=this.getValue(e,t+1);e.isActive=this.toggleMethod(n),e.nextIsActive=this.toggleMethod(s)}}})},266:function(e,t,n){n(7658),n(1884);var s=n(144),i=n(1767),a=n(5352);const o=["sm","md","lg","xl"],r=(()=>o.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),l=(()=>o.reduce(((e,t)=>(e["offset"+(0,a.jC)(t)]={type:[String,Number],default:null},e)),{}))(),d=(()=>o.reduce(((e,t)=>(e["order"+(0,a.jC)(t)]={type:[String,Number],default:null},e)),{}))(),c={col:Object.keys(r),offset:Object.keys(l),order:Object.keys(d)};function u(e,t,n){let s=e;if(null!=n&&!1!==n){if(t){const n=t.replace(e,"");s+=`-${n}`}return"col"!==e||""!==n&&!0!==n?(s+=`-${n}`,s.toLowerCase()):s.toLowerCase()}}const p=new Map;t["Z"]=s.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...d,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:n,children:s,parent:a}){let o="";for(const i in t)o+=String(t[i]);let r=p.get(o);if(!r){let e;for(e in r=[],c)c[e].forEach((n=>{const s=t[n],i=u(e,n,s);i&&r.push(i)}));const n=r.some((e=>e.startsWith("col-")));r.push({col:!n||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),p.set(o,r)}return e(t.tag,(0,i.ZP)(n,{class:r}),s)}})},1713:function(e,t,n){n(7658),n(1884);var s=n(144),i=n(1767),a=n(5352);const o=["sm","md","lg","xl"],r=["start","end","center"];function l(e,t){return o.reduce(((n,s)=>(n[e+(0,a.jC)(s)]=t(),n)),{})}const d=e=>[...r,"baseline","stretch"].includes(e),c=l("align",(()=>({type:String,default:null,validator:d}))),u=e=>[...r,"space-between","space-around"].includes(e),p=l("justify",(()=>({type:String,default:null,validator:u}))),h=e=>[...r,"space-between","space-around","stretch"].includes(e),f=l("alignContent",(()=>({type:String,default:null,validator:h}))),m={align:Object.keys(c),justify:Object.keys(p),alignContent:Object.keys(f)},v={align:"align",justify:"justify",alignContent:"align-content"};function g(e,t,n){let s=v[e];if(null!=n){if(t){const n=t.replace(e,"");s+=`-${n}`}return s+=`-${n}`,s.toLowerCase()}}const x=new Map;t["Z"]=s.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:u},...p,alignContent:{type:String,default:null,validator:h},...f},render(e,{props:t,data:n,children:s}){let a="";for(const i in t)a+=String(t[i]);let o=x.get(a);if(!o){let e;for(e in o=[],m)m[e].forEach((n=>{const s=t[n],i=g(e,n,s);i&&o.push(i)}));o.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),x.set(a,o)}return e(t.tag,(0,i.ZP)(n,{staticClass:"row",class:o}),s)}})},2648:function(e,t,n){n.d(t,{Z:function(){return o}});var s=n(7808),i=n(7678);const a=(0,i.Z)(s.Z);var o=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...s.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null===(t=this.$refs.input)||void 0===t||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(n,t)+"px"},genInput(){const e=s.Z.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){s.Z.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},3853:function(e,t,n){var s=n(2201);const i="aliases";t["Z"]={get(e){return s.Z.get(`${i}/${e}/`)},getRandomAddress(){return s.Z.get(`${i}/random_address/`)},validate(e){return s.Z.post(`${i}/validate/`,e)},create(e){return s.Z.post(`${i}/`,e)},patch(e,t){return s.Z.patch(`${i}/${e}/`,t)},delete(e){return s.Z["delete"](`${i}/${e}/`)}}}}]);
//# sourceMappingURL=621.5dc09886.js.map