{"version":3,"file":"js/439.da33100b.js","mappings":"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","sources":["webpack://Kalabash/./src/views/monitoring/AuditTrail.vue","webpack://Kalabash/./src/components/logs/AuditTrailList.vue","webpack://Kalabash/src/components/logs/AuditTrailList.vue","webpack://Kalabash/./src/components/logs/AuditTrailList.vue?89c0","webpack://Kalabash/./src/components/logs/AuditTrailList.vue?232f","webpack://Kalabash/src/views/monitoring/AuditTrail.vue","webpack://Kalabash/./src/views/monitoring/AuditTrail.vue?3f86","webpack://Kalabash/./src/views/monitoring/AuditTrail.vue?a76b","webpack://Kalabash/./node_modules/debounce/index.js","webpack://Kalabash/../../../src/components/VGrid/VSpacer.ts","webpack://Kalabash/./src/api/logs.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_c('translate',[_vm._v(\"Audit trail\")])],1)],1),_c('audit-trail-list')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('v-card',{staticClass:\"mt-6\"},[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-spacer'),_c('v-text-field',{attrs:{\"prepend-inner-icon\":\"mdi-magnify\",\"placeholder\":_vm._f(\"translate\")('Search'),\"filled\":\"\",\"outlined\":\"\",\"dense\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.logs,\"search\":_vm.search,\"options\":_vm.options,\"server-items-length\":_vm.total},on:{\"update:options\":function($event){_vm.options=$event}},scopedSlots:_vm._u([{key:\"item.level\",fn:function({ item }){return [_c('v-chip',{attrs:{\"color\":_vm.getLevelColor(item.level),\"text-color\":\"white\",\"small\":\"\"}},[_vm._v(\" \"+_vm._s(item.level)+\" \")])]}}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<v-card class=\"mt-6\">\n  <v-toolbar flat>\n    <v-spacer></v-spacer>\n    <v-text-field\n      v-model=\"search\"\n      prepend-inner-icon=\"mdi-magnify\"\n      :placeholder=\"'Search'|translate\"\n      filled\n      outlined\n      dense\n      hide-details\n      />\n  </v-toolbar>\n  <v-data-table\n    :headers=\"headers\"\n    :items=\"logs\"\n    :search=\"search\"\n    class=\"elevation-1\"\n    :options.sync=\"options\"\n    :server-items-length=\"total\"\n    >\n    <template v-slot:item.level=\"{ item }\">\n      <v-chip :color=\"getLevelColor(item.level)\" text-color=\"white\" small>\n        {{ item.level }}\n      </v-chip>\n    </template>\n  </v-data-table>\n</v-card>\n</template>\n\n<script>\nimport logs from '@/api/logs'\nimport debounce from 'debounce'\nexport default {\n  data () {\n    return {\n      logs: [],\n      headers: [\n        { text: this.$gettext('Date'), value: 'date_created' },\n        { text: this.$gettext('Level'), value: 'level' },\n        { text: this.$gettext('Logger'), value: 'logger' },\n        { text: this.$gettext('Message'), value: 'message' }\n      ],\n      loading: true,\n      options: {},\n      search: '',\n      total: 0\n    }\n  },\n  methods: {\n    getLevelColor (level) {\n      if (level === 'INFO') {\n        return 'primary'\n      }\n      if (level === 'WARNING') {\n        return 'orange'\n      }\n      if (level === 'CRITICAL' || level === 'ERROR') {\n        return 'red'\n      }\n      return ''\n    },\n    fetchLogs () {\n      let order\n      if (this.options.sortBy.length) {\n        order = (this.options.sortDesc[0] ? '-' : '') + this.options.sortBy[0]\n      }\n      const params = {\n        ordering: order,\n        page: this.options.page,\n        page_size: this.options.itemsPerPage,\n        search: this.search\n      }\n      this.loading = true\n      logs.getAuditTrail(params).then(response => {\n        this.logs = response.data.results\n        this.total = response.data.count\n        this.loading = false\n      })\n    }\n  },\n  created () {\n    this.fetchLogs = debounce(this.fetchLogs, 500)\n  },\n  watch: {\n    options: {\n      handler () {\n        this.fetchLogs()\n      },\n      deep: true\n    },\n    search (val) {\n      this.fetchLogs()\n    }\n  }\n}\n</script>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuditTrailList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuditTrailList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuditTrailList.vue?vue&type=template&id=feb03a92&\"\nimport script from \"./AuditTrailList.vue?vue&type=script&lang=js&\"\nexport * from \"./AuditTrailList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n<div>\n  <v-toolbar flat>\n    <v-toolbar-title><translate>Audit trail</translate></v-toolbar-title>\n  </v-toolbar>\n  <audit-trail-list />\n</div>\n</template>\n\n<script>\nimport AuditTrailList from '@/components/logs/AuditTrailList.vue'\n\nexport default {\n  components: {\n    AuditTrailList\n  }\n}\n</script>\n\n<style scoped>\n.v-toolbar {\n  background-color: #f7f8fa !important;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuditTrail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AuditTrail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AuditTrail.vue?vue&type=template&id=164f0111&scoped=true&\"\nimport script from \"./AuditTrail.vue?vue&type=script&lang=js&\"\nexport * from \"./AuditTrail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AuditTrail.vue?vue&type=style&index=0&id=164f0111&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"164f0111\",\n  null\n  \n)\n\nexport default component.exports","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import './_grid.sass'\nimport { createSimpleFunctional } from '../../util/helpers'\n\nexport default createSimpleFunctional('spacer', 'div', 'v-spacer')\n","import repository from './repository'\n\nconst resource = 'logs'\n\nexport default {\n  getAuditTrail (params) {\n    return repository.get(`/${resource}/audit-trail/`, { params })\n  },\n  getMessages (params) {\n    return repository.get(`/${resource}/messages/`, { params })\n  }\n}\n"],"names":["attrs","staticRenderFns","model","value","search","callback","expression","_c","staticClass","headers","_vm","on","options","scopedSlots","item","getLevelColor","render","data","logs","text","loading","total","methods","fetchLogs","order","ordering","page","page_size","created","watch","handler","deep","component","components","AuditTrailList","debounce","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","now","setTimeout","apply","debounced","this","arguments","callNow","clear","clearTimeout","flush","module","exports","createSimpleFunctional","resource","getAuditTrail","params","repository","getMessages"],"sourceRoot":""}