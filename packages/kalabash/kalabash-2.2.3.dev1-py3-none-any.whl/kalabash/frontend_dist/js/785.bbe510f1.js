(self["webpackChunkKalabash"]=self["webpackChunkKalabash"]||[]).push([[785],{7785:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return m}});var o=e(4562),s=e(266),n=e(5495),a=e(1713),i=e(7808),c=function(){var t=this,r=t._self._c;return r(a.Z,{staticStyle:{height:"100%",margin:"0 auto"}},[r(s.Z,{staticClass:"primary",staticStyle:{height:"100%"},attrs:{cols:"0",sm:"6"}},[r(n.Z,{staticClass:"mt-10 ml-8",attrs:{src:e(5238),"max-width":"300"}})],1),r(s.Z,{staticClass:"d-flex flex-column justify-center pa-10",attrs:{cols:"12",sm:"6"},on:{keyup:function(r){return!r.type.indexOf("key")&&t._k(r.keyCode,"enter",13,r.key,"Enter")?null:t.changePassword.apply(null,arguments)}}},[r("span",{staticClass:"primary--text mb-6 text-h4"},[r("translate",[t._v("Forgot password?")])],1),r("validation-observer",{ref:"observer"},[r("validation-provider",{attrs:{vid:"password",rules:"required"},scopedSlots:t._u([{key:"default",fn:function({errors:e}){return[r("p",{attrs:{id:"password_validation"}},[t._v(t._s(t.password_validation_error))]),r("label",{staticClass:"m-label"},[r("translate",[t._v("Change password")])],1),r(i.Z,{attrs:{"error-messages":e,type:"password",outlined:""},model:{value:t.password,callback:function(r){t.password=r},expression:"password"}})]}}])}),r("validation-provider",{attrs:{vid:"password_confirm",rules:"required|samePassword:password"},scopedSlots:t._u([{key:"default",fn:function({errors:e}){return[r(i.Z,{attrs:{"error-messages":e,type:"password",outlined:""},model:{value:t.password_confirmed,callback:function(r){t.password_confirmed=r},expression:"password_confirmed"}})]}}])})],1),r("div",{staticClass:"d-flex justify-center"},[r(o.Z,{staticClass:"flex-grow-1",attrs:{color:"primary",large:"",loading:t.loading},on:{click:t.changePassword}},[r("translate",[t._v("Submit")])],1)],1),r("div",[r("router-link",{staticClass:"float-right primary--text",attrs:{to:{name:"Login"}}},[r("translate",[t._v("Return to login")])],1)],1)],1)],1)},l=[],u=(e(7658),e(2801),e(9895)),d={data(){return{loading:!1,password:"",password_confirmed:"",password_validation_error:"",errors:{},token:"",id:""}},methods:{checkUrl:function(){if(void 0===this.$route.params.token)""!==this.token&&""!==this.id||this.$router.push({name:"PasswordRecoveryForm"});else{const t=atob(this.$route.params.id);/^\d+$/.test(t)?(this.id=this.$route.params.id,this.token=this.$route.params.token,this.$router.push({name:"PasswordRecoveryChangeForm"})):this.$router.push({name:"PasswordRecoveryForm"})}},async changePassword(){const t=await this.$refs.observer.validate();if(!t)return;const r={new_password1:this.password,new_password2:this.password_confirmed,token:this.token,id:this.id};this.loading=!0,this.password_validation_error="",u.Z.changePassword(r).then((t=>{200===t.status&&(this.loading=!1,this.returnLogin())})).catch((t=>{let r="";this.loading=!1,403===t.response.status?r=this.$gettext("Invalid reset token."):404===t.response.status?r=this.$gettext("User unknown."):400===t.response.status&&"password_requirement"===t.response.data.type?t.response.data.errors.forEach((t=>{r+=this.$gettext(t)+"<br>"})):429===t.response.status&&(r=this.$gettext("Too many unsuccessful attempts, please try later.")),this.password_validation_error=r}))}},beforeMount(){this.checkUrl()}},p=d,f=e(1001),g=(0,f.Z)(p,c,l,!1,null,null,null),m=g.exports},6077:function(t,r,e){var o=e(614),s=String,n=TypeError;t.exports=function(t){if("object"==typeof t||o(t))return t;throw n("Can't set "+s(t)+" as a prototype")}},5787:function(t,r,e){var o=e(7976),s=TypeError;t.exports=function(t,r){if(o(r,t))return t;throw s("Incorrect invocation")}},648:function(t,r,e){var o=e(1694),s=e(614),n=e(4326),a=e(5112),i=a("toStringTag"),c=Object,l="Arguments"==n(function(){return arguments}()),u=function(t,r){try{return t[r]}catch(e){}};t.exports=o?n:function(t){var r,e,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=u(r=c(t),i))?e:l?n(r):"Object"==(o=n(r))&&s(r.callee)?"Arguments":o}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},1060:function(t,r,e){var o=e(1702),s=Error,n=o("".replace),a=function(t){return String(s(t).stack)}("zxcasd"),i=/\n\s*at [^:]*:[^\n]*/,c=i.test(a);t.exports=function(t,r){if(c&&"string"==typeof t&&!s.prepareStackTrace)while(r--)t=n(t,i,"");return t}},9587:function(t,r,e){var o=e(614),s=e(111),n=e(7674);t.exports=function(t,r,e){var a,i;return n&&o(a=r.constructor)&&a!==e&&s(i=a.prototype)&&i!==e.prototype&&n(t,i),t}},6277:function(t,r,e){var o=e(1340);t.exports=function(t,r){return void 0===t?arguments.length<2?"":r:o(t)}},7674:function(t,r,e){var o=e(1702),s=e(9670),n=e(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,r=!1,e={};try{t=o(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),t(e,[]),r=e instanceof Array}catch(a){}return function(e,o){return s(e),n(o),r?t(e,o):e.__proto__=o,e}}():void 0)},1694:function(t,r,e){var o=e(5112),s=o("toStringTag"),n={};n[s]="z",t.exports="[object z]"===String(n)},1340:function(t,r,e){var o=e(648),s=String;t.exports=function(t){if("Symbol"===o(t))throw TypeError("Cannot convert a Symbol value to a string");return s(t)}},2801:function(t,r,e){"use strict";var o=e(2109),s=e(7854),n=e(5005),a=e(9114),i=e(3070).f,c=e(2597),l=e(5787),u=e(9587),d=e(6277),p=e(3678),f=e(1060),g=e(9781),m=e(1913),E="DOMException",_=n("Error"),h=n(E),y=function(){l(this,v);var t=arguments.length,r=d(t<1?void 0:arguments[0]),e=d(t<2?void 0:arguments[1],"Error"),o=new h(r,e),s=_(r);return s.name=E,i(o,"stack",a(1,f(s.stack,1))),u(o,this,y),o},v=y.prototype=h.prototype,R="stack"in _(E),w="stack"in new h(1,2),S=h&&g&&Object.getOwnPropertyDescriptor(s,E),b=!!S&&!(S.writable&&S.configurable),C=R&&!b&&!w;o({global:!0,constructor:!0,forced:m||C},{DOMException:C?y:h});var k=n(E),O=k.prototype;if(O.constructor!==k)for(var T in m||i(O,"constructor",a(1,k)),p)if(c(p,T)){var I=p[T],N=I.s;c(k,N)||i(k,N,a(6,I.c))}},266:function(t,r,e){"use strict";e(7658),e(1884);var o=e(144),s=e(1767),n=e(5352);const a=["sm","md","lg","xl"],i=(()=>a.reduce(((t,r)=>(t[r]={type:[Boolean,String,Number],default:!1},t)),{}))(),c=(()=>a.reduce(((t,r)=>(t["offset"+(0,n.jC)(r)]={type:[String,Number],default:null},t)),{}))(),l=(()=>a.reduce(((t,r)=>(t["order"+(0,n.jC)(r)]={type:[String,Number],default:null},t)),{}))(),u={col:Object.keys(i),offset:Object.keys(c),order:Object.keys(l)};function d(t,r,e){let o=t;if(null!=e&&!1!==e){if(r){const e=r.replace(t,"");o+=`-${e}`}return"col"!==t||""!==e&&!0!==e?(o+=`-${e}`,o.toLowerCase()):o.toLowerCase()}}const p=new Map;r["Z"]=o.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...i,offset:{type:[String,Number],default:null},...c,order:{type:[String,Number],default:null},...l,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:r,data:e,children:o,parent:n}){let a="";for(const s in r)a+=String(r[s]);let i=p.get(a);if(!i){let t;for(t in i=[],u)u[t].forEach((e=>{const o=r[e],s=d(t,e,o);s&&i.push(s)}));const e=i.some((t=>t.startsWith("col-")));i.push({col:!e||!r.cols,[`col-${r.cols}`]:r.cols,[`offset-${r.offset}`]:r.offset,[`order-${r.order}`]:r.order,[`align-self-${r.alignSelf}`]:r.alignSelf}),p.set(a,i)}return t(r.tag,(0,s.ZP)(e,{class:i}),o)}})},1713:function(t,r,e){"use strict";e(7658),e(1884);var o=e(144),s=e(1767),n=e(5352);const a=["sm","md","lg","xl"],i=["start","end","center"];function c(t,r){return a.reduce(((e,o)=>(e[t+(0,n.jC)(o)]=r(),e)),{})}const l=t=>[...i,"baseline","stretch"].includes(t),u=c("align",(()=>({type:String,default:null,validator:l}))),d=t=>[...i,"space-between","space-around"].includes(t),p=c("justify",(()=>({type:String,default:null,validator:d}))),f=t=>[...i,"space-between","space-around","stretch"].includes(t),g=c("alignContent",(()=>({type:String,default:null,validator:f}))),m={align:Object.keys(u),justify:Object.keys(p),alignContent:Object.keys(g)},E={align:"align",justify:"justify",alignContent:"align-content"};function _(t,r,e){let o=E[t];if(null!=e){if(r){const e=r.replace(t,"");o+=`-${e}`}return o+=`-${e}`,o.toLowerCase()}}const h=new Map;r["Z"]=o.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:l},...u,justify:{type:String,default:null,validator:d},...p,alignContent:{type:String,default:null,validator:f},...g},render(t,{props:r,data:e,children:o}){let n="";for(const s in r)n+=String(r[s]);let a=h.get(n);if(!a){let t;for(t in a=[],m)m[t].forEach((e=>{const o=r[e],s=_(t,e,o);s&&a.push(s)}));a.push({"no-gutters":r.noGutters,"row--dense":r.dense,[`align-${r.align}`]:r.align,[`justify-${r.justify}`]:r.justify,[`align-content-${r.alignContent}`]:r.alignContent}),h.set(n,a)}return t(r.tag,(0,s.ZP)(e,{staticClass:"row",class:a}),o)}})},9895:function(t,r,e){"use strict";var o=e(2201);r["Z"]={requestToken(t){return o.Z.post("/token/",t)},recoverPassword(t){return o.Z.post("/password_reset/",t)},checkSmsTotp(t){return o.Z.post("/sms_totp/",t)},changePassword(t){return o.Z.post("/reset_confirm/",t)}}}}]);
//# sourceMappingURL=785.bbe510f1.js.map