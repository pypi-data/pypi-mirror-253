"use strict";(self["webpackChunkKalabash"]=self["webpackChunkKalabash"]||[]).push([[791],{1427:function(t,e,s){s.d(e,{Z:function(){return f}});var a=s(4145),n=s(4886),r=s(9592),o=function(){var t=this,e=t._self._c;return e(a.Z,[e(n.EB,[e("translate",{staticClass:"headline"},[t._v("Resources usage")])],1),e(n.ZB,t._l(t.resources,(function(s){return e("div",{key:s.name,staticClass:"mt-4"},[t._v(" "+t._s(s.label)+" ("+t._s(Math.ceil(s.usage))+"%) "),e(r.Z,{attrs:{value:s.usage,color:t.getProgressColor(s.usage)}})],1)})),0)],1)},l=[],i={props:{resources:Array},methods:{getProgressColor(t){return t<50?"primary":t<80?"warning":"error"}}},c=i,u=s(1001),d=(0,u.Z)(c,o,l,!1,null,null,null),f=d.exports},3615:function(t,e,s){s.r(e),s.d(e,{default:function(){return X}});var a=s(4562),n=s(266),r=s(4324),o=s(1713),l=s(6313),i=s(7953),c=function(){var t=this,e=t._self._c;return e("div",[e(l.Z,{attrs:{flat:""}},[e(i.qW,[e("translate",[t._v("Account")]),t._v(" "+t._s(t.account.username))],1),e(a.Z,{attrs:{color:"primary",icon:"",to:{name:"AccountEdit",params:{id:t.account.pk}}}},[e(r.Z,[t._v("mdi-circle-edit-outline")])],1)],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("account-summary",{attrs:{account:t.account}}),"DomainAdmins"===t.account.role?e("domain-admin-domains",{staticClass:"mt-2",attrs:{account:t.account}}):t._e()],1),e(n.Z,{attrs:{cols:"6"}},[t.limitsConfig.params&&t.limitsConfig.params.enable_admin_limits&&"StandardUsers"!==t.account.role&&"SuperAdmins"!==t.account.role?e("resources",{attrs:{resources:t.account.resources}}):t._e(),t.account.aliases?e("account-aliases",{staticClass:"mt-2",attrs:{account:t.account}}):t._e(),t.account.mailbox?e("account-sender-addresses",{staticClass:"mt-2",attrs:{account:t.account}}):t._e()],1)],1)],1)},u=[],d=(s(7658),s(5282)),f=s(9066),m=s(4145),p=s(4886),_=s(4127),g=function(){var t=this,e=t._self._c;return e(m.Z,[e(p.EB,[e("translate",{staticClass:"headline"},[t._v("Aliases")])],1),e(p.ZB,t._l(t.account.aliases,(function(s){return e(_.Z,{key:s,staticClass:"mr-2 mt-2"},[t._v(" "+t._s(s)+" ")])})),1)],1)},Z=[],h={props:{account:Object}},v=h,y=s(1001),b=(0,y.Z)(v,g,Z,!1,null,null,null),$=b.exports,A=s(5151),S=s(7808),x=function(){var t=this,e=t._self._c;return e(m.Z,[e(p.EB,[e("translate",{staticClass:"headline"},[t._v("Sender addresses")])],1),e(p.ZB,[e(A.Z,{attrs:{headers:t.headers,items:t.addresses,"hide-default-footer":"","no-data-text":t._f("translate")("No sender address defined for this account")},scopedSlots:t._u([{key:"item.address",fn:function({item:s}){return[s.pk?e("span",[t._v(t._s(s.address))]):e(S.Z,{attrs:{label:t._f("translate")("Specify an email address")},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.newAddress?e(a.Z,{attrs:{icon:"",color:"primary"},on:{click:t.submit}},[e(r.Z,[t._v("mdi-content-save")])],1):t._e()]},proxy:!0}],null,!0),model:{value:t.newAddress,callback:function(e){t.newAddress=e},expression:"newAddress"}})]}},{key:"item.actions",fn:function({item:s}){return[s.pk?e(a.Z,{attrs:{icon:"",color:"red",title:t._f("translate")("Remove this address")},on:{click:function(e){return t.deleteSenderAddress(s)}}},[e(r.Z,[t._v("mdi-delete-outline")])],1):t._e()]}}])}),t.hideAddBtn?t._e():e(a.Z,{attrs:{small:"",color:"primary",outlined:""},on:{click:t.addRow}},[e(r.Z,{attrs:{small:""}},[t._v("mdi-plus")]),t._v(" "),e("translate",[t._v("Add sender address")])],1)],1)],1)},C=[],k=s(2201);const w="senderaddresses";var j={getAll(){return k.Z.get(`${w}/`)},getAllForMailbox(t){return k.Z.get(`${w}/`,{params:{mailbox:t}})},create(t){return k.Z.post(`${w}/`,t)},delete(t){return k.Z["delete"](`${w}/${t}/`)}},B={props:{account:Object},data(){return{addresses:[],headers:[{text:this.$gettext("Address"),value:"address"},{text:"",value:"actions",align:"right",sortable:!1}],hideAddBtn:!1,newAddress:null}},methods:{addRow(){this.addresses.push({}),this.hideAddBtn=!0},fetchSenderAddresses(){j.getAllForMailbox(this.account.mailbox.pk).then((t=>{this.addresses=t.data}))},submit(){const t={address:this.newAddress,mailbox:this.account.mailbox.pk};j.create(t).then((t=>{this.fetchSenderAddresses(),this.newAddress=null,this.hideAddBtn=!1,d.$.$emit("notification",{msg:this.$gettext("Sender address added")})}))},deleteSenderAddress(t){j["delete"](t.pk).then((t=>{this.fetchSenderAddresses(),d.$.$emit("notification",{msg:this.$gettext("Sender address deleted")})}))}},mounted(){this.fetchSenderAddresses()}},O=B,M=(0,y.Z)(O,x,C,!1,null,null,null),E=M.exports,N=s(9592),P=function(){var t=this,e=t._self._c;return e(m.Z,[e(p.EB,[e("translate",{staticClass:"headline"},[t._v("General information")])],1),e(p.ZB,[e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Creation date")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t._f("date")(t.account.date_joined)))])],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Last login date")])],1),t.account.last_login?e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t._f("date")(t.account.last_login)))]):e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Never logged-in")])],1)],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Full name")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.first_name)+" "+t._s(t.account.last_name))])],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Role")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.role))])],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Secondary email")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.secondary_email))])],1),e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Phone number")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.phone_number))])],1),t.account.mailbox?[e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Quota")])],1),"0"===t.account.mailbox.quota?e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Unlimited")])],1):e(n.Z,{attrs:{cols:"6"}},[e(N.Z,{staticClass:"white--text",attrs:{color:t.account.mailbox.quota_usage<80?"primary":"warning",value:t.account.mailbox.quota_usage,height:"25"},scopedSlots:t._u([{key:"default",fn:function({value:s}){return[t._v(" "+t._s(Math.ceil(s))+"% ("+t._s(t.account.mailbox.quota)+" "),e("translate",[t._v("MB")]),t._v(") ")]}}],null,!1,2008207833)})],1)],1),t.account.mailbox.message_limit?e(o.Z,[e(n.Z,{attrs:{cols:"6"}},[e("translate",[t._v("Daily sending limit")])],1),e(n.Z,{attrs:{cols:"6"}},[t._v(t._s(t.account.mailbox.message_limit))])],1):t._e()]:t._e()],2)],1)},R=[],q={props:{account:Object}},D=q,L=(0,y.Z)(D,P,R,!1,null,null,null),F=L.exports,G=function(){var t=this,e=t._self._c;return e(m.Z,[e(p.EB,[e("translate",{staticClass:"headline"},[t._v("Administered domains")])],1),e(p.ZB,t._l(t.account.domains,(function(s){return e(o.Z,{key:s},[e(n.Z,{attrs:{cols:"12"}},[t._v(t._s(s))])],1)})),1)],1)},U=[],W={props:{account:Object}},I=W,Q=(0,y.Z)(I,G,U,!1,null,null,null),z=Q.exports,H=s(4726),J=s(1427),K={components:{AccountAliases:$,AccountSenderAddresses:E,AccountSummary:F,DomainAdminDomains:z,Resources:J.Z},data(){return{account:{pk:this.$route.params.id},limitsConfig:{}}},mounted(){f.Z.get(this.$route.params.id).then((t=>{this.account=t.data})).catch((t=>{404===t.response.status&&(d.$.$emit("notification",{msg:this.$gettext("Account not found!"),type:"error"}),this.$router.push({name:"Identities"}))})),H.Z.getApplication("limits").then((t=>{this.limitsConfig=t.data}))}},T=K,V=(0,y.Z)(T,c,u,!1,null,"c6b117de",null),X=V.exports},266:function(t,e,s){s(7658),s(1884);var a=s(144),n=s(1767),r=s(5352);const o=["sm","md","lg","xl"],l=(()=>o.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),i=(()=>o.reduce(((t,e)=>(t["offset"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>o.reduce(((t,e)=>(t["order"+(0,r.jC)(e)]={type:[String,Number],default:null},t)),{}))(),u={col:Object.keys(l),offset:Object.keys(i),order:Object.keys(c)};function d(t,e,s){let a=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");a+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(a+=`-${s}`,a.toLowerCase()):a.toLowerCase()}}const f=new Map;e["Z"]=a.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...l,offset:{type:[String,Number],default:null},...i,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:a,parent:r}){let o="";for(const n in e)o+=String(e[n]);let l=f.get(o);if(!l){let t;for(t in l=[],u)u[t].forEach((s=>{const a=e[s],n=d(t,s,a);n&&l.push(n)}));const s=l.some((t=>t.startsWith("col-")));l.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),f.set(o,l)}return t(e.tag,(0,n.ZP)(s,{class:l}),a)}})},1713:function(t,e,s){s(7658),s(1884);var a=s(144),n=s(1767),r=s(5352);const o=["sm","md","lg","xl"],l=["start","end","center"];function i(t,e){return o.reduce(((s,a)=>(s[t+(0,r.jC)(a)]=e(),s)),{})}const c=t=>[...l,"baseline","stretch"].includes(t),u=i("align",(()=>({type:String,default:null,validator:c}))),d=t=>[...l,"space-between","space-around"].includes(t),f=i("justify",(()=>({type:String,default:null,validator:d}))),m=t=>[...l,"space-between","space-around","stretch"].includes(t),p=i("alignContent",(()=>({type:String,default:null,validator:m}))),_={align:Object.keys(u),justify:Object.keys(f),alignContent:Object.keys(p)},g={align:"align",justify:"justify",alignContent:"align-content"};function Z(t,e,s){let a=g[t];if(null!=s){if(e){const s=e.replace(t,"");a+=`-${s}`}return a+=`-${s}`,a.toLowerCase()}}const h=new Map;e["Z"]=a.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:c},...u,justify:{type:String,default:null,validator:d},...f,alignContent:{type:String,default:null,validator:m},...p},render(t,{props:e,data:s,children:a}){let r="";for(const n in e)r+=String(e[n]);let o=h.get(r);if(!o){let t;for(t in o=[],_)_[t].forEach((s=>{const a=e[s],n=Z(t,s,a);n&&o.push(n)}));o.push({"no-gutters":e.noGutters,"row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),h.set(r,o)}return t(e.tag,(0,n.ZP)(s,{staticClass:"row",class:o}),a)}})},9066:function(t,e,s){var a=s(2201);const n="accounts";e["Z"]={getAll({domain:t,role:e}){return a.Z.get(`/${n}/`,{params:{domain:t,role:e}})},get(t){return a.Z.get(`${n}/${t}/`)},getRandomPassword(){return a.Z.get(`${n}/random_password`)},validate(t){return a.Z.post(`${n}/validate/`,t)},create(t){return a.Z.post(`${n}/`,t)},patch(t,e){return a.Z.patch(`${n}/${t}/`,e)},delete(t,e){return a.Z.post(`${n}/${t}/delete/`,e)}}}}]);
//# sourceMappingURL=791.f40b75df.js.map